# Task: Codebase Audit and Recommendations

- [x] Audit codebase for technical debt and missing features <!-- id: 0 -->
    - [x] Review High-Level Architecture (SYSTEM_OVERVIEW.md) <!-- id: 1 -->
    - [x] Analyze API structure and endpoints <!-- id: 2 -->
    - [x] Analyze Web application structure <!-- id: 3 -->
    - [x] Analyze Mobile application structure <!-- id: 4 -->
    - [x] Search for TODOs and FIXMEs <!-- id: 5 -->
    - [x] Check test coverage and quality <!-- id: 6 -->
- [x] Brainstorm and categorize recommendations <!-- id: 7 -->
- [x] Create implementation plan for priority improvements <!-- id: 8 -->
- [x] Present findings and recommendations to the user <!-- id: 9 -->
- [x] Organize work planning and progress into `docs/planning` <!-- id: 25 -->

# [EXECUTION] Improving Foundations & Mobile Experience
- [x] Improve Database Schema (tenant_roles PK) <!-- id: 10 -->
- [x] Implement Mobile App Enhancements (Auth/Theme) <!-- id: 11 -->
- [x] Refactor API Routes (admin.ts, classes.ts) <!-- id: 12 -->
- [x] Create API Blueprint & Gap Analysis <!-- id: 15 -->
- [ ] Add Audit Logs UI <!-- id: 13 -->
- [ ] Enhance Automated Testing <!-- id: 14 -->

# [EXECUTION] Implementing API Improvements
- [x] Extend Schema (Tags, Custom Fields, Payroll Basis) <!-- id: 16 -->
- [x] Implement Conflict Detection Service <!-- id: 17 -->
- [x] Integrate Conflict Detection into Classes & Subs <!-- id: 18 -->
- [x] Enhance Payroll with Percentage-of-Revenue Logic <!-- id: 19 -->
- [x] Implement Automated Refund Reconciliation <!-- id: 20 -->
- [x] Implement Bulk Check-in & Webhook Logging <!-- id: 21 -->
- [x] Update Internal Documentation & System Overview <!-- id: 22 -->
- [ ] Implement UI for Tags & Custom Fields in Studio Settings <!-- id: 23 -->
- [x] Verify, Commit, and Push Changes <!-- id: 24 -->

# [PLANNING] Phase 2: API Resilience & Standardization
- [x] Create Detailed Implementation Plan for Phase 2 <!-- id: 26 -->
- [ ] Implement Dynamic Rate Limiting <!-- id: 27 -->
- [ ] Migrate to OpenAPI/Zod-OpenAPI <!-- id: 28 -->
- [ ] Implement Capability-Based RBAC <!-- id: 29 -->
- [ ] Implement Churn Prediction API & Service <!-- id: 30 -->
- [ ] Implement Webhook Logs UI & Testing API <!-- id: 31 -->
