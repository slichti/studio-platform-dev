import{jsx as e,jsxs as a,Fragment as Ae}from"react/jsx-runtime";import{useParams as De,useOutletContext as $e}from"react-router";import{useState as m}from"react";import{useAuth as T}from"@clerk/react-router";import{format as N}from"date-fns";import{User as ce,Camera as je,Mail as Fe,MoreHorizontal as Oe,Plus as le,Trash2 as Ie}from"lucide-react";import{toast as l}from"sonner";import{useQuery as D,useQueryClient as qe,useMutation as g}from"@tanstack/react-query";import{a as v,t as Ue,h as S,B as h,e as b,q as V,s as X,f as P,S as de,I as z,D as oe,j as me,k as he,l as ue,L as pe,O as Le,g as be,P as _e}from"./server-build-tAMGW7nt.js";import"react-router-dom";import"isbot";import"react-dom/server";import"@clerk/react-router/server";import"isomorphic-dompurify";import"fuse.js";import"clsx";import"tailwind-merge";import"@headlessui/react";import"class-variance-authority";/* empty css                    */import"react-error-boundary";import"react-easy-crop";import"recharts";import"@stripe/stripe-js";import"@stripe/react-stripe-js";import"react-qr-code";function Ke(n,r){const{getToken:x}=T();return D({queryKey:["member",n,r],queryFn:async()=>{const p=await x();if(!p)throw new Error("No token");const d=await(await fetch(`${window.ENV.VITE_API_URL}/members/${r}`,{headers:{Authorization:`Bearer ${p}`,"X-Tenant-Slug":n}})).json();if(d.error)throw new Error(d.error);return d.member},enabled:!!n&&!!r})}function Ve(n,r){const{getToken:x}=T();return D({queryKey:["member-notes",n,r],queryFn:async()=>{const p=await x();return(await(await fetch(`${window.ENV.VITE_API_URL}/members/${r}/notes`,{headers:{Authorization:`Bearer ${p}`,"X-Tenant-Slug":n}})).json()).notes||[]},enabled:!!n&&!!r})}function Xe(n,r){const{getToken:x}=T();return D({queryKey:["member-coupons",n,r],queryFn:async()=>{const p=await x();return(await(await fetch(`${window.ENV.VITE_API_URL}/members/${r}/coupons`,{headers:{Authorization:`Bearer ${p}`,"X-Tenant-Slug":n}})).json()).coupons||[]},enabled:!!n&&!!r})}function Be(n){const{getToken:r}=T();return D({queryKey:["packs",n],queryFn:async()=>{const x=await r();return(await v("/commerce/packs",x,{headers:{"X-Tenant-Slug":n}})).packs||[]},enabled:!!n})}function vt(){const{slug:n,id:r}=De(),{isStudentView:x,tenant:p}=$e(),{getToken:u}=T(),d=qe();if(!r)return e("div",{children:"Invalid Member ID"});const{data:c,isLoading:xe}=Ke(n||"",r),{data:B,isLoading:fe}=Ve(n||"",r),{data:$,isLoading:ve}=Xe(n||"",r),{data:Ne}=Be(n||""),[y,ge]=m("overview"),[Q,R]=m(!1),[ye,E]=m(!1),[J,j]=m(!1),[we,M]=m(!1),[ze,F]=m(!1),[H,G]=m(!1),[k,Y]=m(""),[O,W]=m(""),[I,Z]=m(""),[A,ke]=m(""),[q,U]=m(null),f=c?.user?.profile||{},ee=[f.firstName,f.lastName].filter(Boolean).join(" ")||c?.user?.email||"Unknown",Ce=c?.roles?.map(t=>t.role).join(", ")||"Student",Se=(c?.purchasedPacks||[]).reduce((t,s)=>t+s.remainingCredits,0),L=c?.memberships?.some(t=>t.status==="active"),te=L?"Active":"Inactive",w=p?.customFieldDefinitions||{},C=c?.customFields||{},Pe=c?.bookings?.filter(t=>{if(t.status!=="confirmed")return!1;const s=new Date(t.class?.startTime||t.createdAt)<new Date,i=!t.checkedInAt;return s&&i}).length||0,_=g({mutationFn:async t=>{const s=await u(),i=await v(`/members/${r}/notes`,s,{method:"POST",headers:{"X-Tenant-Slug":n},body:JSON.stringify({note:t})});if(i.error)throw new Error(i.error);return i},onSuccess:()=>{d.invalidateQueries({queryKey:["member-notes",n,r]}),Y(""),l.success("Note added")},onError:t=>l.error(t.message)}),Te=g({mutationFn:async t=>{const s=await u(),i=await v(`/members/${r}/notes/${t}`,s,{method:"DELETE",headers:{"X-Tenant-Slug":n}});if(i.error)throw new Error(i.error);return i},onSuccess:()=>{d.invalidateQueries({queryKey:["member-notes",n,r]}),U(null),l.success("Note deleted")},onError:t=>l.error(t.message)}),K=g({mutationFn:async t=>{const s=await u(),i=await v("/commerce/purchase",s,{method:"POST",headers:{"X-Tenant-Slug":n},body:JSON.stringify({memberId:r,packId:t})});if(i.error)throw new Error(i.error);return i},onSuccess:()=>{d.invalidateQueries({queryKey:["member",n,r]}),R(!1),l.success("Pack assigned")},onError:t=>l.error(t.message)}),ae=g({mutationFn:async t=>{const s=await u(),i=await v(`/members/${r}`,s,{method:"PUT",headers:{"X-Tenant-Slug":n},body:JSON.stringify(t)});if(i.error)throw new Error(i.error);return i},onSuccess:()=>{d.invalidateQueries({queryKey:["member",n,r]}),E(!1),l.success("Profile updated")},onError:t=>l.error(t.message)}),se=g({mutationFn:async({subject:t,body:s})=>{const i=await u(),o=await v(`/members/${r}/email`,i,{method:"POST",headers:{"X-Tenant-Slug":n},body:JSON.stringify({subject:t,body:s})});if(o.error)throw new Error(o.error);return o},onSuccess:()=>{M(!1),W(""),Z(""),l.success("Email sent")},onError:t=>l.error(t.message)}),Ee=g({mutationFn:async t=>{const s=await u(),i=await v(`/members/${r}/status`,s,{method:"PATCH",headers:{"X-Tenant-Slug":n},body:JSON.stringify({status:t})});if(i.error)throw new Error(i.error);return i},onSuccess:(t,s)=>{d.invalidateQueries({queryKey:["member",n,r]}),F(!1),l.success(`Member ${s==="inactive"?"deactivated":"activated"}`)},onError:t=>l.error(t.message)}),ie=g({mutationFn:async t=>{const s=await u(),i=await v(`/commerce/coupons/${t}/reactivate`,s,{method:"PATCH",headers:{"X-Tenant-Slug":n},body:JSON.stringify({days:7})});if(i.error)throw new Error(i.error);return i},onSuccess:()=>{d.invalidateQueries({queryKey:["member-coupons",n,r]}),l.success("Coupon reactivated for 7 days")},onError:t=>l.error(t.message)}),Me=async t=>{const s=t.target.files?.[0];if(s)try{G(!0);const i=await u(),o=new FormData;o.append("file",s),o.append("memberId",r);const re=await(await fetch(`${_e}/uploads/portrait`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"X-Tenant-Slug":p.slug},body:o})).json();if(re.error)throw new Error(re.error);d.invalidateQueries({queryKey:["member",n,r]}),l.success("Photo uploaded")}catch(i){l.error(i.message||"Failed to upload photo")}finally{G(!1)}};return xe?e("div",{className:"p-12 text-center text-zinc-500",children:"Loading student profile..."}):c?e(Ue,{children:a("div",{className:"max-w-5xl mx-auto pb-10",children:[a("div",{className:"flex items-start justify-between mb-8",children:[a("div",{className:"flex items-center gap-4",children:[a("label",{className:"relative h-20 w-20 bg-zinc-100 rounded-full flex items-center justify-center border border-zinc-200 overflow-hidden cursor-pointer group",children:[f.portraitUrl?e("img",{src:f.portraitUrl,alt:ee,className:"h-full w-full object-cover"}):e(ce,{className:"h-8 w-8 text-zinc-400"}),e("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:H?e("span",{className:"text-white text-xs",children:"..."}):e(je,{className:"h-6 w-6 text-white"})}),e("input",{type:"file",accept:"image/*",className:"hidden",onChange:Me,disabled:H})]}),a("div",{children:[a("div",{className:"flex items-center gap-3",children:[e("h1",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-50",children:ee}),e(S,{variant:L?"success":"secondary",children:te})]}),a("div",{className:"flex items-center gap-2 mt-1 text-zinc-500 text-sm",children:[e(Fe,{className:"h-4 w-4"}),e("span",{children:c.user?.email}),e("span",{className:"mx-1",children:"•"}),e(S,{variant:"outline",className:"capitalize",children:Ce})]}),a("div",{className:"text-xs text-zinc-400 mt-1",children:["Joined ",N(new Date(c.joinedAt),"MMM d, yyyy")]})]})]}),a("div",{className:"flex gap-2 relative",children:[e(h,{variant:"outline",onClick:()=>E(!0),children:"Edit Profile"}),a("div",{className:"relative",children:[a(h,{variant:"default",onClick:()=>j(!J),children:["Actions ",e(Oe,{className:"ml-2 h-4 w-4"})]}),J&&a("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-zinc-200 rounded-md shadow-lg z-10 py-1",children:[e("button",{onClick:()=>{j(!1),M(!0)},className:"block w-full text-left px-4 py-2 text-sm text-zinc-700 hover:bg-zinc-50",children:"Send Email"}),e("div",{className:"border-t border-zinc-100 my-1"}),e("button",{onClick:()=>{j(!1),F(!0)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:c.status==="active"?"Deactivate Member":"Activate Member"})]})]})]})]}),e("div",{className:"flex border-b border-zinc-200 mb-6 overflow-x-auto",children:[{id:"overview",label:"Overview"},{id:"memberships",label:"Memberships & Credits"},{id:"coupons",label:"Generated Coupons"},{id:"attendance",label:"Attendance"},{id:"notes",label:"Staff Notes"}].map(t=>e("button",{onClick:()=>ge(t.id),className:`px-4 py-2 text-sm font-medium border-b-2 whitespace-nowrap transition-colors ${y===t.id?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-200"}`,children:t.label},t.id))}),a("div",{className:"min-h-[400px]",children:[y==="overview"&&a("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e("div",{className:"md:col-span-2 space-y-6",children:a(b,{children:[e(V,{children:e(X,{children:"Quick Stats"})}),e(P,{children:a("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[a("div",{className:"p-4 bg-zinc-50 rounded border border-zinc-100 dark:bg-zinc-800 dark:border-zinc-700",children:[e("div",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:c.bookings?.length||0}),e("div",{className:"text-xs text-zinc-500 uppercase tracking-wide mt-1",children:"Classes Taken"})]}),a("div",{className:"p-4 bg-zinc-50 rounded border border-zinc-100 dark:bg-zinc-800 dark:border-zinc-700",children:[e("div",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:Se}),e("div",{className:"text-xs text-zinc-500 uppercase tracking-wide mt-1",children:"Available Credits"})]}),a("div",{className:"p-4 bg-zinc-50 rounded border border-zinc-100 dark:bg-zinc-800 dark:border-zinc-700",children:[e("div",{className:"text-2xl font-bold text-red-600",children:Pe}),e("div",{className:"text-xs text-zinc-500 uppercase tracking-wide mt-1",children:"No Shows"})]}),a("div",{className:"p-4 bg-zinc-50 rounded border border-zinc-100 dark:bg-zinc-800 dark:border-zinc-700",children:[e("div",{className:`text-2xl font-bold ${L?"text-green-600":"text-zinc-400"}`,children:te}),e("div",{className:"text-xs text-zinc-500 uppercase tracking-wide mt-1",children:"Membership Status"})]})]})})]})}),a("div",{children:[a(b,{children:[e(V,{children:e(X,{className:"text-sm uppercase text-zinc-500 tracking-wider",children:"Contact Info"})}),a(P,{className:"space-y-4 text-sm",children:[a("div",{children:[e("label",{className:"block text-xs text-zinc-400",children:"Email"}),e("div",{className:"text-zinc-800 dark:text-zinc-200",children:c.user?.email})]}),a("div",{children:[e("label",{className:"block text-xs text-zinc-400",children:"Phone"}),e("div",{className:"text-zinc-800 dark:text-zinc-200",children:f.phone||"Not provided"})]})]})]}),Object.keys(w).length>0&&a(b,{className:"mt-6",children:[e(V,{children:e(X,{className:"text-sm uppercase text-zinc-500 tracking-wider",children:"Additional Info"})}),e(P,{className:"space-y-4 text-sm",children:Object.entries(w).map(([t,s])=>a("div",{children:[e("label",{className:"block text-xs text-zinc-400",children:s.label}),e("div",{className:"text-zinc-800 dark:text-zinc-200",children:s.fieldType==="boolean"?C[t]?"Yes":"No":C[t]?.toString()||"—"})]},t))})]})]})]}),y==="memberships"&&a("div",{className:"space-y-6",children:[a("div",{className:"flex justify-end gap-2",children:[a(h,{variant:"outline",size:"sm",onClick:()=>R(!Q),children:[e(le,{className:"h-4 w-4 mr-2"})," Assign Pack"]}),a(h,{variant:"outline",size:"sm",disabled:!0,children:[e(le,{className:"h-4 w-4 mr-2"})," Add Plan"]})]}),Q&&e(b,{className:"bg-zinc-50 dark:bg-zinc-800/50",children:a(P,{className:"pt-6",children:[e("h4",{className:"font-semibold text-sm mb-3",children:"Assign Class Pack (Internal / POS)"}),a("div",{className:"flex gap-4 items-end",children:[a("div",{className:"flex-1",children:[e("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Select Pack"}),a(de,{value:A,onChange:t=>ke(t.target.value),children:[e("option",{value:"",children:"Select a pack..."}),(Ne||[]).map(t=>a("option",{value:t.id,children:[t.name," (",t.credits," credits) - $",(t.price/100).toFixed(2)]},t.id))]})]}),e(h,{onClick:()=>{A&&K.mutate(A)},disabled:!A||K.isPending,children:K.isPending?"Charging...":"Assign & Charge"})]})]})}),a("div",{children:[e("h3",{className:"font-medium text-zinc-900 dark:text-zinc-100 mb-3",children:"Active Memberships"}),c.memberships?.length>0?e("div",{className:"space-y-3",children:c.memberships.map(t=>a(b,{className:"p-4 flex items-center justify-between",children:[a("div",{children:[e("h3",{className:"font-semibold",children:t.plan?.name||"Unknown Plan"}),a("div",{className:"text-sm text-zinc-500 mt-1",children:["Status: ",e("span",{className:"capitalize font-medium text-zinc-700 dark:text-zinc-300",children:t.status}),e("span",{className:"mx-2",children:"•"}),"Started ",N(new Date(t.startDate),"MMM d, yyyy")]})]}),e(S,{variant:t.status==="active"?"success":"secondary",children:t.status})]},t.id))}):e("div",{className:"text-sm text-zinc-500 italic",children:"No active memberships."})]}),a("div",{children:[e("h3",{className:"font-medium text-zinc-900 dark:text-zinc-100 mb-3",children:"Class Packs & Credits"}),c.purchasedPacks?.length>0?e("div",{className:"space-y-3",children:c.purchasedPacks.map(t=>a(b,{className:"p-4 flex items-center justify-between",children:[a("div",{children:[e("h3",{className:"font-semibold",children:t.definition?.name||"Unknown Pack"}),a("div",{className:"text-sm text-zinc-500 mt-1 flex items-center gap-3",children:[a("span",{children:["Purchased ",N(new Date,"MMM d, yyyy")]}),t.expiresAt&&a(Ae,{children:[e("span",{children:"•"}),a("span",{className:new Date(t.expiresAt)<new Date?"text-red-600":"",children:["Expires ",N(new Date(t.expiresAt),"MMM d, yyyy")]})]})]})]}),a("div",{className:"text-right",children:[a("div",{className:"text-lg font-bold",children:[t.remainingCredits," / ",t.initialCredits]}),e("div",{className:"text-xs text-zinc-500 uppercase",children:"Credits Left"})]})]},t.id))}):e("div",{className:"text-sm text-zinc-500 italic",children:"No packs purchased."})]})]}),y==="coupons"&&a("div",{className:"space-y-4",children:[e("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4 dark:bg-blue-900/20 dark:border-blue-800",children:e("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:"These are coupons automatically generated for this student by marketing automations."})}),ve?e("div",{children:"Loading coupons..."}):$&&$.length>0?e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:$.map(t=>{const s=new Date(t.expiresAt)<new Date,i=!t.active||s;return e(b,{className:"relative",children:a(P,{className:"pt-6",children:[a("div",{className:"flex justify-between items-start mb-2",children:[e("div",{className:"font-mono text-lg font-bold bg-zinc-100 px-2 py-1 rounded dark:bg-zinc-800",children:t.code}),e(S,{variant:t.active?s?"destructive":"success":"secondary",children:t.active?s?"Expired":"Active":"Inactive"})]}),a("div",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-4",children:[t.type==="percent"?`${t.value}% Off`:`$${t.value} Off`,a("div",{className:"text-xs text-zinc-400 mt-1",children:["Expires: ",N(new Date(t.expiresAt),"MMM d, yyyy")]})]}),i&&e(h,{variant:"outline",className:"w-full",onClick:()=>ie.mutate(t.id),disabled:ie.isPending,children:"Reactivate (7 Days)"})]})},t.id)})}):e("div",{className:"text-center py-10 text-zinc-500",children:"No coupons found."})]}),y==="attendance"&&e(b,{className:"overflow-hidden",children:a("table",{className:"w-full text-left text-sm",children:[e("thead",{className:"bg-zinc-50 border-b border-zinc-200 dark:bg-zinc-800 dark:border-zinc-700",children:a("tr",{children:[e("th",{className:"px-4 py-3 font-medium text-zinc-500",children:"Date"}),e("th",{className:"px-4 py-3 font-medium text-zinc-500",children:"Class"}),e("th",{className:"px-4 py-3 font-medium text-zinc-500",children:"Status"})]})}),e("tbody",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:c.bookings?.length===0?e("tr",{children:e("td",{colSpan:3,className:"px-4 py-8 text-center text-zinc-400",children:"No attendance history"})}):c.bookings?.map(t=>a("tr",{className:"hover:bg-zinc-50 dark:hover:bg-zinc-800/50",children:[e("td",{className:"px-4 py-3 text-zinc-600 dark:text-zinc-300",children:N(new Date(t.class?.startTime||t.createdAt),"MMM d, h:mm a")}),e("td",{className:"px-4 py-3 font-medium",children:t.class?.title||"Unknown Class"}),e("td",{className:"px-4 py-3",children:e(S,{variant:t.status==="confirmed"?"success":"secondary",children:t.status})})]},t.id))})]})}),y==="notes"&&a("div",{className:"space-y-6",children:[a("div",{className:"flex gap-4",children:[e(z,{placeholder:"Add a note about this student...",value:k,onChange:t=>Y(t.target.value),onKeyDown:t=>{t.key==="Enter"&&k&&_.mutate(k)}}),e(h,{onClick:()=>_.mutate(k),disabled:!k||_.isPending,children:"Add Note"})]}),fe?e("div",{children:"Loading notes..."}):a("div",{className:"space-y-4",children:[(B||[]).map(t=>a(b,{className:"p-4",children:[a("div",{className:"flex justify-between items-start",children:[e("p",{className:"text-sm text-zinc-800 dark:text-zinc-200 whitespace-pre-wrap",children:t.note}),e(h,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-zinc-400 hover:text-red-600",onClick:()=>U(t.id),children:e(Ie,{className:"h-3 w-3"})})]}),a("div",{className:"mt-2 flex items-center gap-2 text-xs text-zinc-500",children:[e(ce,{className:"h-3 w-3"}),e("span",{children:t.author?.user?.profile?.firstName||t.author?.user?.email||"Unknown Staff"}),e("span",{children:"•"}),e("span",{children:N(new Date(t.createdAt),"MMM d, yyyy h:mm a")})]})]},t.id)),B?.length===0&&e("div",{className:"text-center py-8 text-zinc-400",children:"No notes yet."})]})]})]}),e(oe,{open:ye,onOpenChange:E,children:a(me,{children:[e(he,{children:e(ue,{children:"Edit Profile"})}),a("form",{onSubmit:t=>{t.preventDefault();const s=new FormData(t.currentTarget),i={firstName:s.get("firstName"),lastName:s.get("lastName"),phone:s.get("phone"),customFields:{}};Object.keys(w).forEach(o=>{const ne=s.get(`custom_${o}`);w[o].fieldType==="boolean"?i.customFields[o]=t.currentTarget.elements.namedItem(`custom_${o}`).checked:i.customFields[o]=ne}),ae.mutate(i)},className:"space-y-4 py-4 mt-2 max-h-[70vh] overflow-y-auto px-1",children:[a("div",{className:"grid grid-cols-2 gap-4",children:[a("div",{className:"space-y-2",children:[e("label",{className:"text-sm font-medium",children:"First Name"}),e(z,{name:"firstName",defaultValue:f.firstName})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-sm font-medium",children:"Last Name"}),e(z,{name:"lastName",defaultValue:f.lastName})]})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-sm font-medium",children:"Phone"}),e(z,{name:"phone",defaultValue:f.phone})]}),Object.keys(w).length>0&&a("div",{className:"space-y-4 border-t border-zinc-100 pt-4 mt-4",children:[e("h4",{className:"font-medium text-sm text-zinc-900",children:"Additional Information"}),Object.entries(w).map(([t,s])=>a("div",{className:"space-y-2",children:[a("label",{className:"text-sm font-medium",children:[s.label," ",s.isRequired&&"*"]}),s.fieldType==="select"?a(de,{name:`custom_${t}`,defaultValue:C[t]||"",children:[e("option",{value:"",children:"Select..."}),s.options?.map(i=>e("option",{value:i,children:i},i))]}):s.fieldType==="boolean"?a("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",name:`custom_${t}`,defaultChecked:!!C[t],className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500"}),e("span",{className:"text-sm text-zinc-600",children:s.label})]}):e(z,{type:s.fieldType==="number"?"number":s.fieldType==="date"?"date":"text",name:`custom_${t}`,defaultValue:C[t]||"",required:s.isRequired})]},t))]}),a(pe,{className:"mt-4",children:[e(h,{type:"button",variant:"outline",onClick:()=>E(!1),children:"Cancel"}),e(h,{type:"submit",disabled:ae.isPending,children:"Save Changes"})]})]})]})}),e(oe,{open:we,onOpenChange:M,children:a(me,{children:[e(he,{children:e(ue,{children:"Send Email"})}),a("div",{className:"space-y-4 py-4",children:[a("div",{className:"space-y-2",children:[e("label",{className:"text-sm font-medium",children:"Subject"}),e(z,{value:O,onChange:t=>W(t.target.value),placeholder:"Subject line..."})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-sm font-medium",children:"Message"}),e(Le,{value:I,onChange:t=>Z(t.target.value),placeholder:"Message body...",rows:5})]})]}),a(pe,{children:[e(h,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),e(h,{onClick:()=>se.mutate({subject:O,body:I}),disabled:!O||!I||se.isPending,children:"Send Email"})]})]})}),e(be,{open:!!q,onOpenChange:t=>!t&&U(null),onConfirm:()=>{q&&Te.mutate(q)},title:"Delete Note",description:"Are you sure you want to delete this note? This cannot be undone.",confirmText:"Delete"}),e(be,{open:ze,onOpenChange:t=>F(t),onConfirm:()=>{Ee.mutate(c.status==="active"?"inactive":"active")},title:c.status==="active"?"Deactivate Member":"Activate Member",description:c.status==="active"?"This will prevent the member from booking classes. History preserved.":"This will restore access for this member.",confirmText:c.status==="active"?"Deactivate":"Activate"})]})}):e("div",{className:"p-12 text-center text-red-500",children:"Student not found"})}export{vt as default};
