import{jsxs as t,jsx as e,Fragment as J}from"react/jsx-runtime";import{useOutletContext as L,useSubmit as X,Link as A,Form as D}from"react-router";import{useState as o,useEffect as _}from"react";import{Globe as P,CreditCard as y,Plus as B,MapPin as R,Trash2 as I,ShoppingBag as K}from"lucide-react";import{toast as c}from"sonner";import{a as r,C as U}from"./server-build-tAMGW7nt.js";import"react-router-dom";import"isbot";import"react-dom/server";import"@clerk/react-router";import"@clerk/react-router/server";import"@tanstack/react-query";import"isomorphic-dompurify";import"fuse.js";import"clsx";import"tailwind-merge";import"date-fns";import"@headlessui/react";import"class-variance-authority";/* empty css                    */import"react-error-boundary";import"react-easy-crop";import"recharts";import"@stripe/stripe-js";import"@stripe/react-stripe-js";import"react-qr-code";const $=typeof window<"u"?window.ENV?.API_URL:"";function we({locations:m}){const{tenant:p}=L(),[n,S]=o(p),[u,x]=o(n.name),[l,d]=o(!1),[h,g]=o(null),[b,k]=o(null),[O,w]=o(!1),E=X(),[N,z]=o(null),[M,C]=o(!1),j=async()=>{c.success("Your request for a Stripe Terminal Reader (WisePOS E) has been received. Our team will contact you shortly to confirm shipping details."),C(!1)},F=i=>{z(i)},H=()=>{N&&(E({intent:"delete_location",id:N},{method:"post"}),z(null))};return t("div",{className:"max-w-4xl pb-10",children:[e("div",{className:"mb-8",children:e("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Studio Settings"})}),t("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm mb-8",children:[e("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 mb-4",children:"General Information"}),h&&e("div",{className:"bg-red-50 text-red-600 p-3 rounded mb-4 text-sm",children:h}),b&&e("div",{className:"bg-green-50 text-green-600 p-3 rounded mb-4 text-sm",children:b}),t("form",{onSubmit:async i=>{i.preventDefault(),d(!0),g(null),k(null);try{const s=await window.Clerk?.session?.getToken();await r("/tenant/settings",s,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({name:u})}),k("Settings saved successfully")}catch(s){g(s.message||"Failed to save settings"),c.error(s.message||"Failed to save settings")}finally{d(!1)}},children:[t("div",{className:"mb-4",children:[e("label",{className:"block text-xs font-semibold text-zinc-500 uppercase tracking-wide mb-2",children:"Studio Name"}),e("input",{type:"text",value:u,onChange:i=>x(i.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Enter studio name"})]}),e("div",{className:"pt-2",children:e("button",{type:"submit",disabled:l,className:"bg-zinc-900 text-white px-4 py-2 rounded-md font-medium text-sm hover:bg-zinc-800 disabled:opacity-70",children:l?"Saving...":"Save Changes"})})]}),t("div",{className:"mt-6 pt-6 border-t border-zinc-100 dark:border-zinc-800",children:[e("label",{className:"block text-xs font-semibold text-zinc-500 uppercase tracking-wide mb-2",children:"Studio Logo"}),e("p",{className:"text-xs text-zinc-400 mb-3",children:"Upload a logo that will appear in the sidebar header. Recommended: 200x200px or larger."}),t("div",{className:"flex items-start gap-4",children:[e("div",{className:"w-20 h-20 rounded-lg border border-zinc-200 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-800 flex items-center justify-center overflow-hidden",children:n.branding?.logoUrl?e("img",{src:n.branding.logoUrl,alt:"Studio logo",className:"w-full h-full object-contain"}):e("span",{className:"text-zinc-400 text-xs text-center px-2",children:"No logo"})}),t("div",{className:"flex-1",children:[e("input",{type:"file",id:"logo-upload",accept:"image/*",className:"hidden",onChange:async i=>{const s=i.target.files?.[0];if(s)try{d(!0);const a=await window.Clerk?.session?.getToken(),f=new FormData;f.append("file",s);const T=await(await fetch(`${$}/uploads/logo`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"X-Tenant-Slug":n.slug},body:f})).json();if(T.error)throw new Error(T.error);k("Logo uploaded successfully"),window.location.reload()}catch(a){g(a.message||"Failed to upload logo")}finally{d(!1)}}}),e("label",{htmlFor:"logo-upload",className:"inline-flex items-center gap-2 px-4 py-2 border border-zinc-300 dark:border-zinc-600 rounded-md text-sm font-medium text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-800 cursor-pointer transition-colors",children:l?"Uploading...":"Upload Logo"}),e("p",{className:"text-xs text-zinc-400 mt-1",children:"PNG, JPG or WebP. Max 5MB."})]})]})]})]}),t("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm mb-8",children:[e("div",{className:"flex justify-between items-start mb-4",children:t("div",{children:[t("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[e(P,{className:"h-5 w-5 text-blue-500"}),"Marketplace Discovery"]}),e("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1",children:"Allow new students to find your studio in the global app."})]})}),t("div",{className:"flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg border border-zinc-200 dark:border-zinc-700",children:[t("div",{children:[e("div",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Public Marketplace Listing"}),e("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:n.isPublic?"Your studio is visible in search results.":"Your studio is hidden from search."})]}),t("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",className:"sr-only peer",checked:n.isPublic||!1,onChange:async i=>{const s=i.target.checked;try{const a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({isPublic:s})}),window.location.reload()}catch{c.error("Failed to update marketplace setting")}}}),e("div",{className:"w-11 h-6 bg-zinc-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-zinc-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),t("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm mb-8",children:[e("div",{className:"flex justify-between items-start mb-4",children:t("div",{children:[t("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[e(y,{className:"h-5 w-5 text-purple-500"}),"Kiosk Mode"]}),e("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1",children:"Enable self-service check-in for your front desk."})]})}),t("div",{className:"flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg border border-zinc-200 dark:border-zinc-700 mb-4",children:[t("div",{children:[e("div",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Enable Kiosk App"}),e("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:n.features?.includes("kiosk")?"Kiosk is active. Access it at /kiosk/your-slug.":"Kiosk is currently disabled."})]}),t("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",className:"sr-only peer",checked:n.features?.includes("kiosk")||!1,onChange:async i=>{const s=i.target.checked;try{const a=await window.Clerk?.session?.getToken();await r(`/studios/${n.id}/features`,a,{method:"POST",body:JSON.stringify({featureKey:"kiosk",enabled:s})}),window.location.reload()}catch{c.error("Failed to toggle Kiosk mode")}}}),e("div",{className:"w-11 h-6 bg-zinc-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-zinc-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),n.features?.includes("kiosk")&&t("div",{className:"ml-1 p-4 border border-zinc-100 dark:border-zinc-700 rounded-lg",children:[e("label",{className:"block text-xs font-semibold text-zinc-500 uppercase tracking-wide mb-2",children:"Kiosk PIN"}),t("div",{className:"flex gap-4 items-center",children:[e("input",{type:"text",maxLength:6,defaultValue:n.settings?.kioskPin||"",placeholder:"123456",className:"w-40 bg-zinc-50 dark:bg-zinc-800 border-zinc-300 dark:border-zinc-700 rounded text-sm px-3 py-2 text-center tracking-widest font-mono",onBlur:async i=>{const s=i.target.value;if(!(s.length<4))try{const a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({kioskPin:s})}),c.success("Kiosk PIN updated")}catch{c.error("Failed to save PIN")}}}),e("a",{href:`/kiosk/${n.slug}/login`,target:"_blank",rel:"noreferrer",className:"text-sm text-purple-600 hover:text-purple-700 font-medium",children:"Open Kiosk App →"})]}),e("p",{className:"text-xs text-zinc-400 mt-2",children:"This PIN is required to unlock the Kiosk on your tablet. Keep it secret from students."})]})]}),t("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm mb-8",children:[e("div",{className:"flex justify-between items-start mb-4",children:t("div",{children:[e("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"Registration"}),e("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1",children:"Control how new students sign up for your studio."})]})}),t("div",{className:"flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg border border-zinc-200 dark:border-zinc-700",children:[t("div",{children:[e("div",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Public Student Registration"}),e("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:n.settings?.enableStudentRegistration?"Students can create accounts on your public site.":"Only you can add students manually."})]}),t("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",className:"sr-only peer",checked:n.settings?.enableStudentRegistration||!1,onChange:async i=>{const s=i.target.checked;try{const a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{enableStudentRegistration:s}})}),window.location.reload()}catch{c.error("Failed to update setting")}}}),e("div",{className:"w-11 h-6 bg-zinc-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-zinc-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),t("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm mb-8",children:[t("div",{className:"mb-4",children:[e("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"Notifications & Automation"}),e("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1",children:"Manage email alerts and studio automation settings."})]}),t("div",{className:"space-y-6",children:[t("div",{children:[e("label",{className:"block text-xs font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Admin Notification Email"}),e("input",{type:"email",className:"w-full border-zinc-300 dark:border-zinc-700 rounded text-sm px-3 py-2 bg-white dark:bg-zinc-800",placeholder:"admin@studio.com",defaultValue:n.settings?.notifications?.adminEmail||"",onBlur:async i=>{const s=i.target.value,a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{notifications:{...n.settings?.notifications,adminEmail:s}}})})}}),e("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:"Where should we send system alerts?"})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t("div",{className:"flex items-center justify-between p-3 bg-zinc-50 dark:bg-zinc-800/50 rounded border border-zinc-200 dark:border-zinc-700",children:[t("div",{children:[e("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"New Student Alerts"}),e("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Email on registration."})]}),t("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",className:"sr-only peer",checked:n.settings?.notifications?.newStudentAlert||!1,onChange:async i=>{const s=i.target.checked,a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{notifications:{...n.settings?.notifications,newStudentAlert:s}}})}),window.location.reload()}}),e("div",{className:"w-9 h-5 bg-zinc-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-zinc-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})]}),t("div",{className:"flex items-center justify-between p-3 bg-zinc-50 dark:bg-zinc-800/50 rounded border border-zinc-200 dark:border-zinc-700",children:[t("div",{children:[e("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"BCC on User Emails"}),e("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Copy of booking emails."})]}),t("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",className:"sr-only peer",checked:n.settings?.notifications?.enableBcc||!1,onChange:async i=>{const s=i.target.checked,a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{notifications:{...n.settings?.notifications,enableBcc:s}}})}),window.location.reload()}}),e("div",{className:"w-9 h-5 bg-zinc-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-zinc-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})]})]}),t("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-800",children:[t("div",{className:"flex items-center justify-between mb-4",children:[t("div",{children:[e("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Enable No-Show Fee Automation"}),e("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Automatically charge fees for missed classes."})]}),t("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",className:"sr-only peer",checked:n.settings?.noShowFeeEnabled||!1,onChange:async i=>{const s=i.target.checked;try{const a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{noShowFeeEnabled:s}})}),window.location.reload()}catch{c.error("Failed to save")}}}),e("div",{className:"w-11 h-6 bg-zinc-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-zinc-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),n.settings?.noShowFeeEnabled&&t(J,{children:[t("div",{className:"mb-4",children:[e("label",{className:"block text-xs font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Fee Amount ($)"}),e("input",{type:"number",step:"0.01",className:"w-full border-zinc-300 dark:border-zinc-700 rounded text-sm px-3 py-2 bg-white dark:bg-zinc-800",placeholder:"10.00",defaultValue:n.settings?.noShowFeeAmount?(n.settings.noShowFeeAmount/100).toFixed(2):"10.00",onBlur:async i=>{const s=parseFloat(i.target.value);if(s>0){const a=Math.round(s*100),f=await window.Clerk?.session?.getToken();await r("/tenant/settings",f,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{noShowFeeAmount:a}})})}}}),e("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:'Fee will be charged automatically when marking "No Show".'})]}),t("div",{className:"mb-4 ml-1",children:[t("label",{className:"flex items-center gap-2 cursor-pointer",children:[e("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:n.settings?.notificationSettings?.noShowSms!==!1,onChange:async i=>{const s=i.target.checked,a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{notificationSettings:{...n.settings?.notificationSettings,noShowSms:s}}})}),window.location.reload()}}),e("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Send SMS Alert"})]}),e("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 ml-6 mt-1",children:"Notify student via SMS when charged/marked."})]})]}),t("div",{className:"flex items-center justify-between pb-4",children:[t("div",{children:[e("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Auto-Mark No Shows"}),e("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Automatically mark expected students as No Show."})]}),t("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",className:"sr-only peer",checked:n.settings?.noShowAutoMarkEnabled||!1,onChange:async i=>{const s=i.target.checked;try{const a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{noShowAutoMarkEnabled:s}})}),window.location.reload()}catch{c.error("Failed to save")}}}),e("div",{className:"w-11 h-6 bg-zinc-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-zinc-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),n.settings?.noShowAutoMarkEnabled&&t("div",{children:[e("label",{className:"block text-xs font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"When to Mark?"}),t("select",{className:"w-full border-zinc-300 dark:border-zinc-700 rounded text-sm px-3 py-2 bg-white dark:bg-zinc-800",defaultValue:n.settings?.noShowAutoMarkTime||"end_of_class",onChange:async i=>{const s=i.target.value,a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{noShowAutoMarkTime:s}})})},children:[e("option",{value:"start_of_class",children:"Start of Class"}),e("option",{value:"15_mins_after_start",children:"15 Minutes After Start"}),e("option",{value:"end_of_class",children:"End of Class"})]})]})]})]})]}),t("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm mb-8",children:[t("div",{className:"mb-4",children:[e("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"Class Management"}),e("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1",children:"Configure booking windows and cancellation policies."})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{children:[e("label",{className:"block text-xs font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Attendance Switch Cutoff"}),e(v,{value:n.settings?.classSettings?.attendanceSwitchCutoffMinutes||15,min:0,step:5,suffix:"min",onChange:async i=>{const s=await window.Clerk?.session?.getToken();await r("/tenant/settings",s,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{classSettings:{...n.settings?.classSettings,attendanceSwitchCutoffMinutes:i}}})})}}),e("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-2",children:"When students can last switch between In-Person and Zoom."})]}),t("div",{children:[e("label",{className:"block text-xs font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Cancellation Cutoff"}),e(v,{value:n.settings?.classSettings?.cancellationCutoffMinutes||60,min:0,step:15,suffix:"min",onChange:async i=>{const s=await window.Clerk?.session?.getToken();await r("/tenant/settings",s,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{classSettings:{...n.settings?.classSettings,cancellationCutoffMinutes:i}}})})}}),e("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-2",children:"Latest time a student can cancel without penalty."})]}),e("div",{className:"md:col-span-2 border-t border-zinc-100 dark:border-zinc-800 pt-4 mt-2",children:t("div",{className:"flex items-center justify-between mb-4",children:[t("div",{children:[e("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Auto-Cancel Low Enrollment"}),e("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Automatically cancel classes that don't meet minimum enrollment."})]}),t("div",{className:"flex items-center gap-4",children:[t("label",{className:"flex items-center gap-2 cursor-pointer",children:[e("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:n.settings?.classSettings?.defaultAutoCancelEnabled!==!1,onChange:async i=>{const s=i.target.checked,a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{classSettings:{...n.settings?.classSettings,defaultAutoCancelEnabled:s}}})}),window.location.reload()}}),e("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Enable by Default"})]}),n.settings?.classSettings?.defaultAutoCancelEnabled!==!1&&e("div",{className:"flex items-center gap-2",children:e(v,{value:n.settings?.classSettings?.defaultAutoCancelThresholdHours||2,min:1,step:1,suffix:"hours pre-class",onChange:async i=>{const s=await window.Clerk?.session?.getToken();await r("/tenant/settings",s,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{classSettings:{...n.settings?.classSettings,defaultAutoCancelThresholdHours:i}}})})}})})]})]})}),t("div",{className:"md:col-span-2 border-t border-zinc-100 dark:border-zinc-800 pt-4",children:[t("div",{className:"flex items-center justify-between pb-4 border-b border-zinc-100 dark:border-zinc-800 mb-4",children:[t("div",{children:[e("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Booking Confirmations"}),e("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Notify students when they book a class."})]}),t("div",{className:"flex gap-4",children:[t("label",{className:"flex items-center gap-2 cursor-pointer",children:[e("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:n.settings?.notificationSettings?.bookingEmail!==!1,onChange:async i=>{const s=i.target.checked,a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{notificationSettings:{...n.settings?.notificationSettings,bookingEmail:s}}})}),window.location.reload()}}),e("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Email"})]}),t("label",{className:"flex items-center gap-2 cursor-pointer",children:[e("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:n.settings?.notificationSettings?.bookingSms!==!1,onChange:async i=>{const s=i.target.checked,a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{notificationSettings:{...n.settings?.notificationSettings,bookingSms:s}}})}),window.location.reload()}}),e("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"SMS"})]})]})]}),t("div",{className:"flex items-center justify-between pb-4 border-b border-zinc-100 dark:border-zinc-800 mb-4",children:[t("div",{children:[e("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Waitlist Promotions"}),e("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Notify students when they come off the waitlist."})]}),t("div",{className:"flex gap-4",children:[t("label",{className:"flex items-center gap-2 cursor-pointer",children:[e("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:n.settings?.notificationSettings?.waitlistEmail!==!1,onChange:async i=>{const s=i.target.checked,a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{notificationSettings:{...n.settings?.notificationSettings,waitlistEmail:s}}})}),window.location.reload()}}),e("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Email"})]}),t("label",{className:"flex items-center gap-2 cursor-pointer",children:[e("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:n.settings?.notificationSettings?.waitlistSms!==!1,onChange:async i=>{const s=i.target.checked,a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{notificationSettings:{...n.settings?.notificationSettings,waitlistSms:s}}})}),window.location.reload()}}),e("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"SMS"})]})]})]}),t("div",{className:"flex items-center justify-between",children:[t("div",{children:[e("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Cancellation Notifications"}),e("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Notify students when you cancel a class."})]}),t("div",{className:"flex gap-4",children:[t("label",{className:"flex items-center gap-2 cursor-pointer",children:[e("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:n.settings?.notificationSettings?.cancellationEmail!==!1,onChange:async i=>{const s=i.target.checked,a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{notificationSettings:{...n.settings?.notificationSettings,cancellationEmail:s}}})}),window.location.reload()}}),e("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Email"})]}),t("label",{className:"flex items-center gap-2 cursor-pointer",children:[e("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:n.settings?.notificationSettings?.cancellationSms||!1,onChange:async i=>{const s=i.target.checked,a=await window.Clerk?.session?.getToken();await r("/tenant/settings",a,{method:"PATCH",headers:{"X-Tenant-Slug":n.slug},body:JSON.stringify({settings:{notificationSettings:{...n.settings?.notificationSettings,cancellationSms:s}}})}),window.location.reload()}}),e("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"SMS"})]})]})]})]})]})]}),e(A,{to:`/studio/${n.slug}/settings/billing`,className:"block bg-white border border-zinc-200 rounded-lg p-6 shadow-sm mb-8 hover:border-blue-300 transition-colors group",children:t("div",{className:"flex justify-between items-center",children:[t("div",{children:[e("h2",{className:"text-lg font-semibold group-hover:text-blue-600 transition-colors",children:"Billing & Subscription"}),e("p",{className:"text-sm text-zinc-500",children:"Manage your plan, payment methods, and view usage."})]}),e("div",{className:"bg-zinc-100 p-2 rounded-full group-hover:bg-blue-50 group-hover:text-blue-600 transition-colors",children:e(y,{className:"h-5 w-5"})})]})}),t("div",{className:"bg-white border border-zinc-200 rounded-lg p-6 shadow-sm",children:[t("div",{className:"flex justify-between items-center mb-6",children:[e("h2",{className:"text-lg font-semibold",children:"Locations"}),t("button",{onClick:()=>w(!0),className:"flex items-center gap-2 text-sm font-medium text-blue-600 hover:text-blue-800",children:[e(B,{className:"h-4 w-4"}),"Add Location"]})]}),O&&t("div",{className:"bg-zinc-50 border border-zinc-200 rounded p-4 mb-6",children:[e("h3",{className:"text-sm font-semibold mb-3",children:"New Location"}),t(D,{method:"post",onSubmit:()=>w(!1),children:[e("input",{type:"hidden",name:"intent",value:"create_location"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t("div",{children:[e("label",{className:"block text-xs text-zinc-500 mb-1",children:"Name"}),e("input",{name:"name",required:!0,placeholder:"e.g. Main Studio",className:"w-full text-sm border-zinc-300 rounded px-3 py-2"})]}),t("div",{children:[e("label",{className:"block text-xs text-zinc-500 mb-1",children:"Address (Optional)"}),e("input",{name:"address",placeholder:"123 Yoga St",className:"w-full text-sm border-zinc-300 rounded px-3 py-2"})]})]}),t("div",{className:"flex justify-end gap-2",children:[e("button",{type:"button",onClick:()=>w(!1),className:"px-3 py-1.5 text-xs border border-zinc-300 rounded hover:bg-zinc-100",children:"Cancel"}),e("button",{type:"submit",className:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save Location"})]})]})]}),e("div",{className:"space-y-3",children:m.length===0?e("div",{className:"text-center py-8 text-zinc-500 text-sm italic",children:"No locations added yet."}):m.map(i=>t("div",{className:"flex items-center justify-between p-4 border border-zinc-100 rounded hover:bg-zinc-50 transition-colors",children:[t("div",{className:"flex items-start gap-3",children:[e("div",{className:"mt-1 p-2 bg-blue-50 text-blue-600 rounded",children:e(R,{className:"h-4 w-4"})}),t("div",{children:[e("div",{className:"font-medium text-zinc-900",children:i.name}),i.address&&e("div",{className:"text-sm text-zinc-500",children:i.address})]})]}),e("button",{onClick:()=>F(i.id),className:"text-zinc-400 hover:text-red-600 p-2 rounded hover:bg-zinc-100",children:e(I,{className:"h-4 w-4"})})]},i.id))}),e(U,{isOpen:!!N,onClose:()=>z(null),onConfirm:H,title:"Delete Location",message:"Are you sure you want to delete this location? This action cannot be undone.",confirmText:"Delete",isDestructive:!0}),e(A,{to:`/studio/${n.slug}/settings/domain`,className:"block bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm mb-8 hover:border-purple-300 transition-colors group",children:t("div",{className:"flex justify-between items-center",children:[t("div",{children:[e("h2",{className:"text-lg font-semibold dark:text-zinc-100 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:"Custom Domain"}),t("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:["Connect your own website domain (e.g. studio.com). ",e("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 text-[10px] px-1.5 py-0.5 rounded ml-2 uppercase font-bold tracking-wider",children:"Scale"})]})]}),e("div",{className:"bg-zinc-100 dark:bg-zinc-800 p-2 rounded-full group-hover:bg-purple-50 dark:group-hover:bg-purple-900/30 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:e(P,{className:"h-5 w-5"})})]})}),M&&e("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:t("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 shadow-2xl",children:[e("h2",{className:"text-xl font-bold mb-2",children:"Order BBPOS WisePOS E"}),e("p",{className:"text-sm text-zinc-500 mb-6",children:"Connect your Stripe account to the physical world with a pre-certified card reader. $249/unit."}),e("div",{className:"bg-zinc-50 p-4 rounded-xl mb-6 flex justify-center",children:e(y,{size:48,className:"text-zinc-300"})}),t("div",{className:"flex gap-4",children:[e("button",{onClick:()=>C(!1),className:"flex-1 py-3 font-bold text-zinc-500 hover:bg-zinc-100 rounded-xl",children:"Cancel"}),t("button",{onClick:j,className:"flex-1 py-3 bg-blue-600 text-white font-bold rounded-xl shadow-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[e(K,{size:16})," Place Order"]})]})]})})]})]})}function v({value:m,onChange:p,min:n=0,max:S=1e3,step:u=1,suffix:x=""}){const[l,d]=o(m);_(()=>{d(m)},[m]);const h=g=>{const b=Math.max(n,Math.min(S,g));d(b),p(b)};return t("div",{className:"flex items-center gap-3",children:[e("button",{type:"button",onClick:()=>h(l-u),className:"w-8 h-8 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center hover:bg-blue-100 transition-colors border border-blue-200",children:e("span",{className:"text-lg font-bold leading-none mb-0.5",children:"−"})}),t("div",{className:"min-w-[80px] text-center font-mono font-medium text-lg text-zinc-700 dark:text-zinc-200",children:[l," ",e("span",{className:"text-xs text-zinc-400 font-sans",children:x})]}),e("button",{type:"button",onClick:()=>h(l+u),className:"w-8 h-8 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center hover:bg-blue-100 transition-colors border border-blue-200",children:e("span",{className:"text-lg font-bold leading-none mb-0.5",children:"+"})})]})}export{we as default};
