import{jsxs as t,jsx as e,Fragment as d}from"react/jsx-runtime";import{useOutletContext as k,useLoaderData as N,Link as c}from"react-router";import{useUser as f}from"@clerk/react-router";import{Activity as u,Users as w,TrendingUp as y,Calendar as S,DollarSign as p,FileSignature as C,Ticket as A,RotateCcw as P,Award as g,Target as j,Flame as h,ArrowRight as D}from"lucide-react";function O(){const{tenant:o,roles:m,me:s,isStudentView:x}=k(),{stats:i,upcomingRenewals:a}=N(),{user:z}=f(),b=m.includes("owner"),v=z?.firstName||s?.firstName||"Studio Admin";return t("div",{className:"max-w-6xl pb-10 p-8 animate-in fade-in duration-500",children:[t("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[t("div",{children:[t("h1",{className:"text-3xl font-extrabold text-zinc-900 dark:text-zinc-100 tracking-tight",children:["Welcome back, ",v,(()=>{const r=s?.user?.isPlatformAdmin;let n="";return r?n="Admin":s?.roles?.includes("owner")?n="Owner":s?.roles?.includes("admin")?n="Manager":s?.roles?.includes("instructor")&&(n="Instructor"),x&&n?` (${n})`:""})(),"!"]}),t("p",{className:"text-zinc-500 dark:text-zinc-400 mt-1",children:["Here's what's happening at ",o.name," today."]})]}),t("div",{className:"flex items-center gap-2 text-sm font-medium text-emerald-600 bg-emerald-50 dark:bg-emerald-900/20 px-3 py-1.5 rounded-full",children:[e(u,{size:16}),e("span",{children:"System Online"})]})]}),b&&t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[t("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow group",children:[t("div",{className:"flex justify-between items-start mb-4",children:[e("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-xl group-hover:scale-110 transition-transform",children:e(w,{size:24})}),e("span",{className:"text-[10px] font-bold uppercase tracking-wider text-zinc-400 bg-zinc-50 dark:bg-zinc-800 px-2 py-0.5 rounded",children:"Students"})]}),e("div",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100",children:i.activeStudents}),t("div",{className:"text-xs text-zinc-500 mt-1 flex items-center gap-1",children:[e(y,{size:12,className:"text-emerald-500"}),e("span",{children:"Active this month"})]})]}),t("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow group",children:[t("div",{className:"flex justify-between items-start mb-4",children:[e("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 rounded-xl group-hover:scale-110 transition-transform",children:e(S,{size:24})}),e("span",{className:"text-[10px] font-bold uppercase tracking-wider text-zinc-400 bg-zinc-50 dark:bg-zinc-800 px-2 py-0.5 rounded",children:"Bookings"})]}),e("div",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100",children:i.upcomingBookings}),e("div",{className:"text-xs text-zinc-500 mt-1",children:"Confirmed upcoming sessions"})]}),t("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow group border-b-4 border-b-emerald-500 relative overflow-hidden",children:[t("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e("div",{className:"p-3 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 rounded-xl group-hover:scale-110 transition-transform",children:e(p,{size:24})}),e("span",{className:"text-[10px] font-bold uppercase tracking-wider text-zinc-400 bg-zinc-50 dark:bg-zinc-800 px-2 py-0.5 rounded",children:"Gross Sales"})]}),t("div",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100 relative z-10",children:["$",(i.monthlyRevenueCents/100).toLocaleString(void 0,{minimumFractionDigits:2})]}),e("div",{className:"text-xs text-zinc-500 mt-1 italic relative z-10",children:"Current billing period"}),e("div",{className:"absolute top-4 right-4 text-emerald-100/20 z-0",children:e(p,{size:100})})]}),t("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow group",children:[t("div",{className:"flex justify-between items-start mb-4",children:[e("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 rounded-xl group-hover:scale-110 transition-transform",children:e(C,{size:24})}),e("span",{className:"text-[10px] font-bold uppercase tracking-wider text-zinc-400 bg-zinc-50 dark:bg-zinc-800 px-2 py-0.5 rounded",children:"Compliance"})]}),t("div",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100",children:[i.waiverCompliance?Math.round(i.waiverCompliance.signed/(i.waiverCompliance.total||1)*100):0,"%"]}),e("div",{className:"text-xs text-zinc-500 mt-1 flex items-center gap-1",children:i.waiverCompliance?.activeWaiver?e("span",{className:"text-emerald-600",children:"Active Waiver Enforcement"}):e("span",{className:"text-amber-600",children:"No Active Waiver"})})]}),t("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow group",children:[t("div",{className:"flex justify-between items-start mb-4",children:[e("div",{className:"p-3 bg-pink-50 dark:bg-pink-900/20 text-pink-600 dark:text-pink-400 rounded-xl group-hover:scale-110 transition-transform",children:e(A,{size:24})}),e("span",{className:"text-[10px] font-bold uppercase tracking-wider text-zinc-400 bg-zinc-50 dark:bg-zinc-800 px-2 py-0.5 rounded",children:"GC Liability"})]}),t("div",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100",children:["$",((i.giftCardLiability||0)/100).toLocaleString(void 0,{minimumFractionDigits:2})]}),e("div",{className:"text-xs text-zinc-500 mt-1",children:"Outstanding Store Credit"})]}),t("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow group",children:[t("div",{className:"flex justify-between items-start mb-4",children:[e("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400 rounded-xl group-hover:scale-110 transition-transform",children:e(P,{size:24})}),e("span",{className:"text-[10px] font-bold uppercase tracking-wider text-zinc-400 bg-zinc-50 dark:bg-zinc-800 px-2 py-0.5 rounded",children:"Renewals"})]}),e("div",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100",children:a?.count||0}),e("div",{className:"text-xs text-zinc-500 mt-1",children:"Due in the next 14 days"}),a?.renewals?.length>0&&e("div",{className:"mt-3 pt-3 border-t border-zinc-100 dark:border-zinc-800 space-y-1.5",children:a.renewals.slice(0,3).map(r=>t("div",{className:"flex items-center justify-between text-xs",children:[e("span",{className:"text-zinc-600 dark:text-zinc-400 truncate max-w-[120px]",children:r.memberName}),t("span",{className:"text-amber-600 dark:text-amber-400 font-medium",children:[r.daysUntilRenewal,"d"]})]},r.id))})]})]}),t("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e("div",{className:"lg:col-span-2 bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200 dark:border-zinc-800 rounded-2xl p-8",children:x?t(d,{children:[t("h3",{className:"text-lg font-bold mb-4 text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[e(g,{className:"text-yellow-500"}),"Your Achievements"]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(a?.myProgress||[]).map(r=>t("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 p-4 rounded-xl flex items-center gap-4",children:[e("div",{className:"w-12 h-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center text-yellow-600 dark:text-yellow-400 shrink-0",children:r.userProgress.status==="completed"?e(g,{size:24}):e(j,{size:24})}),t("div",{className:"flex-1 min-w-0",children:[t("div",{className:"flex justify-between items-center mb-1",children:[e("h4",{className:"font-bold text-sm text-zinc-900 dark:text-zinc-100 truncate",children:r.title}),r.userProgress.status==="completed"&&e("span",{className:"text-[10px] font-bold bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full",children:"EARNED"})]}),e("div",{className:"w-full bg-zinc-100 dark:bg-zinc-800 rounded-full h-2 mb-1",children:e("div",{className:"bg-yellow-500 h-2 rounded-full transition-all",style:{width:`${Math.min(100,r.userProgress.progress/r.targetValue*100)}%`}})}),t("div",{className:"text-xs text-zinc-500 flex justify-between",children:[r.type==="streak"?t("span",{className:"flex items-center gap-1 font-medium text-amber-600",children:[e(h,{size:12,className:r.userProgress.status==="completed"?"":"animate-pulse"}),r.userProgress.progress," / ",r.targetValue," ",r.period||"streak","s"]}):t("span",{children:[r.userProgress.progress," / ",r.targetValue," ",r.type==="minutes"?"mins":"classes"]}),t("span",{children:[Math.round(r.userProgress.progress/r.targetValue*100),"%"]})]})]})]},r.id)),(!a?.myProgress||a.myProgress.length===0)&&e("div",{className:"col-span-2 text-center py-4 text-zinc-500 dark:text-zinc-400 text-sm italic",children:"Join active challenges to earn rewards!"})]})]}):t(d,{children:[e("h2",{className:"text-lg font-bold mb-1 text-zinc-900 dark:text-zinc-100",children:"Getting Started"}),e("p",{className:"mb-6 text-sm text-zinc-500 dark:text-zinc-400",children:"Your studio is live! Use these shortcuts to manage your operations."}),t("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[b&&e(l,{to:"branding",title:"Customize Branding",description:"Update your colors, logo and style."}),e(l,{to:"schedule",title:"Manage Schedule",description:"Add classes and view bookings."}),b&&e(l,{to:"memberships",title:"Setup Memberships",description:"Create recurring revenue plans."}),e(l,{to:"students",title:"Add Students",description:"Grow your community today."})]})]})}),e("div",{className:"bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-2xl p-6 shadow-sm",children:x?t(d,{children:[t("h3",{className:"font-bold text-zinc-900 dark:text-zinc-100 mb-4 flex items-center gap-2",children:[e(u,{size:18,className:"text-blue-500"}),"Announcements & Updates"]}),t("div",{className:"space-y-4",children:[t("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 rounded-lg",children:[t("div",{className:"flex justify-between items-start mb-1",children:[e("span",{className:"text-[10px] font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider",children:"New"}),e("span",{className:"text-[10px] text-zinc-400",children:"Today"})]}),e("p",{className:"text-sm text-zinc-700 dark:text-zinc-300 font-medium",children:"Summer schedule is live! Check out our new morning flow classes."})]}),t("h3",{className:"font-bold text-zinc-900 dark:text-zinc-100 mt-6 mb-2 flex items-center gap-2 text-sm",children:[e(h,{size:16,className:"text-orange-500"}),"Quick Discounts"]}),t("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-100 dark:border-orange-900 rounded-lg",children:[t("div",{className:"flex justify-between items-center mb-1",children:[e("span",{className:"text-xs font-bold text-orange-700 dark:text-orange-400",children:"3 Spots Left!"}),e("span",{className:"text-[10px] bg-orange-200 dark:bg-orange-800 text-orange-800 dark:text-orange-200 px-1.5 py-0.5 rounded",children:"20% OFF"})]}),e("p",{className:"text-sm font-medium text-zinc-800 dark:text-zinc-200",children:"Power Yoga @ 6:00 PM"}),e(c,{to:"classes",className:"text-xs text-blue-600 hover:underline mt-1 block",children:"Book Now â†’"})]})]})]}):t(d,{children:[t("h3",{className:"font-bold text-zinc-900 dark:text-zinc-100 mb-4 flex items-center gap-2",children:[e(u,{size:18,className:"text-blue-500"}),"Quick Tips"]}),t("div",{className:"space-y-4",children:[t("div",{className:"p-3 bg-zinc-50 dark:bg-zinc-900 rounded-lg text-xs leading-relaxed text-zinc-600 dark:text-zinc-400",children:[e("strong",{children:"Did you know?"})," You can now use the ",e(c,{to:"pos",className:"text-blue-600 font-bold hover:underline",children:"POS System"})," to sell drinks and gear directly at your front desk."]}),t("div",{className:"p-3 bg-zinc-50 dark:bg-zinc-900 rounded-lg text-xs leading-relaxed text-zinc-600 dark:text-zinc-400",children:["Enable ",e(c,{to:"settings",className:"text-blue-600 font-bold hover:underline",children:"SMS Notifications"})," to reduce no-shows by up to 30%."]})]})]})})]})]})}function l({to:o,title:m,description:s}){return t(c,{to:o,className:"group flex items-center gap-4 p-4 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl hover:border-blue-500 dark:hover:border-blue-500 transition-all hover:translate-y-[-2px] shadow-sm",children:[t("div",{className:"flex-1 min-w-0",children:[e("div",{className:"font-bold text-zinc-900 dark:text-zinc-100 text-sm group-hover:text-blue-600 transition-colors",children:m}),e("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 truncate",children:s})]}),e(D,{size:16,className:"text-zinc-300 group-hover:text-blue-500 transition-colors"})]})}export{O as default};
