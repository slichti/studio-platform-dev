import{w as O,u as $}from"./chunk-JZWAC4HX-Cg_gv2PJ.js";import{j as t}from"./vendor-puck-D_CB0wXL.js";import{a as h}from"./api-ChCisjdG.js";import{a as o}from"./vendor-sentry-DugYw-Ne.js";import{t as i}from"./index-CNiSO0Vl.js";import{C as U}from"./Dialogs-3wFUFLtR.js";import{P as Q}from"./plus-7j3qtkRM.js";import{S as R}from"./save-BsFOcTUD.js";import{C as G}from"./circle-question-mark-DfoXBOob.js";import{G as L}from"./grip-vertical-D4hCvaEk.js";import{C as _}from"./chevron-down-vKXUNxJK.js";import{C as H}from"./chevron-up-BmbKN15i.js";import{P as J}from"./pen-DxlJW1R3.js";import{T as M}from"./trash-2-vh4T49GQ.js";import"./Modal-D1QwNVP6.js";import"./createLucideIcon-BOpDDQ2B.js";const b=typeof window<"u"?window.ENV?.API_URL:"",y=[{id:"features",label:"Features"},{id:"pricing",label:"Pricing"},{id:"support",label:"Support"},{id:"getting_started",label:"Getting Started"}],ce=O(function(){const{faqs:S,token:d}=$(),[n,m]=o.useState(S),[a,z]=o.useState(null),[v,f]=o.useState(!1),[u,j]=o.useState(null),[N,x]=o.useState(!1),[g,A]=o.useState("all"),[C,k]=o.useState(null),[r,l]=o.useState({category:"features",question:"",answer:"",isActive:!0}),p=()=>{l({category:"features",question:"",answer:"",isActive:!0}),z(null),f(!1)},E=async()=>{if(!r.question.trim()||!r.answer.trim()){i.error("Question and answer are required");return}x(!0);try{const e=await h("/faqs/admin",d,{method:"POST",body:JSON.stringify({...r,sortOrder:n.length})},b);e.id?(m([...n,{...r,id:e.id,sortOrder:n.length,isActive:!0}]),i.success("FAQ created!"),p()):i.error(e.error||"Failed to create FAQ")}catch(e){i.error("Error: "+e.message)}finally{x(!1)}},P=async()=>{if(!a||!r.question.trim()||!r.answer.trim()){i.error("Question and answer are required");return}x(!0);try{const e=await h(`/faqs/admin/${a}`,d,{method:"PUT",body:JSON.stringify(r)},b);e.success?(m(n.map(s=>s.id===a?{...s,...r}:s)),i.success("FAQ updated!"),p()):i.error(e.error||"Failed to update FAQ")}catch(e){i.error("Error: "+e.message)}finally{x(!1)}},D=async()=>{if(u){try{const e=await h(`/faqs/admin/${u.id}`,d,{method:"DELETE"},b);e.success?(m(n.filter(s=>s.id!==u.id)),i.success("FAQ deleted!")):i.error(e.error||"Failed to delete FAQ")}catch(e){i.error("Error: "+e.message)}j(null)}},T=async e=>{try{(await h(`/faqs/admin/${e.id}`,d,{method:"PUT",body:JSON.stringify({isActive:!e.isActive})},b)).success&&(m(n.map(c=>c.id===e.id?{...c,isActive:!c.isActive}:c)),i.success(e.isActive?"FAQ hidden":"FAQ visible"))}catch(s){i.error("Error: "+s.message)}},I=e=>{l({category:e.category,question:e.question,answer:e.answer,isActive:e.isActive}),z(e.id),f(!1)},F=()=>{p(),f(!0)},w=g==="all"?n:n.filter(e=>e.category===g);return t.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"FAQ Management"}),t.jsx("p",{className:"text-zinc-500 text-sm",children:"Manage frequently asked questions for the features page"})]}),!v&&!a&&t.jsxs("button",{onClick:F,className:"inline-flex items-center gap-2 bg-zinc-900 text-white px-4 py-2 rounded-lg hover:bg-zinc-800 transition",children:[t.jsx(Q,{size:16}),"Add FAQ"]})]}),t.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[t.jsxs("button",{onClick:()=>A("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition whitespace-nowrap ${g==="all"?"bg-zinc-900 text-white":"bg-zinc-100 text-zinc-600 hover:bg-zinc-200"}`,children:["All (",n.length,")"]}),y.map(e=>{const s=n.filter(c=>c.category===e.id).length;return t.jsxs("button",{onClick:()=>A(e.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition whitespace-nowrap ${g===e.id?"bg-zinc-900 text-white":"bg-zinc-100 text-zinc-600 hover:bg-zinc-200"}`,children:[e.label," (",s,")"]},e.id)})]}),(v||a)&&t.jsxs("div",{className:"bg-white border border-zinc-200 rounded-xl p-6 mb-6 shadow-sm",children:[t.jsx("h3",{className:"font-semibold text-lg mb-4",children:a?"Edit FAQ":"Create New FAQ"}),t.jsxs("div",{className:"grid gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Category *"}),t.jsx("select",{value:r.category,onChange:e=>l({...r,category:e.target.value}),className:"w-full px-3 py-2 border border-zinc-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-zinc-900",children:y.map(e=>t.jsx("option",{value:e.id,children:e.label},e.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Question *"}),t.jsx("input",{type:"text",value:r.question,onChange:e=>l({...r,question:e.target.value}),placeholder:"e.g. How do I get started?",className:"w-full px-3 py-2 border border-zinc-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-zinc-900"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Answer *"}),t.jsx("textarea",{value:r.answer,onChange:e=>l({...r,answer:e.target.value}),placeholder:"Provide a clear, helpful answer...",rows:4,className:"w-full px-3 py-2 border border-zinc-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-zinc-900 resize-none"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:r.isActive,onChange:e=>l({...r,isActive:e.target.checked}),className:"w-4 h-4 rounded border-zinc-300"}),t.jsx("label",{htmlFor:"isActive",className:"text-sm text-zinc-600",children:"Visible on public page"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-zinc-100",children:[t.jsx("button",{onClick:p,className:"px-4 py-2 text-zinc-600 hover:bg-zinc-100 rounded-lg transition",children:"Cancel"}),t.jsx("button",{onClick:a?P:E,disabled:N,className:"inline-flex items-center gap-2 bg-zinc-900 text-white px-4 py-2 rounded-lg hover:bg-zinc-800 transition disabled:opacity-50",children:N?t.jsx("span",{className:"animate-pulse",children:"Saving..."}):t.jsxs(t.Fragment,{children:[t.jsx(R,{size:16}),a?"Update FAQ":"Create FAQ"]})})]})]})]}),w.length===0&&!v&&t.jsxs("div",{className:"bg-zinc-50 border-2 border-dashed border-zinc-200 rounded-xl p-12 text-center",children:[t.jsx(G,{className:"h-16 w-16 text-zinc-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-zinc-700 mb-2",children:"No FAQs yet"}),t.jsx("p",{className:"text-zinc-500 mb-6",children:"Create frequently asked questions to help users understand your platform."}),t.jsxs("button",{onClick:F,className:"inline-flex items-center gap-2 bg-zinc-900 text-white px-5 py-2.5 rounded-lg hover:bg-zinc-800 transition",children:[t.jsx(Q,{size:18}),"Create Your First FAQ"]})]}),w.length>0&&t.jsx("div",{className:"space-y-3",children:w.map(e=>t.jsx("div",{className:`bg-white border rounded-xl overflow-hidden transition-shadow ${e.isActive?"border-zinc-200":"border-orange-200 bg-orange-50/50"}`,children:t.jsxs("div",{className:"flex items-start gap-3 p-4 cursor-pointer hover:bg-zinc-50",onClick:()=>k(C===e.id?null:e.id),children:[t.jsx(L,{className:"h-5 w-5 text-zinc-300 mt-0.5 cursor-grab"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${e.category==="features"?"bg-blue-100 text-blue-700":e.category==="pricing"?"bg-green-100 text-green-700":e.category==="support"?"bg-purple-100 text-purple-700":"bg-orange-100 text-orange-700"}`,children:y.find(s=>s.id===e.category)?.label}),!e.isActive&&t.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-orange-100 text-orange-700",children:"Hidden"})]}),t.jsx("h4",{className:"font-medium text-zinc-900",children:e.question}),C===e.id&&t.jsx("p",{className:"text-zinc-600 text-sm mt-2 whitespace-pre-wrap",children:e.answer})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:s=>{s.stopPropagation(),T(e)},className:`p-2 rounded-lg transition ${e.isActive?"text-zinc-400 hover:text-orange-600 hover:bg-orange-50":"text-orange-600 hover:text-green-600 hover:bg-green-50"}`,title:e.isActive?"Hide":"Show",children:e.isActive?t.jsx(_,{size:18}):t.jsx(H,{size:18})}),t.jsx("button",{onClick:s=>{s.stopPropagation(),I(e)},className:"p-2 text-zinc-400 hover:text-zinc-600 hover:bg-zinc-100 rounded-lg transition",title:"Edit",children:t.jsx(J,{size:18})}),t.jsx("button",{onClick:s=>{s.stopPropagation(),j(e)},className:"p-2 text-zinc-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete",children:t.jsx(M,{size:18})})]})]})},e.id))}),t.jsx(U,{isOpen:!!u,onClose:()=>j(null),onConfirm:D,title:"Delete FAQ",message:"Are you sure you want to delete this FAQ? This action cannot be undone.",confirmText:"Delete",isDestructive:!0})]})});export{ce as default};
