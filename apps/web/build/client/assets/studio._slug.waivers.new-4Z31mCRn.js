import{w as h,h as g,c as j,L as c,F as w}from"./chunk-JMJ3UQ3L-DfF4BM7g.js";import{j as e}from"./vendor-puck-aUaaDwmz.js";import{a as v}from"./vendor-livekit-D3VpklN2.js";import{t as d}from"./index-BFgzoDOP.js";import{S as m}from"./save-BvwiY0_u.js";import{A as z}from"./arrow-left-D9bkfm0g.js";import{u as N}from"./chunk-OT5FTIRN-BoMpxN7p.js";import"./createLucideIcon-CcD9UNCP.js";import"./index-DYRzKbRc.js";import"./index-7UaQKl4K.js";const W=h(function(){const t=g(),a=j().state==="submitting";if(t?.success)return e.jsxs("div",{className:"max-w-2xl mx-auto py-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(m,{className:"w-8 h-8"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Template Created!"}),e.jsx("p",{className:"text-zinc-600 mb-8",children:"Your waiver template has been successfully saved."}),e.jsx("div",{className:"flex justify-center gap-4",children:e.jsx(c,{to:"../waivers",className:"px-4 py-2 bg-zinc-900 text-white rounded-md hover:bg-zinc-800 transition",children:"Back to Waivers"})})]});const[x,i]=v.useState(!1),{getToken:u}=N();return e.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(c,{to:"../waivers",className:"flex items-center text-sm text-zinc-500 hover:text-zinc-900 mb-4 transition-colors",children:[e.jsx(z,{className:"w-4 h-4 mr-1"}),"Back to Waivers"]}),e.jsx("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Create Waiver Template"}),e.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:"Design a liability waiver for your members to sign."})]}),e.jsx("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm",children:e.jsxs(w,{method:"post",className:"space-y-6",children:[t&&"error"in t&&t.error&&e.jsxs("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded border border-red-200",children:["Error saving: ",t.error]}),"                ",e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Document Title"}),e.jsx("input",{type:"text",name:"title",required:!0,placeholder:"e.g. Activity Liability Waiver 2024",className:"w-full px-3 py-2 border border-zinc-300 dark:border-zinc-700 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:["Legal Content",e.jsx("span",{className:"ml-2 text-xs font-normal text-zinc-500",children:"(You can paste plain text or HTML here)"})]}),e.jsx("textarea",{name:"content",required:!0,rows:15,placeholder:"I, the undersigned, agree to...",className:"w-full px-3 py-2 border border-zinc-300 dark:border-zinc-700 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Create from PDF (Optional)"}),e.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:"Upload a PDF to link it or extract text (extraction not yet supported, just linking)."}),e.jsx("input",{type:"file",accept:".pdf",onChange:async p=>{const n=p.target.files?.[0];if(n){i(!0);try{const s=await u(),b=window.location.pathname.split("/")[2],o=new FormData;o.append("file",n);const r=await fetch("https://studio-platform-api.slichti.workers.dev/uploads/pdf",{method:"POST",headers:{Authorization:`Bearer ${s}`,"X-Tenant-Slug":b},body:o});if(!r.ok)throw new Error(await r.text());const f=await r.json(),l=document.getElementById("pdf-url-input");l&&(l.value=f.url),d.success("PDF Uploaded successfully!")}catch(s){d.error("Upload failed: "+s.message)}finally{i(!1)}}},className:"block w-full text-sm text-zinc-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),e.jsx("input",{type:"hidden",name:"pdfUrl",id:"pdf-url-input"})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-zinc-100 dark:border-zinc-800",children:e.jsxs("button",{type:"submit",disabled:a||x,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[e.jsx(m,{className:"w-4 h-4"}),a?"Saving...":"Save Template"]})})]})})]})});export{W as default};
