import{w as N,v as w,C as y,r as i}from"./chunk-JMJ3UQ3L-DmAaMJDT.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{a as m}from"./api-piI5qlNr.js";import{T as k}from"./ticket-BzV2cjp6.js";import{P as v}from"./plus-Oa9IOj9y.js";import{S as C}from"./search-BrLvoFqk.js";import{E as S}from"./ellipsis-DLyPy4wR.js";import{L as E}from"./loader-circle-COV7T8XM.js";import"./createLucideIcon-DBCK0g1u.js";const A=N(function(){const{giftCards:u,token:d}=w(),{slug:o}=y(),[n,h]=i.useState(u),[r,b]=i.useState(""),[g,l]=i.useState(!1),[x,p]=i.useState(!1),[a,c]=i.useState({amount:"",recipientEmail:"",notes:""}),f=async s=>{s.preventDefault(),p(!0);try{const t=await m("/gift-cards/issue",d,{method:"POST",headers:{"X-Tenant-Slug":o},body:JSON.stringify({amount:parseFloat(a.amount)*100,recipientEmail:a.recipientEmail,notes:a.notes})});if(t.error)throw new Error(t.error);l(!1),c({amount:"",recipientEmail:"",notes:""});const j=await m("/gift-cards",d,{headers:{"X-Tenant-Slug":o}});h(j||[]),alert(`Gift Card issued: ${t.code}`)}catch(t){alert(t.message)}finally{p(!1)}},z=n.filter(s=>s.code.toLowerCase().includes(r.toLowerCase())||s.recipientEmail?.toLowerCase().includes(r.toLowerCase()));return e.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-extrabold text-zinc-900 dark:text-zinc-100 flex items-center gap-3",children:[e.jsx(k,{className:"text-blue-600"})," Gift Cards & Credits"]}),e.jsx("p",{className:"text-sm text-zinc-500 mt-1",children:"Manage store credit, issue gift cards, and track redemptions."})]}),e.jsxs("button",{onClick:()=>l(!0),className:"bg-zinc-900 dark:bg-zinc-100 dark:text-zinc-900 text-white px-6 py-3 rounded-2xl font-bold flex items-center gap-2 shadow-lg hover:translate-y-[-2px] transition-all",children:[e.jsx(v,{size:20})," Issue New Card"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-3xl border border-zinc-100 dark:border-zinc-800 shadow-sm",children:[e.jsx("p",{className:"text-xs font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Active Balance"}),e.jsxs("h2",{className:"text-2xl font-black text-zinc-900 dark:text-zinc-100",children:["$",(n.reduce((s,t)=>s+(t.status==="active"?t.currentBalance:0),0)/100).toLocaleString()]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-3xl border border-zinc-100 dark:border-zinc-800 shadow-sm",children:[e.jsx("p",{className:"text-xs font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Total Issued"}),e.jsxs("h2",{className:"text-2xl font-black text-zinc-900 dark:text-zinc-100",children:["$",(n.reduce((s,t)=>s+t.initialValue,0)/100).toLocaleString()]})]})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-zinc-400"}),e.jsx("input",{type:"text",placeholder:"Find by code or email...",value:r,onChange:s=>b(s.target.value),className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800 rounded-2xl text-sm focus:ring-2 focus:ring-blue-500 outline-none shadow-sm"})]}),e.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-3xl border border-zinc-100 dark:border-zinc-800 shadow-sm overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-zinc-50 dark:bg-zinc-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold text-zinc-500 uppercase tracking-widest",children:"Gift Card"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold text-zinc-500 uppercase tracking-widest",children:"Balance"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold text-zinc-500 uppercase tracking-widest",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold text-zinc-500 uppercase tracking-widest",children:"Issued"}),e.jsx("th",{className:"px-6 py-4"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-50 dark:divide-zinc-800",children:z.map(s=>e.jsxs("tr",{className:"hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-mono font-bold text-zinc-900 dark:text-zinc-100",children:s.code}),e.jsx("span",{className:"text-xs text-zinc-500",children:s.recipientEmail||"No recipient"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"font-bold text-zinc-900 dark:text-zinc-100",children:["$",(s.currentBalance/100).toFixed(2)]}),e.jsxs("span",{className:"text-[10px] text-zinc-400 uppercase font-bold",children:["of $",(s.initialValue/100).toFixed(2)]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-[10px] font-bold px-2.5 py-1 rounded-full uppercase tracking-tighter ${s.status==="active"?"bg-emerald-100 text-emerald-700":s.status==="exhausted"?"bg-zinc-200 text-zinc-600":"bg-red-100 text-red-700"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 text-xs text-zinc-500",children:new Date(s.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{className:"p-2 hover:bg-zinc-200 dark:hover:bg-zinc-700 rounded-full transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(S,{size:16})})})]},s.id))})]})})]})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-3xl shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"p-8 border-b border-zinc-100 dark:border-zinc-800",children:[e.jsx("h2",{className:"text-2xl font-black",children:"Issue Gift Card"}),e.jsx("p",{className:"text-sm text-zinc-500",children:"This will generate a unique code for store credit."})]}),e.jsxs("form",{onSubmit:f,className:"p-8 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-zinc-500 uppercase tracking-widest pl-1",children:"Amount ($)"}),e.jsx("input",{type:"number",step:"0.01",placeholder:"50.00",required:!0,value:a.amount,onChange:s=>c({...a,amount:s.target.value}),className:"w-full px-4 py-4 bg-zinc-100 dark:bg-zinc-800 border-none rounded-2xl text-lg font-bold outline-none ring-2 ring-transparent focus:ring-blue-500 transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-zinc-500 uppercase tracking-widest pl-1",children:"Recipient Email (Optional)"}),e.jsx("input",{type:"email",placeholder:"friend@example.com",value:a.recipientEmail,onChange:s=>c({...a,recipientEmail:s.target.value}),className:"w-full px-4 py-4 bg-zinc-100 dark:bg-zinc-800 border-none rounded-2xl text-sm outline-none ring-2 ring-transparent focus:ring-blue-500 transition-all"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"py-4 font-bold text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-2xl transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x,className:"py-4 bg-zinc-900 dark:bg-zinc-100 dark:text-zinc-900 text-white font-bold rounded-2xl shadow-lg flex items-center justify-center gap-2 hover:translate-y-[-2px] active:translate-y-0 transition-all",children:x?e.jsx(E,{className:"animate-spin",size:20}):"Issue Credit"})]})]})]})})]})});export{A as default};
