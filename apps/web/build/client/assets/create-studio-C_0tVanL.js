import{w as y,p as w,A as S,B as z,r as t}from"./chunk-JMJ3UQ3L-DmAaMJDT.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{a as C}from"./api-piI5qlNr.js";import{a as k,R as $,S as P}from"./chunk-VMBS36YX-CVbuS9EW.js";import"./index-3zd-dFZh.js";import{u as T}from"./index-B-TQESlZ.js";import"./chunk-OT5FTIRN-DtMOiK0s.js";import"./chunk-6WD75OPE-B3xNZhDb.js";import"./index-DR8BQXRl.js";const G=y(function(){const{user:E,isLoaded:j}=T(),p=w();S();const[d]=z(),[r,m]=t.useState("monthly"),[i,v]=t.useState(""),[u,x]=t.useState(""),[n,a]=t.useState("basic"),[b,c]=t.useState(null),[h,f]=t.useState(!1);t.useEffect(()=>{const s=d.get("tier");s&&["basic","growth","scale"].includes(s)&&a(s);const l=d.get("interval");l&&["monthly","annual"].includes(l)&&m(l)},[d]),t.useEffect(()=>{if(!i)return;const s=i.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-");x(s)},[i]);const N=async s=>{s.preventDefault(),f(!0),c(null);try{const l=await window.Clerk?.session?.getToken(),o=await C("/onboarding/studio",l,{method:"POST",body:JSON.stringify({name:i,slug:u,tier:n,interval:r})});o.tenant?p(`/studio/${o.tenant.slug}/dashboard`):o.error&&c(o.error)}catch(l){c(l.message||"Failed to create studio.")}finally{f(!1)}};if(!j)return e.jsx("div",{className:"p-10 text-center",children:"Loading..."});const g=r==="annual"?"Billed annually":"Billed monthly";return e.jsxs("div",{className:"min-h-screen bg-zinc-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsx(k,{children:e.jsx($,{})}),e.jsxs(P,{children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-zinc-900",children:"Create your Studio"}),e.jsx("p",{className:"mt-2 text-center text-sm text-zinc-600",children:"Start managing your classes and students today."})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[b&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded mb-4 text-sm",children:b}),e.jsxs("form",{className:"space-y-6",onSubmit:N,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-zinc-700",children:"Studio Name"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"name",name:"name",type:"text",required:!0,className:"appearance-none block w-full px-3 py-2 border border-zinc-300 rounded-md shadow-sm placeholder-zinc-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:i,onChange:s=>v(s.target.value),placeholder:"e.g. Zen Yoga"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"slug",className:"block text-sm font-medium text-zinc-700",children:"Studio URL (Slug)"}),e.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[e.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-zinc-300 bg-zinc-50 text-zinc-500 sm:text-sm",children:"studio.platform.com/"}),e.jsx("input",{id:"slug",name:"slug",type:"text",required:!0,className:"flex-1 min-w-0 block w-full px-3 py-2 rounded-none rounded-r-md border border-zinc-300 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:u,onChange:s=>x(s.target.value)})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700",children:"Select Plan"}),e.jsxs("button",{type:"button",onClick:()=>m(s=>s==="monthly"?"annual":"monthly"),className:"text-xs text-blue-600 hover:text-blue-500 font-medium",children:["Switch to ",r==="monthly"?"Annual":"Monthly"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{onClick:()=>a("basic"),className:`cursor-pointer border rounded-lg p-4 flex items-center justify-between transition-all ${n==="basic"?"border-blue-500 ring-1 ring-blue-500 bg-blue-50":"border-zinc-200 hover:border-blue-300"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-zinc-900",children:"Launch (Free)"}),e.jsx("div",{className:"text-sm text-zinc-500",children:"Up to 5 Instructors, 1 location."})]}),e.jsx("div",{className:"h-4 w-4 rounded-full border border-zinc-300 flex items-center justify-center",children:n==="basic"&&e.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full"})})]}),e.jsxs("div",{onClick:()=>a("growth"),className:`cursor-pointer border rounded-lg p-4 flex items-center justify-between transition-all ${n==="growth"?"border-blue-500 ring-1 ring-blue-500 bg-blue-50":"border-zinc-200 hover:border-blue-300"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-zinc-900",children:["Growth (",r==="annual"?"$39/mo":"$49/mo",")"]}),e.jsxs("div",{className:"text-sm text-zinc-500",children:["14-day free trial. ",g,"."]}),r==="annual"&&e.jsx("div",{className:"text-xs text-emerald-600 font-medium mt-1",children:"Total $468/year. Save $120."})]}),e.jsx("div",{className:"h-4 w-4 rounded-full border border-zinc-300 flex items-center justify-center",children:n==="growth"&&e.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full"})})]}),e.jsxs("div",{onClick:()=>a("scale"),className:`cursor-pointer border rounded-lg p-4 flex items-center justify-between transition-all ${n==="scale"?"border-blue-500 ring-1 ring-blue-500 bg-blue-50":"border-zinc-200 hover:border-blue-300"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-zinc-900",children:["Scale (",r==="annual"?"$99/mo":"$129/mo",")"]}),e.jsxs("div",{className:"text-sm text-zinc-500",children:["14-day free trial. ",g,"."]}),r==="annual"&&e.jsx("div",{className:"text-xs text-emerald-600 font-medium mt-1",children:"Total $1,188/year. Save $360."})]}),e.jsx("div",{className:"h-4 w-4 rounded-full border border-zinc-300 flex items-center justify-center",children:n==="scale"&&e.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full"})})]})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:h,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-zinc-900 hover:bg-zinc-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-zinc-500 disabled:opacity-70",children:h?"Creating...":"Create Studio"})})]})]})})]})]})});export{G as default};
