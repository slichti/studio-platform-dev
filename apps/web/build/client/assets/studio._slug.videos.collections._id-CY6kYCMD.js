import{w as N,u as z,f as y,g as w,L as k,F as d}from"./chunk-JMJ3UQ3L-DR3wp0kw.js";import{j as e}from"./vendor-puck-By1A5E5K.js";import{a as n}from"./vendor-sentry-BD1MTpLq.js";import{C}from"./ConfirmDialog-BkH4fRZm.js";import{f as x}from"./format-CAsSOgDD.js";import{A as S}from"./arrow-left-CpQHwIrP.js";import{P as D}from"./plus-BBRn-p3b.js";import{c as V}from"./createLucideIcon-DgXJrNmH.js";import{T as _}from"./trash-2-DU-4PZMS.js";import{X as A}from"./x-6mvJS0UK.js";import{S as L}from"./search-S3VI0n0n.js";import"./dialog-kR73yda_.js";import"./dialog-DQ7iZiMh.js";import"./portal-Dzo5VpZ6.js";import"./vendor-charts-BzoqY3DK.js";import"./button-BgyeBcg8.js";const I=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],T=V("grip-vertical",I),Z=N(function(){const{collection:s,allVideos:m}=z(),r=y();w();const[u,o]=n.useState(!1),[l,h]=n.useState(""),[p,i]=n.useState(!1),[f,c]=n.useState(!1),b=new Set(s.items.map(t=>t.videoId)),a=m.filter(t=>!b.has(t.id)&&t.title.toLowerCase().includes(l.toLowerCase())),j=()=>{c(!0)},g=()=>{r({intent:"delete_collection"},{method:"post"})},v=t=>{r({intent:"add_item",videoId:t},{method:"post",preventScrollReset:!0})};return e.jsxs("div",{className:"flex flex-col h-full bg-white",children:[e.jsxs("header",{className:"border-b border-zinc-200 px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(k,{to:"../?tab=collections",className:"p-2 hover:bg-zinc-100 rounded-full text-zinc-500 transition",children:e.jsx(S,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-zinc-900",children:s.title}),e.jsxs("div",{className:"text-sm text-zinc-500 font-mono",children:["/",s.slug]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 text-sm font-medium text-zinc-700 bg-white border border-zinc-300 rounded-lg hover:bg-zinc-50",children:"Edit Details"}),e.jsx("button",{onClick:j,className:"px-4 py-2 text-sm font-medium text-red-600 bg-red-50 border border-transparent rounded-lg hover:bg-red-100",children:"Delete"}),e.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2 text-sm font-medium text-white bg-zinc-900 rounded-lg hover:bg-zinc-800 flex items-center gap-2",children:[e.jsx(D,{size:16})," Add Video"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 max-w-5xl mx-auto w-full space-y-8",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:["Videos ",e.jsxs("span",{className:"text-zinc-400 font-normal text-sm",children:["(",s.items.length,")"]})]}),e.jsxs("div",{className:"bg-white border border-zinc-200 rounded-lg divide-y divide-zinc-100",children:[s.items.map((t,E)=>e.jsxs("div",{className:"p-4 flex items-center gap-4 group hover:bg-zinc-50 transition",children:[e.jsx("div",{className:"text-zinc-400 cursor-move hover:text-zinc-600",children:e.jsx(T,{size:20})}),e.jsx("div",{className:"w-16 h-10 bg-zinc-100 rounded overflow-hidden border border-zinc-200 shrink-0",children:t.video?.posterUrl?e.jsx("img",{src:t.video.posterUrl,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-300 bg-zinc-50",children:e.jsx("span",{className:"text-[10px]",children:"No Img"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-zinc-900 truncate",children:t.video?.title||"Unknown Video"}),e.jsxs("div",{className:"text-xs text-zinc-500 flex gap-3",children:[e.jsx("span",{children:x(t.video?.duration||0)}),e.jsx("span",{className:"capitalize",children:t.video?.status})]})]}),e.jsxs(d,{method:"post",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("input",{type:"hidden",name:"intent",value:"remove_item"}),e.jsx("input",{type:"hidden",name:"itemId",value:t.id}),e.jsx("button",{className:"p-2 text-zinc-400 hover:text-red-600 hover:bg-red-50 rounded transition",children:e.jsx(_,{size:16})})]})]},t.id)),s.items.length===0&&e.jsx("div",{className:"p-12 text-center text-zinc-500",children:"This collection is empty."})]})]})}),u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full h-[600px] flex flex-col animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"p-4 border-b border-zinc-200 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Add Video to Collection"}),e.jsx("button",{onClick:()=>o(!1),children:e.jsx(A,{size:20,className:"text-zinc-400 hover:text-zinc-600"})})]}),e.jsx("div",{className:"p-4 border-b border-zinc-200 bg-zinc-50",children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-2.5 h-4 w-4 text-zinc-400"}),e.jsx("input",{type:"text",placeholder:"Search library...",className:"w-full pl-9 pr-4 py-2 border border-zinc-200 rounded-lg text-sm bg-white outline-none focus:ring-2 focus:ring-black/5",value:l,onChange:t=>h(t.target.value)})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[a.map(t=>e.jsxs("div",{className:"p-3 hover:bg-zinc-50 rounded-lg flex items-center justify-between group transition",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-8 bg-zinc-100 rounded flex-shrink-0 border border-zinc-200",children:t.posterUrl&&e.jsx("img",{src:t.posterUrl,className:"w-full h-full object-cover rounded"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm text-zinc-900",children:t.title}),e.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:x(t.duration)})]})]}),e.jsx("button",{onClick:()=>v(t.id),className:"px-3 py-1.5 text-xs font-semibold bg-zinc-900 text-white rounded hover:bg-zinc-800 transition",children:"Add"})]},t.id)),a.length===0&&e.jsx("div",{className:"p-8 text-center text-sm text-zinc-500",children:l?"No videos found matching search.":"No video available to add."})]})]})}),p&&e.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:()=>i(!1)}),e.jsxs("div",{className:"relative w-full max-w-md bg-white shadow-2xl h-full p-6 animate-in slide-in-from-right duration-200",children:[e.jsx("h3",{className:"text-xl font-bold mb-6",children:"Edit Collection"}),e.jsxs(d,{method:"post",onSubmit:()=>i(!1),className:"space-y-4",children:[e.jsx("input",{type:"hidden",name:"intent",value:"update_details"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",name:"title",defaultValue:s.title,className:"w-full px-3 py-2 border border-zinc-200 rounded-lg outline-none focus:ring-2 focus:ring-black/5",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Slug (URL)"}),e.jsx("input",{type:"text",name:"slug",defaultValue:s.slug,className:"w-full px-3 py-2 border border-zinc-200 rounded-lg outline-none focus:ring-2 focus:ring-black/5 font-mono text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:s.description,rows:4,className:"w-full px-3 py-2 border border-zinc-200 rounded-lg outline-none focus:ring-2 focus:ring-black/5 resize-none"})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-sm font-medium text-zinc-500 hover:text-zinc-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium bg-zinc-900 text-white rounded-lg hover:bg-zinc-800",children:"Save Changes"})]})]})]})]}),e.jsx(C,{open:f,onOpenChange:c,onConfirm:g,title:"Delete Collection",description:"Are you sure you want to delete this collection? This action cannot be undone.",confirmText:"Delete",variant:"destructive"})]})});export{Z as default};
