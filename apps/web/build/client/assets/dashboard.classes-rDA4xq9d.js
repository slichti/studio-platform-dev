import{r as c,o as e,w as f,v as y,A as b,B as j,C as w}from"./chunk-JMJ3UQ3L-BcnvHMJ6.js";import{a as v}from"./index-Cs1IdFfL.js";import"./index-CMwWdKhW.js";const S="http://localhost:8787";async function C(n,o,t={}){const r=new Headers(t.headers);o&&r.set("Authorization",`Bearer ${o}`),r.has("Content-Type")||r.set("Content-Type","application/json");const s=await fetch(`${S}${n}`,{...t,headers:r});if(!s.ok){const a=await s.text();throw new Error(a||s.statusText)}return s.json()}function T({onUploadComplete:n}){const{getToken:o}=v(),[t,r]=c.useState(!1),[s,a]=c.useState(null),l=async i=>{var x;const d=(x=i.target.files)==null?void 0:x[0];if(d){r(!0);try{const p=await o(),{uploadURL:u}=await C("/uploads/image",p,{method:"POST"}),m=new FormData;m.append("file",d);const h=await fetch(u,{method:"POST",body:m});if(!h.ok)throw new Error("Failed to upload image to Cloudflare");const g=(await h.json()).result.id;n(g),a(URL.createObjectURL(d))}catch(p){console.error(p),alert("Upload failed")}finally{r(!1)}}};return e.jsxs("div",{style:{marginTop:"10px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",marginBottom:"5px"},children:"Thumbnail"}),e.jsx("input",{type:"file",accept:"image/*",onChange:l,disabled:t,style:{fontSize:"0.875rem"}}),t&&e.jsx("span",{style:{fontSize:"0.875rem",color:"#71717a",marginLeft:"10px"},children:"Uploading..."}),s&&e.jsx("div",{style:{marginTop:"10px"},children:e.jsx("img",{src:s,alt:"Preview",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"6px"}})})]})}const U=f(function(){const{classes:o}=y(),t=b(),s=j().state==="submitting",[a,l]=c.useState(null);return e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:e.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"bold"},children:"Classes"})}),e.jsxs("div",{style:{background:"white",padding:"20px",borderRadius:"8px",border:"1px solid #e4e4e7",marginBottom:"40px"},children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"semibold",marginBottom:"15px"},children:"Create New Class"}),e.jsxs(w,{method:"post",style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:"20px",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",marginBottom:"5px"},children:"Title"}),e.jsx("input",{name:"title",required:!0,type:"text",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #d4d4d8"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",marginBottom:"5px"},children:"Start Time"}),e.jsx("input",{name:"startTime",required:!0,type:"datetime-local",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #d4d4d8"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",marginBottom:"5px"},children:"Duration (min)"}),e.jsx("input",{name:"duration",required:!0,type:"number",defaultValue:"60",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #d4d4d8"}})]}),e.jsx("input",{type:"hidden",name:"thumbnailId",value:a||""}),e.jsx("div",{style:{marginBottom:"10px"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"0.875rem"},children:[e.jsx("input",{name:"createZoom",type:"checkbox"}),"Auto-create Zoom?"]})}),e.jsx("button",{disabled:s,type:"submit",style:{padding:"10px 20px",background:"#18181b",color:"white",borderRadius:"6px",border:"none",cursor:"pointer"},children:s?"Creating...":"Create Class"})]}),e.jsx("div",{style:{marginTop:"10px"},children:e.jsx(T,{onUploadComplete:i=>l(i)})}),(t==null?void 0:t.error)&&e.jsx("p",{style:{color:"red",marginTop:"10px"},children:t.error})]}),e.jsxs("div",{style:{display:"grid",gap:"15px"},children:[o.map(i=>e.jsxs("div",{style:{background:"white",padding:"20px",borderRadius:"8px",border:"1px solid #e4e4e7",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{fontWeight:"bold"},children:i.title}),e.jsx("p",{style:{color:"#71717a",fontSize:"0.875rem"},children:new Date(i.startTime).toLocaleString()})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[i.zoomMeetingUrl&&e.jsx("a",{href:i.zoomMeetingUrl,target:"_blank",rel:"noreferrer",style:{fontSize:"0.875rem",color:"#2563eb"},children:"Zoom Link"}),e.jsx("a",{href:`/dashboard/classes/${i.id}/roster`,style:{fontSize:"0.875rem",textDecoration:"underline"},children:"View Roster"})]})]},i.id)),o.length===0&&e.jsx("p",{style:{color:"#71717a"},children:"No classes found."})]})]})});export{U as default};
