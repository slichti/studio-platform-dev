import{e as v,b as w,c as A,d as U,f as P,C as S}from"./index-tijl61gk.js";import{a as f,R as I}from"./vendor-sentry-JepEA2vj.js";var x=class C extends Error{static kind="ClerkError";clerkError=!0;code;longMessage;docsUrl;cause;get name(){return this.constructor.name}constructor(t){super(new.target.formatMessage(new.target.kind,t.message,t.code,t.docsUrl),{cause:t.cause}),Object.setPrototypeOf(this,C.prototype),this.code=t.code,this.docsUrl=t.docsUrl,this.longMessage=t.longMessage,this.cause=t.cause}toString(){return`[${this.name}]
Message:${this.message}`}static formatMessage(t,r,o,s){const n="Clerk:",a=new RegExp(n.replace(" ","\\s*"),"i");return r=r.replace(a,""),r=`${n} ${r.trim()}

(code="${o}")

`,s&&(r+=`

Docs: ${s}`),r}};const L=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function B({packageName:e,customMessages:t}){let r=e;function o(n,a){if(!a)return`${r}: ${n}`;let i=n;const l=n.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const c of l){const u=(a[c[1]]||"").toString();i=i.replace(`{{${c[1]}}}`,u)}return`${r}: ${i}`}const s={...L,...t};return{setPackageName({packageName:n}){return typeof n=="string"&&(r=n),this},setMessages({customMessages:n}){return Object.assign(s,n||{}),this},throwInvalidPublishableKeyError(n){throw new Error(o(s.InvalidPublishableKeyErrorMessage,n))},throwInvalidProxyUrl(n){throw new Error(o(s.InvalidProxyUrlErrorMessage,n))},throwMissingPublishableKeyError(){throw new Error(o(s.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(o(s.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(n){throw new Error(o(s.MissingClerkProvider,n))},throw(n){throw new Error(o(n))}}}var X=class M extends x{static kind="ClerkRuntimeError";clerkRuntimeError=!0;constructor(t,r){super({...r,message:t}),Object.setPrototypeOf(this,M.prototype)}};const R={strict_mfa:{afterMinutes:10,level:"multi_factor"},strict:{afterMinutes:10,level:"second_factor"},moderate:{afterMinutes:60,level:"second_factor"},lax:{afterMinutes:1440,level:"second_factor"}},_=new Set(["first_factor","second_factor","multi_factor"]),z=new Set(["strict_mfa","strict","moderate","lax"]),$=e=>typeof e=="number"&&e>0,O=e=>_.has(e),T=e=>z.has(e),h=e=>e.replace(/^(org:)*/,"org:"),K=(e,t)=>{const{orgId:r,orgRole:o,orgPermissions:s}=t;return!e.role&&!e.permission||!r||!o||!s?null:e.permission?s.includes(h(e.permission)):e.role?h(o)===h(e.role):null},b=(e,t)=>{const{org:r,user:o}=W(e),[s,n]=t.split(":"),a=n||s;return s==="org"?r.includes(a):s==="user"?o.includes(a):[...r,...o].includes(a)},V=(e,t)=>{const{features:r,plans:o}=t;return e.feature&&r?b(r,e.feature):e.plan&&o?b(o,e.plan):null},W=e=>{const t=e?e.split(",").map(r=>r.trim()):[];return{org:t.filter(r=>r.split(":")[0].includes("o")).map(r=>r.split(":")[1]),user:t.filter(r=>r.split(":")[0].includes("u")).map(r=>r.split(":")[1])}},F=e=>{if(!e)return!1;const t=s=>typeof s=="string"?R[s]:s,r=typeof e=="string"&&T(e),o=typeof e=="object"&&O(e.level)&&$(e.afterMinutes);return r||o?t.bind(null,e):!1},j=(e,{factorVerificationAge:t})=>{if(!e.reverification||!t)return null;const r=F(e.reverification);if(!r)return null;const{level:o,afterMinutes:s}=r(),[n,a]=t,i=n!==-1?s>n:null,l=a!==-1?s>a:null;switch(o){case"first_factor":return i;case"second_factor":return a!==-1?l:i;case"multi_factor":return a===-1?i:i&&l}},D=e=>t=>{if(!e.userId)return!1;const r=V(t,e),o=K(t,e),s=j(t,e);return[r||o,s].some(n=>n===null)?[r||o,s].some(n=>n===!0):[r||o,s].every(n=>n===!0)},Y=({authObject:{sessionId:e,sessionStatus:t,userId:r,actor:o,orgId:s,orgRole:n,orgSlug:a,signOut:i,getToken:l,has:c,sessionClaims:u},options:{treatPendingAsSignedOut:p=!0}})=>{if(e===void 0&&r===void 0)return{isLoaded:!1,isSignedIn:void 0,sessionId:e,sessionClaims:void 0,userId:r,actor:void 0,orgId:void 0,orgRole:void 0,orgSlug:void 0,has:void 0,signOut:i,getToken:l};if(e===null&&r===null)return{isLoaded:!0,isSignedIn:!1,sessionId:e,userId:r,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:i,getToken:l};if(p&&t==="pending")return{isLoaded:!0,isSignedIn:!1,sessionId:null,userId:null,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:i,getToken:l};if(e&&u&&r&&s&&n)return{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:u,userId:r,actor:o||null,orgId:s,orgRole:n,orgSlug:a||null,has:c,signOut:i,getToken:l};if(e&&u&&r&&!s)return{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:u,userId:r,actor:o||null,orgId:null,orgRole:null,orgSlug:null,has:c,signOut:i,getToken:l}};var m=B({packageName:"@clerk/clerk-react"});function ee(e){m.setMessages(e).setPackageName(e)}var[re,q]=A("AuthContext"),te=S,d=U,ne="You've added multiple <ClerkProvider> components in your React component tree. Wrap your components in a single <ClerkProvider>.",oe=e=>`You've passed multiple children components to <${e}/>. You can only pass a single child component or text.`,H="Invalid state. Feel free to submit a bug or reach out to support here: https://clerk.com/support",se="Unsupported usage of isSatellite, domain or proxyUrl. The usage of isSatellite, domain or proxyUrl as function is not supported in non-browser environments.",ie="<UserProfile.Page /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",ae="<UserProfile.Link /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",le="<OrganizationProfile.Page /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",ue="<OrganizationProfile.Link /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",ce=e=>`<${e} /> can only accept <${e}.Page /> and <${e}.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.`,de=e=>`Missing props. <${e}.Page /> component requires the following props: url, label, labelIcon, alongside with children to be rendered inside the page.`,ge=e=>`Missing props. <${e}.Link /> component requires the following props: url, label and labelIcon.`,pe="<UserButton /> can only accept <UserButton.UserProfilePage />, <UserButton.UserProfileLink /> and <UserButton.MenuItems /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.",he="<UserButton.MenuItems /> component can only accept <UserButton.Action /> and <UserButton.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.",fe="<UserButton.MenuItems /> component needs to be a direct child of `<UserButton />`.",ve="<UserButton.Action /> component needs to be a direct child of `<UserButton.MenuItems />`.",me="<UserButton.Link /> component needs to be a direct child of `<UserButton.MenuItems />`.",ke="Missing props. <UserButton.Link /> component requires the following props: href, label and labelIcon.",ye="Missing props. <UserButton.Action /> component requires the following props: label.",g=e=>{w(()=>{m.throwMissingClerkProviderError({source:e})})},E=e=>new Promise(t=>{const r=o=>{["ready","degraded"].includes(o)&&(t(),e.off("status",r))};e.on("status",r,{notify:!0})}),N=e=>async t=>(await E(e),e.session?e.session.getToken(t):null),G=e=>async(...t)=>(await E(e),e.signOut(...t)),be=(e={})=>{var t;g("useAuth");const{treatPendingAsSignedOut:r,...o}=e??{},s=o;let a=q();a.sessionId===void 0&&a.userId===void 0&&(a=s??{});const i=d(),l=f.useCallback(N(i),[i]),c=f.useCallback(G(i),[i]);return(t=i.telemetry)==null||t.record(v("useAuth",{treatPendingAsSignedOut:r})),J({...a,getToken:l,signOut:c},{treatPendingAsSignedOut:r})};function J(e,{treatPendingAsSignedOut:t=!0}={}){const{userId:r,orgId:o,orgRole:s,has:n,signOut:a,getToken:i,orgPermissions:l,factorVerificationAge:c,sessionClaims:u}=e??{},p=f.useCallback(y=>n?n(y):D({userId:r,orgId:o,orgRole:s,orgPermissions:l,factorVerificationAge:c,features:u?.fea||"",plans:u?.pla||""})(y),[n,r,o,s,l,c,u]),k=Y({authObject:{...e,getToken:i,signOut:a,has:p},options:{treatPendingAsSignedOut:t}});return k||m.throw(H)}var Pe=()=>{var e;g("useSignIn");const t=d(),r=P();return(e=t.telemetry)==null||e.record(v("useSignIn")),r?{isLoaded:!0,signIn:r.signIn,setActive:t.setActive}:{isLoaded:!1,signIn:void 0,setActive:void 0}},Ce=()=>{var e;g("useSignUp");const t=d(),r=P();return(e=t.telemetry)==null||e.record(v("useSignUp")),r?{isLoaded:!0,signUp:r.signUp,setActive:t.setActive}:{isLoaded:!1,signUp:void 0,setActive:void 0}},Me=(e,t)=>{const o=(typeof t=="string"?t:t?.component)||e.displayName||e.name||"Component";e.displayName=o;const s=typeof t=="string"?void 0:t,n=a=>{g(o);const i=d();return!i.loaded&&!s?.renderWhileLoading?null:I.createElement(e,{...a,component:o,clerk:i})};return n.displayName=`withClerk(${o})`,n};export{re as A,X as C,te as I,g as a,Pe as b,Ce as c,ie as d,ae as e,fe as f,ve as g,me as h,le as i,ce as j,de as k,ge as l,pe as m,he as n,ue as o,ye as p,ke as q,m as r,oe as s,B as t,be as u,ee as v,Me as w,ne as x,se as y};
