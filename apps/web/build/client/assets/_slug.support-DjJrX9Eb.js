import{w as I,g as T}from"./chunk-JMJ3UQ3L-Dw7tS_gO.js";import{j as e}from"./vendor-puck-By1A5E5K.js";import{a as t}from"./vendor-sentry-BD1MTpLq.js";import{C as P}from"./ChatWindow-B8PTlat6.js";import{M as b}from"./message-square-DXFYk9Nj.js";import{X as E}from"./x-6mvJS0UK.js";import{L as H}from"./loader-circle-CaGZsKjo.js";import{S as M}from"./send-BNR5q9Wk.js";import"./createLucideIcon-DgXJrNmH.js";function O({tenantSlug:d,apiUrl:a,brandColor:o="#3B82F6"}){const[g,m]=t.useState(!1),[j,w]=t.useState("form"),[n,u]=t.useState(!1),[i,y]=t.useState(""),[l,z]=t.useState(""),[c,N]=t.useState(""),[x,v]=t.useState(null),[p,S]=t.useState(null),[h,k]=t.useState(null),C=async r=>{if(r.preventDefault(),!(!l||!c)){u(!0);try{const s=await(await fetch(`${a}/public/chat/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenantSlug:d,name:i,email:l,message:c})})).json();s.success&&s.roomId&&s.guestToken&&s.user?(v(s.roomId),S(s.guestToken),k(s.user.id),w("chat")):alert(s.error||"Failed to start chat")}catch(f){console.error(f),alert("Connection error")}finally{u(!1)}}};return g?e.jsxs("div",{className:"fixed bottom-6 right-6 w-96 bg-white rounded-2xl shadow-2xl overflow-hidden z-50 border border-zinc-200",children:[e.jsxs("div",{style:{backgroundColor:o},className:"p-4 flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{size:20}),e.jsx("span",{className:"font-semibold",children:"Support Chat"})]}),e.jsx("button",{onClick:()=>m(!1),className:"hover:bg-white/20 p-1 rounded",children:e.jsx(E,{size:20})})]}),j==="form"?e.jsxs("form",{onSubmit:C,className:"p-4 space-y-4",children:[e.jsx("p",{className:"text-sm text-zinc-600",children:"Hi! How can we help you today?"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Your Name"}),e.jsx("input",{type:"text",value:i,onChange:r=>y(r.target.value),className:"w-full px-3 py-2 border border-zinc-200 rounded-lg text-sm",placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:l,onChange:r=>z(r.target.value),className:"w-full px-3 py-2 border border-zinc-200 rounded-lg text-sm",placeholder:"you@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Message *"}),e.jsx("textarea",{required:!0,value:c,onChange:r=>N(r.target.value),className:"w-full px-3 py-2 border border-zinc-200 rounded-lg text-sm h-24 resize-none",placeholder:"How can we help?"})]}),e.jsxs("button",{type:"submit",disabled:n,style:{backgroundColor:o},className:"w-full py-2.5 rounded-lg text-white font-medium flex items-center justify-center gap-2 hover:opacity-90 disabled:opacity-50",children:[n?e.jsx(H,{size:16,className:"animate-spin"}):e.jsx(M,{size:16}),n?"Starting...":"Start Chat"]})]}):e.jsx("div",{className:"h-[400px]",children:x&&p&&h&&e.jsx(P,{roomId:x,token:p,currentUser:{id:h,name:i||"Guest"},wsUrl:a})})]}):e.jsx("button",{onClick:()=>m(!0),style:{backgroundColor:o},className:"fixed bottom-6 right-6 w-14 h-14 rounded-full shadow-lg flex items-center justify-center text-white hover:opacity-90 transition-opacity z-50",children:e.jsx(b,{size:24})})}const W=I(function(){const{slug:a}=T();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-zinc-50 to-zinc-100 dark:from-zinc-900 dark:to-zinc-950 flex items-center justify-center p-8",children:[e.jsxs("div",{className:"text-center max-w-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100 mb-4",children:"Need Help?"}),e.jsx("p",{className:"text-zinc-600 dark:text-zinc-400 mb-8",children:"Click the chat button in the bottom right corner to start a conversation with our support team."}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-zinc-800 rounded-full shadow-sm border border-zinc-200 dark:border-zinc-700 text-sm text-zinc-600 dark:text-zinc-400",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Support is online"]})]}),a&&e.jsx(O,{tenantSlug:a,apiUrl:"https://studio-platform-api.slichti.workers.dev",brandColor:"#3B82F6"})]})});export{W as default};
