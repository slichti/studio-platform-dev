import{w as y,d as z,c as v,b as w,F as u,L as S}from"./chunk-JMJ3UQ3L-D5-P_Fux.js";import{j as e}from"./vendor-puck-Ox9nZAW8.js";import{a as o}from"./vendor-sentry-JepEA2vj.js";import{a as C}from"./api-OnQO3erh.js";import{U as F}from"./upload-_U7n2l92.js";import{F as T}from"./file-text-Dcmbx1Ky.js";import{C as I}from"./circle-alert-BnjGAXAK.js";import{C as D}from"./circle-check-big-CSQBoMuh.js";import{L as b}from"./loader-circle-CRrLibi7.js";import{A as h}from"./arrow-right-iNMGlV6d.js";import{C as q}from"./circle-check-N5m9neNQ.js";import"./createLucideIcon-CZ3UnH4h.js";function L({tenantSlug:j,onSuccess:c,onSkip:p}){const[l,t]=o.useState(null),[i,d]=o.useState(!1),[a,r]=o.useState(null),[g,n]=o.useState(null),s=m=>{m.target.files&&m.target.files[0]&&(t(m.target.files[0]),n(null),r(null))},k=async m=>{if(m.preventDefault(),!l){n("Please select a file.");return}d(!0),n(null),r(null);try{const f=await window.Clerk?.session?.getToken(),N=new FormData;N.append("file",l);const x=await C("/import/csv",f,{method:"POST",headers:{"X-Tenant-Slug":j},body:N});x.error?(n(x.error),x.details&&console.error(x.details)):r(x)}catch(f){n(f.message||"Upload failed.")}finally{d(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded text-sm",children:[e.jsx("p",{className:"font-semibold mb-1",children:"CSV Format Requirements:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsxs("li",{children:["Headers: ",e.jsx("code",{children:"email"}),", ",e.jsx("code",{children:"firstname"}),", ",e.jsx("code",{children:"lastname"})]}),e.jsxs("li",{children:["Membership: ",e.jsx("code",{children:"membership"})," (Plan Name)"]})]})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"border-2 border-dashed border-zinc-300 dark:border-zinc-700 rounded-lg p-8 flex flex-col items-center justify-center text-center hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors",children:[e.jsx(F,{className:"h-10 w-10 text-zinc-400 mb-3"}),l?e.jsxs("div",{className:"flex items-center gap-2 text-zinc-900 dark:text-zinc-100 font-medium",children:[e.jsx(T,{className:"h-5 w-5 text-blue-500"}),l.name]}):e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium hover:text-blue-500",children:"Upload CSV"}),e.jsx("span",{className:"text-zinc-500",children:" or drag/drop"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:".csv",onChange:s})]}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Max 10MB"})]})]}),g&&e.jsxs("div",{className:"flex items-start gap-2 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-3 rounded",children:[e.jsx(I,{className:"h-5 w-5 shrink-0"}),e.jsx("span",{className:"text-sm",children:g})]}),a&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-300 p-4 rounded border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 font-semibold",children:[e.jsx(D,{className:"h-5 w-5"}),"Import Complete"]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:["Created: ",a.created,", Skipped: ",a.skipped]}),a.errors&&a.errors.length>0&&e.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:[a.errors.length," row errors (see logs)"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[p&&e.jsx("button",{type:"button",onClick:p,className:"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-200 text-sm font-medium",children:"Skip Import"}),a?e.jsx("button",{type:"button",onClick:c,className:"bg-green-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-green-700 transition flex items-center gap-2",children:"Continue"}):e.jsx("button",{type:"submit",disabled:!l||i,className:"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 px-6 py-2 rounded-xl font-bold hover:opacity-90 disabled:opacity-50 flex items-center gap-2 ml-auto",children:i?"Importing...":"Start Import"})]})]})]})}const $=y(function(){const{tenant:c}=z(),p=v();w();const l=c.settings?.onboardingStep||1,[t,i]=o.useState(l),[d,a]=o.useState("yoga"),r=p.state==="submitting",n=(()=>{switch(d){case"gym":return{title:"HIIT Session",price:2500};case"crossfit":return{title:"WOD",price:3e3};case"art":return{title:"Painting Workshop",price:4500};case"yoga":default:return{title:"Vinyasa Flow",price:2e3}}})();return e.jsx("div",{className:"min-h-screen bg-zinc-50 dark:bg-zinc-950 flex flex-col items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-xl w-full bg-white dark:bg-zinc-900 rounded-2xl shadow-xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[e.jsx("div",{className:"h-2 bg-zinc-100 dark:bg-zinc-800 w-full relative",children:e.jsx("div",{className:"absolute left-0 top-0 h-full bg-indigo-600 transition-all duration-500",style:{width:`${t/6*100}%`}})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mx-auto mb-4 text-xl font-bold",children:t}),e.jsxs("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:[t===1&&"Choose your Business Type",t===2&&"Set your Brand",t===3&&"Create a Location",t===4&&"Schedule First Class",t===5&&"Migrate Data",t===6&&"You're all set!"]}),e.jsxs("p",{className:"text-zinc-500 dark:text-zinc-400 mt-2",children:[t===1&&"We'll customize your setup based on your needs.",t===2&&"Choose a color that represents your studio.",t===3&&"Where will your classes take place?",t===4&&"Get your calendar started with one event.",t===5&&"Import users and classes from your previous system.",t===6&&"Your studio is ready to accept bookings."]})]}),t===1&&e.jsxs(u,{method:"post",onSubmit:()=>setTimeout(()=>i(2),500),children:[e.jsx("input",{type:"hidden",name:"step",value:"template"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{id:"yoga",label:"Yoga / Pilates",icon:"ðŸ§˜"},{id:"gym",label:"Gym / Fitness",icon:"ðŸ’ª"},{id:"crossfit",label:"Crossfit",icon:"ðŸ‹ï¸"},{id:"art",label:"Art / Workshop",icon:"ðŸŽ¨"}].map(s=>e.jsxs("label",{className:`cursor-pointer border-2 rounded-xl p-4 flex flex-col items-center gap-2 transition-all ${d===s.id?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20":"border-zinc-200 dark:border-zinc-800 hover:border-zinc-300"}`,children:[e.jsx("input",{type:"radio",name:"template",value:s.id,checked:d===s.id,onChange:()=>a(s.id),className:"sr-only"}),e.jsx("span",{className:"text-3xl",children:s.icon}),e.jsx("span",{className:"font-semibold text-sm",children:s.label})]},s.id))}),e.jsx("button",{disabled:r,className:"w-full mt-8 bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:opacity-90 transition",children:r?e.jsx(b,{className:"animate-spin"}):e.jsxs(e.Fragment,{children:["Next Step ",e.jsx(h,{size:16})]})})]}),t===2&&e.jsxs(u,{method:"post",onSubmit:()=>setTimeout(()=>i(3),500),children:[e.jsx("input",{type:"hidden",name:"step",value:"branding"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Primary Color"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:["#4f46e5","#ec4899","#10b981","#f59e0b","#dc2626"].map(s=>e.jsxs("label",{className:"relative cursor-pointer group",children:[e.jsx("input",{type:"radio",name:"primaryColor",value:s,className:"peer sr-only"}),e.jsx("div",{className:"w-full aspect-square rounded-full border-2 border-transparent peer-checked:border-zinc-900 dark:peer-checked:border-white transition-all",style:{backgroundColor:s}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 peer-checked:opacity-100 text-white",children:e.jsx(q,{size:16})})]},s))})]}),e.jsx("button",{disabled:r,className:"w-full mt-8 bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:opacity-90 transition",children:r?e.jsx(b,{className:"animate-spin"}):e.jsxs(e.Fragment,{children:["Next Step ",e.jsx(h,{size:16})]})})]}),t===3&&e.jsxs(u,{method:"post",onSubmit:()=>setTimeout(()=>i(4),500),children:[e.jsx("input",{type:"hidden",name:"step",value:"location"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Location Name"}),e.jsx("input",{required:!0,name:"name",placeholder:"e.g. Main Studio",className:"w-full p-2.5 rounded-lg border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Address"}),e.jsx("input",{required:!0,name:"address",placeholder:"123 Yoga Lane",className:"w-full p-2.5 rounded-lg border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900"})]})]}),e.jsx("button",{disabled:r,className:"w-full mt-8 bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:opacity-90 transition",children:r?e.jsx(b,{className:"animate-spin"}):e.jsxs(e.Fragment,{children:["Next Step ",e.jsx(h,{size:16})]})})]}),t===4&&e.jsxs(u,{method:"post",onSubmit:()=>setTimeout(()=>i(5),500),children:[e.jsx("input",{type:"hidden",name:"step",value:"schedule"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Class Title"}),e.jsx("input",{required:!0,name:"title",defaultValue:n.title,className:"w-full p-2.5 rounded-lg border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Start Time"}),e.jsx("input",{required:!0,type:"datetime-local",name:"startTime",className:"w-full p-2.5 rounded-lg border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900"})]}),e.jsx("input",{type:"hidden",name:"price",value:n.price})]}),e.jsx("button",{disabled:r,className:"w-full mt-8 bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:opacity-90 transition",children:r?e.jsx(b,{className:"animate-spin"}):e.jsxs(e.Fragment,{children:["Next Step ",e.jsx(h,{size:16})]})})]}),t===5&&e.jsxs("div",{children:[e.jsx(L,{tenantSlug:c.slug,onSuccess:()=>{const s=document.getElementById("advance-step-form");s&&s.submit(),i(6)},onSkip:()=>{const s=document.getElementById("advance-step-form");s&&s.submit(),i(6)}}),e.jsx(u,{method:"post",id:"advance-step-form",className:"hidden",children:e.jsx("input",{type:"hidden",name:"step",value:"import_complete"})})]}),t===6&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:"ðŸŽ‰"}),e.jsxs("p",{className:"text-zinc-600 dark:text-zinc-400 mb-8",children:["Great job! Your `",d,"` studio is now configured."]}),e.jsx(S,{to:`/studio/${c.slug}`,className:"w-full bg-indigo-600 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Go to Dashboard"})]})]})]})})});export{$ as default};
