import{w as g,d as h,r as c}from"./chunk-EPOLDU6W-CCdTpUCB.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{a as j}from"./api-LAgipKeK.js";import{S as N}from"./smartphone-CPdGIUQo.js";import{V as y}from"./video-BOhSxDUd.js";import{M as w}from"./message-square-6cQesQbm.js";import{u as v}from"./chunk-OT5FTIRN-ZNG8QEaZ.js";import"./createLucideIcon-BL8SG8hg.js";import"./index-DnWvPTQO.js";import"./index-CTNgJJrB.js";const m=[{key:"feature_mobile_app",label:"White-Label Mobile App",description:"Enable Mobile App settings and promotion across all studios. Keep disabled until apps are approved.",icon:N},{key:"feature_vod",label:"Video on Demand (VOD)",description:"Global master switch for VOD functionality.",icon:y},{key:"feature_communications",label:"Communication Suite (SMS/Email)",description:"Enable SMS and Email marketing tools.",icon:w}],L=g(function(){const{configs:o,error:l}=h(),[u,r]=c.useState(o||[]),{getToken:x}=v(),[p,d]=c.useState(null),b=s=>u.find(i=>i.key===s)||{enabled:!1},f=async(s,i)=>{d(s),r(t=>t.find(n=>n.key===s)?t.map(n=>n.key===s?{...n,enabled:!i}:n):[...t,{key:s,enabled:!i}]);try{const t=await x();await j(`/admin/platform/config/${s}`,t,{method:"PUT",body:JSON.stringify({enabled:!i,description:m.find(a=>a.key===s)?.description})})}catch(t){console.error(t),alert("Failed to update feature flag"),r(o)}finally{d(null)}};return l?e.jsxs("div",{className:"p-8 text-red-600",children:["Error loading config: ",l]}):e.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-zinc-900",children:"Platform Features"}),e.jsx("p",{className:"text-zinc-500 mt-2",children:"Manage global feature flags. Disabling a feature here hides it from all tenants."})]}),e.jsx("div",{className:"bg-white rounded-lg border border-zinc-200 divide-y divide-zinc-100 shadow-sm",children:m.map(s=>{const i=b(s.key),t=i.enabled,a=s.icon;return e.jsxs("div",{className:"p-6 flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${t?"bg-blue-50 text-blue-600":"bg-zinc-100 text-zinc-400"}`,children:e.jsx(a,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-zinc-900",children:s.label}),e.jsx("button",{onClick:()=>f(s.key,t),disabled:p===s.key,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 ${t?"bg-blue-600":"bg-zinc-200"}`,children:e.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${t?"translate-x-5":"translate-x-0"}`})})]}),e.jsx("p",{className:"text-zinc-500 text-sm mt-1 mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${t?"bg-green-100 text-green-800":"bg-zinc-100 text-zinc-600"}`,children:t?"Enabled Globally":"Disabled (Hidden)"}),i.updatedAt&&e.jsxs("span",{className:"text-xs text-zinc-400",children:["Updated ",new Date(i.updatedAt).toLocaleDateString()]})]})]})]},s.key)})}),e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-100 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How this works"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Enabled:"})," Feature is visible to tenants (subject to their subscription tier)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Disabled:"})," Feature is completely hidden from the entire platform. Useful for testing or incomplete features (e.g. Mobile App)."]})]})]})]})});export{L as default};
