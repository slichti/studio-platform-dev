const h="https://studio-platform-api.slichti.workers.dev";async function u(i,n,r={},c){const d=c||h,o={};r.headers&&(r.headers instanceof Headers||Array.isArray(r.headers)?r.headers.forEach((t,e)=>o[e]=t):Object.entries(r.headers).forEach(([t,e])=>{e!=null&&(o[t]=String(e))}));const a=new Headers(o);if(n&&a.set("Authorization",`Bearer ${n}`),typeof window<"u"){const t=localStorage.getItem("impersonation_token");t&&a.set("Authorization",`Bearer ${t}`)}!a.has("Content-Type")&&!(r.body instanceof FormData)&&a.set("Content-Type","application/json"),a.has("x-request-id")||a.set("x-request-id",crypto.randomUUID());const s=await fetch(`${d}${i}`,{...r,headers:a});if(!s.ok){let t;try{t=await s.clone().json();const e=new Error(t.error||s.statusText);throw e.data=t,e.status=s.status,e}catch(e){if(e.data)throw e;const f=await s.text();throw new Error(f||s.statusText)}}return s.json()}export{h as A,u as a};
