import{w as z,e as w}from"./chunk-JMJ3UQ3L-DIHTCPR9.js";import{j as e}from"./vendor-puck-EFhZVjRu.js";import{a as h}from"./api-OnQO3erh.js";import{a as r}from"./vendor-sentry-BD1MTpLq.js";import{t as b}from"./index-0-uDmKCt.js";import{u as k}from"./chunk-OT5FTIRN-BMaHWN1z.js";import"./index-DeVRW8Sh.js";import"./vendor-charts-BQhvGvjY.js";const R=z(function(){const{tenant:m}=w(),{getToken:l}=k(),[x,g]=r.useState([]),[f,j]=r.useState(!0),[a,v]=r.useState(null),[N,c]=r.useState(!1),[t,n]=r.useState({name:m.name,line1:m.address||"",city:"",state:"",postal_code:"",country:"US",phone:""}),[u,p]=r.useState(!1);r.useEffect(()=>{(async()=>{const o=await l(),i="https://studio-platform-api.slichti.workers.dev";try{const d=await h(`${i}/platform/hardware/skus`,o);d&&d.data&&g(d.data)}catch(d){console.error("Failed to fetch SKUs",d)}finally{j(!1)}})()},[l]);const y=async()=>{if(!a)return;p(!0);const s=await l(),o={skuId:a.id,quantity:1,shipping:{name:t.name,address:{line1:t.line1,city:t.city,state:t.state,postal_code:t.postal_code,country:t.country},phone:t.phone}},i=await h("https://studio-platform-api.slichti.workers.dev/platform/hardware/orders",s,{method:"POST",body:JSON.stringify(o)});p(!1),i&&!i.error?(b.success("Order Placed Successfully! You will receive confirmation shortly."),c(!1)):b.error(`Order Failed: ${i?.error||"Unknown error"}`)};return e.jsxs("div",{className:"max-w-4xl text-zinc-900 dark:text-zinc-100",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Hardware & Terminals"}),e.jsx("p",{className:"text-zinc-500 mb-8 max-w-2xl",children:"Purchase Stripe Terminal readers to accept in-person payments fully integrated with your studio."}),N&&a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-xl border border-zinc-200 dark:border-zinc-800 w-full max-w-lg p-6 my-8",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4",children:["Order ",a.product?.name||"Reader"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-800 rounded-lg flex items-center gap-4",children:[a.image&&e.jsx("img",{src:a.image,alt:"",className:"w-12 h-12 object-contain"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.product?.name}),e.jsxs("div",{className:"text-sm text-zinc-500",children:["$",(a.price.unit_amount/100).toFixed(2)]})]})]}),e.jsx("h4",{className:"font-medium border-b dark:border-zinc-700 pb-2",children:"Shipping Address"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Recipient Name"}),e.jsx("input",{value:t.name,onChange:s=>n({...t,name:s.target.value}),className:"w-full bg-zinc-50 dark:bg-zinc-800 border-none rounded-md px-3 py-2 text-sm"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Address Line 1"}),e.jsx("input",{value:t.line1,onChange:s=>n({...t,line1:s.target.value}),className:"w-full bg-zinc-50 dark:bg-zinc-800 border-none rounded-md px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"City"}),e.jsx("input",{value:t.city,onChange:s=>n({...t,city:s.target.value}),className:"w-full bg-zinc-50 dark:bg-zinc-800 border-none rounded-md px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"State"}),e.jsx("input",{value:t.state,onChange:s=>n({...t,state:s.target.value}),className:"w-full bg-zinc-50 dark:bg-zinc-800 border-none rounded-md px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Zip Code"}),e.jsx("input",{value:t.postal_code,onChange:s=>n({...t,postal_code:s.target.value}),className:"w-full bg-zinc-50 dark:bg-zinc-800 border-none rounded-md px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Country"}),e.jsxs("select",{value:t.country,onChange:s=>n({...t,country:s.target.value}),className:"w-full bg-zinc-50 dark:bg-zinc-800 border-none rounded-md px-3 py-2 text-sm",children:[e.jsx("option",{value:"US",children:"United States"}),e.jsx("option",{value:"CA",children:"Canada"}),e.jsx("option",{value:"GB",children:"United Kingdom"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Phone"}),e.jsx("input",{value:t.phone,onChange:s=>n({...t,phone:s.target.value}),className:"w-full bg-zinc-50 dark:bg-zinc-800 border-none rounded-md px-3 py-2 text-sm"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6 justify-end",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-zinc-600 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-md",children:"Cancel"}),e.jsx("button",{onClick:y,disabled:u,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:u?"Placing Order...":"Confirm Purchase"})]})]})}),f?e.jsx("div",{children:"Loading hardware..."}):x.length===0?e.jsx("div",{className:"p-8 bg-zinc-50 dark:bg-zinc-900 rounded-lg text-center text-zinc-500",children:"No hardware available for purchase at this time."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:x.map(s=>e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg overflow-hidden shadow-sm flex flex-col",children:[e.jsx("div",{className:"aspect-video bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center p-4",children:s.image?e.jsx("img",{src:s.image,alt:s.product?.name,className:"h-full object-contain"}):e.jsx("div",{className:"text-4xl",children:"ðŸ“ "})}),e.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[e.jsx("h3",{className:"text-lg font-bold mb-1",children:s.product?.name||"Terminal Reader"}),e.jsx("p",{className:"text-sm text-zinc-500 mb-4 flex-1",children:s.product?.description||"Accept payments securely with this Stripe Terminal reader."}),e.jsxs("div",{className:"flex items-center justify-between mt-auto pt-4 border-t border-zinc-100 dark:border-zinc-800",children:[e.jsxs("div",{className:"text-xl font-bold",children:["$",(s.price.unit_amount/100).toFixed(2)]}),e.jsx("button",{onClick:()=>{v(s),c(!0)},className:"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 px-4 py-2 rounded-md text-sm font-medium hover:opacity-90",children:"Buy Now"})]})]})]},s.id))})]})});export{R as default};
