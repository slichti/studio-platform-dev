import{w as h,u as f,L as g}from"./chunk-JZWAC4HX-Cg_gv2PJ.js";import{j as e}from"./vendor-puck-D_CB0wXL.js";import{C as j}from"./ChatWindow-BSmn-T_8.js";import{a as v}from"./api-ChCisjdG.js";import{a as o}from"./vendor-sentry-DugYw-Ne.js";import{t as b}from"./index-CNiSO0Vl.js";import{A as N}from"./arrow-left-1bqtOZ-B.js";import{S as y}from"./settings-Bx0CIaKD.js";import"./send-RRFVKZfr.js";import"./createLucideIcon-BOpDDQ2B.js";const R=h(function(){const{room:t,token:l,user:a,admins:c,apiUrl:d}=f(),[i,m]=o.useState(t.status||"open"),[n,x]=o.useState(t.priority||"normal"),[p,u]=o.useState(t.assignedToId||null),r=async s=>{try{await v(`/admin/chat/rooms/${t.id}`,l,{method:"PATCH",body:JSON.stringify(s)}),s.status&&m(s.status),s.priority&&x(s.priority),s.assignedToId!==void 0&&u(s.assignedToId)}catch{b.error("Failed to update ticket")}};return e.jsxs("div",{className:"h-[calc(100vh-64px)] bg-zinc-50 flex flex-col",children:[e.jsxs("header",{className:"bg-white border-b border-zinc-200 px-6 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(g,{to:"/admin/chat",className:"p-2 hover:bg-zinc-100 rounded-full text-zinc-500",children:e.jsx(N,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-zinc-900 leading-tight",children:t.name}),e.jsxs("div",{className:"text-xs text-zinc-500 flex items-center gap-2",children:[e.jsx("span",{className:"uppercase tracking-wider font-semibold",children:t.type}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"font-mono text-zinc-400",children:t.id.slice(0,8)})]})]})]}),t.type==="support"&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex flex-col items-end",children:e.jsxs("select",{value:i,onChange:s=>r({status:s.target.value}),className:`text-sm rounded-md border-zinc-200 py-1 pl-2 pr-6 font-medium ${i==="open"?"text-green-600 bg-green-50":i==="closed"?"text-zinc-600 bg-zinc-100":"text-blue-600 bg-blue-50"}`,children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"closed",children:"Closed"})]})}),e.jsx("div",{className:"flex flex-col items-end",children:e.jsxs("select",{value:n,onChange:s=>r({priority:s.target.value}),className:`text-sm rounded-md border-zinc-200 py-1 pl-2 pr-6 font-medium ${n==="urgent"?"text-red-700 bg-red-50":n==="high"?"text-orange-700 bg-orange-50":"text-zinc-600 bg-zinc-50"}`,children:[e.jsx("option",{value:"low",children:"Low Priority"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"High Priority"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})}),e.jsx("div",{className:"flex flex-col items-end",children:e.jsxs("select",{value:p||"",onChange:s=>r({assignedToId:s.target.value||null}),className:"text-sm rounded-md border-zinc-200 py-1 pl-2 pr-6 font-medium text-zinc-600 bg-zinc-50 focus:ring-2 focus:ring-zinc-950 focus:outline-none",children:[e.jsx("option",{value:"",children:"Unassigned"}),c?.map(s=>e.jsxs("option",{value:s.id,children:[s.profile?.firstName," ",s.profile?.lastName,s.id===a.id?" (You)":""]},s.id))]})})]}),!t.type.includes("support")&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"p-2 hover:bg-zinc-100 rounded-lg text-zinc-400",children:e.jsx(y,{size:20})})})]}),e.jsx("main",{className:"flex-1 p-6 flex justify-center overflow-hidden",children:e.jsx("div",{className:"w-full max-w-4xl h-full flex flex-col",children:e.jsx(j,{roomId:t.id,token:l,currentUser:a,wsUrl:d,tenantSlug:t.tenant?.slug})})})]})});export{R as default};
