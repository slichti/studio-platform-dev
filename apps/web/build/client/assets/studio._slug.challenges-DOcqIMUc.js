import{w as g,u as N,f as v,F as z}from"./chunk-JMJ3UQ3L-BFmd18Yu.js";import{j as e}from"./vendor-puck-DM_I7lvc.js";import{a as x}from"./vendor-livekit-D3VpklN2.js";import{c as p}from"./createLucideIcon-CcD9UNCP.js";import{P as y}from"./plus-Cj1r96us.js";import{F as w}from"./flame-Bl6dprxr.js";import{C}from"./clock-BEkBHqHW.js";import{T as o}from"./target-BMUiNu5f.js";import{S as k}from"./star-BKxM4wCu.js";import{C as M}from"./calendar-Lz5d58bs.js";import{C as P}from"./check-l4Pn_YVp.js";const D=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],h=p("medal",D);const F=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],r=p("trophy",F),R=g(function(){const{challenges:l,myProgress:j,leaderboard:n}=N();v();const[S,b]=x.useState(!1),[a,f]=x.useState("active"),c=l.filter(s=>s.status==="active"),d=l.filter(s=>s.status!=="active"),u=s=>j.find(t=>t.challengeId===s),i=s=>new Date(s).toLocaleDateString(void 0,{month:"short",day:"numeric"});return e.jsxs("div",{className:"flex flex-col h-full bg-zinc-50",children:[e.jsxs("header",{className:"bg-gradient-to-r from-amber-500 to-orange-600 px-6 py-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(r,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Challenges"}),e.jsx("p",{className:"text-white/80",children:"Complete challenges and earn rewards"})]})]}),e.jsxs("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-white text-amber-600 rounded-lg font-medium hover:bg-amber-50 flex items-center gap-2",children:[e.jsx(y,{size:16})," Create Challenge"]})]}),e.jsx("div",{className:"flex gap-4 mt-6",children:["active","leaderboard","past"].map(s=>e.jsxs("button",{onClick:()=>f(s),className:`px-4 py-2 rounded-lg font-medium transition ${a===s?"bg-white text-amber-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[s==="active"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{size:16,className:"inline mr-1"})," Active"]}),s==="leaderboard"&&e.jsxs(e.Fragment,{children:[e.jsx(h,{size:16,className:"inline mr-1"})," Leaderboard"]}),s==="past"&&e.jsxs(e.Fragment,{children:[e.jsx(C,{size:16,className:"inline mr-1"})," Past"]})]},s))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[a==="active"&&e.jsx("div",{className:"space-y-4",children:c.length===0?e.jsxs("div",{className:"text-center py-12 text-zinc-500",children:[e.jsx(o,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No active challenges"})]}):c.map(s=>{const t=u(s.id),m=t?Math.min(100,t.currentValue/s.goal*100):0;return e.jsx("div",{className:"bg-white rounded-xl border border-zinc-200 p-5 hover:shadow-md transition",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-100 rounded-xl",children:e.jsx(r,{size:24,className:"text-amber-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-zinc-900",children:s.title}),e.jsxs("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-medium flex items-center gap-1",children:[e.jsx(k,{size:12})," ",s.rewardPoints," pts"]})]}),e.jsx("p",{className:"text-sm text-zinc-500 mt-1",children:s.description}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs text-zinc-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(M,{size:12})," ",i(s.startDate)," - ",i(s.endDate)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(o,{size:12})," Goal: ",s.goal]})]}),t?e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsxs("span",{className:"font-medium text-zinc-700",children:[t.currentValue," / ",s.goal]}),e.jsxs("span",{className:"text-amber-600",children:[Math.round(m),"%"]})]}),e.jsx("div",{className:"h-2 bg-zinc-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${t.completed?"bg-green-500":"bg-amber-500"}`,style:{width:`${m}%`}})}),t.completed&&e.jsxs("p",{className:"text-xs text-green-600 mt-2 flex items-center gap-1",children:[e.jsx(P,{size:12})," Completed!"]})]}):e.jsxs(z,{method:"post",className:"mt-4",children:[e.jsx("input",{type:"hidden",name:"intent",value:"join"}),e.jsx("input",{type:"hidden",name:"challengeId",value:s.id}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-amber-500 text-white rounded-lg text-sm font-medium hover:bg-amber-600",children:"Join Challenge"})]})]})]})},s.id)})}),a==="leaderboard"&&e.jsxs("div",{className:"bg-white rounded-xl border border-zinc-200",children:[e.jsx("div",{className:"p-4 border-b border-zinc-100",children:e.jsxs("h2",{className:"font-bold text-zinc-900 flex items-center gap-2",children:[e.jsx(h,{size:18})," Top Challengers"]})}),e.jsx("div",{className:"divide-y divide-zinc-100",children:n.length===0?e.jsx("p",{className:"p-8 text-center text-zinc-500",children:"No leaderboard data"}):n.slice(0,10).map((s,t)=>e.jsxs("div",{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${t===0?"bg-amber-400 text-white":t===1?"bg-zinc-300 text-zinc-700":t===2?"bg-amber-600 text-white":"bg-zinc-100 text-zinc-500"}`,children:t+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-zinc-900",children:s.user?.profile?.firstName||s.user?.email}),e.jsxs("div",{className:"text-xs text-zinc-500",children:[s.completedCount," challenges completed"]})]}),e.jsxs("div",{className:"text-lg font-bold text-amber-600",children:[s.totalPoints," pts"]})]},t))})]}),a==="past"&&e.jsx("div",{className:"space-y-4",children:d.length===0?e.jsx("p",{className:"text-center py-12 text-zinc-500",children:"No past challenges"}):d.map(s=>e.jsx("div",{className:"bg-white rounded-xl border border-zinc-200 p-4 opacity-75",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(r,{size:20,className:"text-zinc-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-zinc-700",children:s.title}),e.jsx("p",{className:"text-xs text-zinc-500",children:i(s.endDate)})]})]})},s.id))})]})]})});export{R as default};
