import{w as j,d as u,u as b,L as N}from"./chunk-JMJ3UQ3L-Bs7kYf96.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{M as l}from"./mail-BV6Din89.js";import{M as r}from"./message-square-DExVz3B_.js";import"./createLucideIcon-DGNyYaKe.js";function i(...n){return n.filter(Boolean).join(" ")}const w=j(function(){const{emailStats:x,smsStats:m}=u(),[o,h]=b(),c=o.get("tab")||"email",d=s=>{h({tab:s})},a=c==="email"?x:m,t=c==="email";return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-zinc-900 mb-2",children:"Communications"}),e.jsx("p",{className:"text-zinc-500",children:"Track system-wide Email and SMS volume."})]}),e.jsxs("div",{className:"flex gap-2 bg-zinc-100 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>d("email"),className:i("px-4 py-2 text-sm font-medium rounded-md transition-all",t?"bg-white shadow-sm text-zinc-900":"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-200/50"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-4 w-4"}),"Email"]})}),e.jsx("button",{onClick:()=>d("sms"),className:i("px-4 py-2 text-sm font-medium rounded-md transition-all",t?"text-zinc-500 hover:text-zinc-700 hover:bg-zinc-200/50":"bg-white shadow-sm text-zinc-900"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-4 w-4"}),"SMS"]})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-zinc-200 shadow-sm flex items-center gap-4",children:[e.jsx("div",{className:i("p-3 rounded-full",t?"bg-blue-100":"bg-green-100"),children:t?e.jsx(l,{className:"h-6 w-6 text-blue-600"}):e.jsx(r,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-zinc-500",children:["Total ",t?"Emails":"SMS"," Sent"]}),e.jsx("p",{className:"text-3xl font-bold text-zinc-900",children:a.totalSent})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-zinc-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-zinc-50 px-6 py-4 border-b border-zinc-200",children:e.jsx("h3",{className:"font-semibold text-zinc-800",children:"Volume by Tenant"})}),e.jsxs("table",{className:"min-w-full divide-y divide-zinc-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-zinc-50",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-500 uppercase",children:"Tenant"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-zinc-500 uppercase",children:"Count"})]})}),e.jsxs("tbody",{className:"divide-y divide-zinc-200",children:[a.byTenant.map((s,p)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-3 text-sm font-medium text-zinc-900",children:e.jsx(N,{to:"/admin/tenants",className:"hover:underline",children:s.tenantName})}),e.jsx("td",{className:"px-6 py-3 text-sm text-right text-zinc-600 font-mono",children:s.count})]},p)),a.byTenant.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"px-6 py-8 text-center text-zinc-500",children:"No data available"})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-zinc-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-zinc-50 px-6 py-4 border-b border-zinc-200",children:e.jsx("h3",{className:"font-semibold text-zinc-800",children:"Recent Logs"})}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-zinc-50",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-zinc-500 uppercase",children:"Sent At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-zinc-500 uppercase",children:"Tenant"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-zinc-500 uppercase",children:t?"Subject":"Body"}),!t&&e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-zinc-500 uppercase",children:"Status"})]})}),e.jsxs("tbody",{className:"divide-y divide-zinc-200",children:[a.recentLogs.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-xs text-zinc-500 whitespace-nowrap",children:new Date(s.sentAt).toLocaleString()}),e.jsx("td",{className:"px-4 py-2 text-xs font-medium text-zinc-900",children:s.tenantName}),e.jsx("td",{className:"px-4 py-2 text-xs text-zinc-600 truncate max-w-[200px]",title:t?s.subject:s.body,children:t?s.subject:s.body}),!t&&e.jsx("td",{className:"px-4 py-2 text-xs",children:e.jsx("span",{className:i("px-2 py-0.5 rounded-full capitalize",s.status==="sent"?"bg-green-100 text-green-700":s.status==="failed"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"),children:s.status})})]},s.id)),a.recentLogs.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:t?3:4,className:"px-6 py-8 text-center text-zinc-500",children:"No recent logs"})})]})]})})]})]})]})});export{w as default};
