import{w as m,d as u}from"./chunk-JMJ3UQ3L-Dzyq37y6.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{C as d,a as h,b as j,d as x}from"./Card-IOiQbqBT.js";function p({children:t,className:r=""}){return e.jsx("div",{className:`w-full overflow-auto ${r}`,children:e.jsx("table",{className:"w-full text-sm text-left",children:t})})}function b({children:t}){return e.jsx("thead",{className:"text-xs text-zinc-500 uppercase bg-zinc-50/50 border-b border-zinc-200",children:t})}function l({children:t,className:r=""}){return e.jsx("tr",{className:`border-b border-zinc-100 last:border-0 hover:bg-zinc-50/50 transition-colors ${r}`,children:t})}function i({children:t,className:r=""}){return e.jsx("th",{className:`px-6 py-3 font-medium ${r}`,children:t})}function a({children:t,className:r="",...s}){return e.jsx("td",{className:`px-6 py-4 ${r}`,...s,children:t})}function f({children:t,variant:r="default",className:s=""}){const n={default:"bg-zinc-900 text-white",success:"bg-emerald-100 text-emerald-700 border-emerald-200",warning:"bg-amber-100 text-amber-700 border-amber-200",error:"bg-red-100 text-red-700 border-red-200",outline:"bg-transparent border-zinc-200 text-zinc-600 border"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${n[r]} ${s}`,children:t})}function c({title:t,value:r,status:s,trend:n}){const o={success:"text-emerald-600",warning:"text-amber-600",error:"text-red-600",neutral:"text-zinc-900"};return e.jsx(d,{children:e.jsx(x,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-zinc-500",children:t}),e.jsx("h4",{className:`text-2xl font-bold mt-2 ${o[s||"neutral"]}`,children:r})]}),n&&e.jsx("span",{className:"text-xs font-medium px-2 py-1 bg-zinc-100 rounded-full text-zinc-600",children:n})]})})})}function g({details:t}){if(!t)return e.jsx("span",{className:"text-zinc-400",children:"-"});try{const r=typeof t=="string"?JSON.parse(t):t,s=Object.keys(r);return s.length===0?e.jsx("span",{className:"text-zinc-400",children:"-"}):e.jsx("div",{className:"flex flex-wrap gap-1",children:s.map(n=>e.jsxs("div",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] bg-zinc-100 text-zinc-600 border border-zinc-200",children:[e.jsxs("span",{className:"font-medium mr-1",children:[n,":"]}),e.jsx("span",{className:"text-zinc-500 truncate max-w-[100px]",title:String(r[n]),children:String(r[n])})]},n))})}catch{return e.jsx("span",{className:"text-zinc-500 truncate",children:String(t)})}}const y=m(function(){const{logs:r,health:s}=u();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-zinc-900",children:"Dashboard Overview"}),e.jsx("p",{className:"text-zinc-500",children:"System performance and activity monitoring."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(c,{title:"System Status",value:s?.status==="error"?"Error":s?.status==="healthy"?"Operational":"Degraded",status:s?.status==="error"?"error":s?.status==="healthy"?"success":"warning",trend:s?.status==="error"?s?.error||"Unknown Error":`Latency: ${s?.dbLatencyMs||0}ms`}),e.jsx(c,{title:"Active Tenants",value:String(s?.activeTenants||0),status:"neutral"}),e.jsx(c,{title:"Total Users",value:String(s?.totalUsers||0),status:"neutral"}),e.jsx(c,{title:"Recent Errors",value:String(s?.recentErrors||0),status:s?.recentErrors>0?"error":"success",trend:"Last 24h"})]}),e.jsxs(d,{children:[e.jsx(h,{children:e.jsx(j,{children:"Recent Audit Logs"})}),e.jsx(x,{className:"p-0",children:e.jsxs(p,{children:[e.jsx(b,{children:e.jsxs(l,{children:[e.jsx(i,{children:"Time"}),e.jsx(i,{children:"Action"}),e.jsx(i,{children:"Target"}),e.jsx(i,{children:"Details"}),e.jsx(i,{children:"IP Address"})]})}),e.jsxs("tbody",{children:[r.map(n=>e.jsxs(l,{children:[e.jsx(a,{className:"font-mono text-xs text-zinc-500",children:new Date(n.createdAt).toISOString().replace("T"," ").substring(0,16)}),e.jsx(a,{children:e.jsx(f,{variant:"outline",children:n.action})}),e.jsx(a,{className:"font-mono text-xs",children:n.targetId||"-"}),e.jsx(a,{className:"max-w-md text-xs",children:e.jsx(g,{details:n.details})}),e.jsx(a,{className:"font-mono text-xs text-zinc-400",children:n.ipAddress})]},n.id)),r.length===0&&e.jsx(l,{children:e.jsx(a,{className:"text-center text-zinc-500 py-8",colSpan:5,children:"No recent activity found."})})]})]})})]})]})});export{y as default};
