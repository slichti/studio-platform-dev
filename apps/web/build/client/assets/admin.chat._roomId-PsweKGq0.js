import{w as h,u,L as g}from"./chunk-JMJ3UQ3L-DIHTCPR9.js";import{j as e}from"./vendor-puck-EFhZVjRu.js";import{C as f}from"./ChatWindow-CeOhxHnr.js";import{a as j}from"./api-D1U4i9fn.js";import{a as l}from"./vendor-sentry-BD1MTpLq.js";import{t as b}from"./index-0-uDmKCt.js";import{A as v}from"./arrow-left-CpQHwIrP.js";import{S as y}from"./settings-Cip7W-gj.js";import"./send-BNR5q9Wk.js";import"./createLucideIcon-DgXJrNmH.js";const $=h(function(){const{room:t,token:c,user:i,apiUrl:d}=u(),[r,m]=l.useState(t.status||"open"),[n,x]=l.useState(t.priority||"normal"),[o,p]=l.useState(t.assignedToId||null),a=async s=>{try{await j(`/chat/rooms/${t.id}`,c,{method:"PATCH",body:JSON.stringify(s)}),s.status&&m(s.status),s.priority&&x(s.priority),s.assignedToId!==void 0&&p(s.assignedToId)}catch{b.error("Failed to update ticket")}};return e.jsxs("div",{className:"h-[calc(100vh-64px)] bg-zinc-50 flex flex-col",children:[e.jsxs("header",{className:"bg-white border-b border-zinc-200 px-6 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(g,{to:"/admin/chat",className:"p-2 hover:bg-zinc-100 rounded-full text-zinc-500",children:e.jsx(v,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-zinc-900 leading-tight",children:t.name}),e.jsxs("div",{className:"text-xs text-zinc-500 flex items-center gap-2",children:[e.jsx("span",{className:"uppercase tracking-wider font-semibold",children:t.type}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"font-mono text-zinc-400",children:t.id.slice(0,8)})]})]})]}),t.type==="support"&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex flex-col items-end",children:e.jsxs("select",{value:r,onChange:s=>a({status:s.target.value}),className:`text-sm rounded-md border-zinc-200 py-1 pl-2 pr-6 font-medium ${r==="open"?"text-green-600 bg-green-50":r==="closed"?"text-zinc-600 bg-zinc-100":"text-blue-600 bg-blue-50"}`,children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"closed",children:"Closed"})]})}),e.jsx("div",{className:"flex flex-col items-end",children:e.jsxs("select",{value:n,onChange:s=>a({priority:s.target.value}),className:`text-sm rounded-md border-zinc-200 py-1 pl-2 pr-6 font-medium ${n==="urgent"?"text-red-700 bg-red-50":n==="high"?"text-orange-700 bg-orange-50":"text-zinc-600 bg-zinc-50"}`,children:[e.jsx("option",{value:"low",children:"Low Priority"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"High Priority"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})}),e.jsx("button",{onClick:()=>a({assignedToId:o?null:i.id}),className:"text-sm px-3 py-1 bg-white border border-zinc-200 rounded-md text-zinc-600 hover:bg-zinc-50",children:o?o===i.id?"Assigned to You":"Assigned":"Assign to Me"})]}),!t.type.includes("support")&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"p-2 hover:bg-zinc-100 rounded-lg text-zinc-400",children:e.jsx(y,{size:20})})})]}),e.jsx("main",{className:"flex-1 p-6 flex justify-center overflow-hidden",children:e.jsx("div",{className:"w-full max-w-4xl h-full flex flex-col",children:e.jsx(f,{roomId:t.id,token:c,currentUser:i,wsUrl:d})})})]})});export{$ as default};
