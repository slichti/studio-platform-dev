import{w as z,f as k,u as v,L as l}from"./chunk-JMJ3UQ3L-Dw7tS_gO.js";import{j as e}from"./vendor-puck-By1A5E5K.js";import{a as o}from"./vendor-sentry-BD1MTpLq.js";import{a as u}from"./api-OnQO3erh.js";import{t as w}from"./index-C_1Jy3MY.js";import{C as y}from"./Dialogs-LpmU1ed2.js";import{G as C}from"./globe-DV22Xz5a.js";import{T as D}from"./triangle-alert-CAr0UhK4.js";import{C as S}from"./circle-check-big-Cgvy_36a.js";import{R as h}from"./refresh-cw-DFGUiFki.js";import{T}from"./trash-2-DU-4PZMS.js";import{S as A}from"./shield-check-slWAEzyf.js";import{E}from"./external-link-B6GLlcGt.js";import"./Modal-D5keykku.js";import"./createLucideIcon-DgXJrNmH.js";const J=z(function(){const{tenant:a}=k(),{domainInfo:t}=v(),[n,r]=o.useState(!1),[d,p]=o.useState(""),[m,x]=o.useState(null),[b,c]=o.useState(!1);if(a.tier!=="scale")return e.jsxs("div",{className:"max-w-4xl mx-auto py-10",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(l,{to:`/studio/${a.slug}/settings`,className:"text-sm text-zinc-500 hover:text-zinc-800 dark:hover:text-zinc-300 mb-2 inline-block",children:"← Back to Settings"}),e.jsx("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Custom Domain"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white dark:from-purple-900/10 dark:to-zinc-900 border border-purple-100 dark:border-purple-800/30 rounded-xl p-8 text-center max-w-2xl mx-auto shadow-sm",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(C,{className:"w-8 h-8"})}),e.jsx("h2",{className:"text-xl font-bold text-zinc-900 dark:text-zinc-50 mb-2",children:"Connect Your Own Domain"}),e.jsxs("p",{className:"text-zinc-600 dark:text-zinc-400 mb-6",children:["Use a custom domain (e.g., ",e.jsx("span",{className:"font-mono text-purple-600 dark:text-purple-400 bg-purple-50 dark:bg-purple-900/30 px-1 rounded",children:"www.mystudio.com"}),") instead of ",e.jsx("span",{className:"font-mono",children:"studio-platform.com"}),". This feature is exclusive to the ",e.jsx("strong",{children:"Scale"})," plan."]}),e.jsx("div",{className:"flex justify-center gap-4",children:e.jsx(l,{to:`/studio/${a.slug}/settings/billing`,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2.5 rounded-lg font-medium transition-colors shadow-sm",children:"Upgrade to Scale"})})]})]});const f=async s=>{s.preventDefault(),r(!0),x(null);try{const i=await window.Clerk?.session?.getToken();await u("/tenant/domain",i,{method:"POST",headers:{"X-Tenant-Slug":a.slug},body:JSON.stringify({domain:d})}),window.location.reload()}catch(i){x(i.message||"Failed to add domain.")}finally{r(!1)}},g=async()=>{c(!0)},j=async()=>{r(!0);try{const s=await window.Clerk?.session?.getToken();await u("/tenant/domain",s,{method:"DELETE",headers:{"X-Tenant-Slug":a.slug}}),window.location.reload()}catch(s){w.error(s.message)}finally{r(!1),c(!1)}},N=!!t?.domain;return e.jsxs("div",{className:"max-w-4xl pb-10",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(l,{to:`/studio/${a.slug}/settings`,className:"text-sm text-zinc-500 hover:text-zinc-800 dark:hover:text-zinc-300 mb-2 inline-block",children:"← Back to Settings"}),e.jsx("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Custom Domain"}),e.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mt-1",children:"Connect your own web address to your studio portal."})]}),m&&e.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg mb-6 text-sm flex items-start gap-2 border border-red-100",children:[e.jsx(D,{className:"w-5 h-5 shrink-0"}),m]}),N?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${t.status==="active"?"bg-green-100 text-green-600":"bg-yellow-100 text-yellow-600"}`,children:t.status==="active"?e.jsx(S,{className:"w-6 h-6"}):e.jsx(h,{className:`w-6 h-6 ${t.status!=="active"?"animate-spin-slow":""}`})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-zinc-900 dark:text-zinc-100",children:t.domain}),e.jsx("p",{className:`text-sm font-medium ${t.status==="active"?"text-green-600":"text-yellow-600"}`,children:t.status==="active"?"Active & Secured":"Verification Pending"})]})]}),e.jsx("button",{onClick:g,disabled:n,className:"text-zinc-400 hover:text-red-600 p-2 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",title:"Remove Domain",children:e.jsx(T,{className:"w-5 h-5"})})]}),t.status!=="active"&&e.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 rounded-lg p-4 mb-4",children:[e.jsx("h3",{className:"font-semibold text-zinc-900 dark:text-zinc-100 text-sm mb-3",children:"DNS Configuration Required"}),e.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-4",children:"To verify ownership and route traffic, please add the following DNS records to your domain provider (e.g. GoDaddy, Namecheap)."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded p-3 text-sm font-mono flex justify-between items-center group",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-zinc-400 uppercase tracking-wide mb-1",children:"Type"}),e.jsx("div",{className:"font-semibold text-zinc-800 dark:text-zinc-200",children:"CNAME"})]}),e.jsxs("div",{className:"flex-[2] border-l border-zinc-100 dark:border-zinc-800 pl-4",children:[e.jsx("div",{className:"text-xs text-zinc-400 uppercase tracking-wide mb-1",children:"Name (Host)"}),e.jsx("div",{className:"font-semibold text-zinc-800 dark:text-zinc-200",children:t.domain})]}),e.jsxs("div",{className:"flex-[3] border-l border-zinc-100 dark:border-zinc-800 pl-4",children:[e.jsx("div",{className:"text-xs text-zinc-400 uppercase tracking-wide mb-1",children:"Content (Target)"}),e.jsx("div",{className:"font-semibold text-zinc-800 dark:text-zinc-200 break-all",children:"studio-platform-web.pages.dev"})]})]}),t.dns_records?.length>0&&t.dns_records.map((s,i)=>e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded p-3 text-sm font-mono flex justify-between items-center group",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-zinc-400 uppercase tracking-wide mb-1",children:"Type"}),e.jsx("div",{className:"font-semibold text-zinc-800 dark:text-zinc-200",children:"TXT"})]}),e.jsxs("div",{className:"flex-[2] border-l border-zinc-100 dark:border-zinc-800 pl-4",children:[e.jsx("div",{className:"text-xs text-zinc-400 uppercase tracking-wide mb-1",children:"Name"}),e.jsx("div",{className:"font-semibold text-zinc-800 dark:text-zinc-200",children:s.txt_name||"_cf-custom-hostname"})]}),e.jsxs("div",{className:"flex-[3] border-l border-zinc-100 dark:border-zinc-800 pl-4",children:[e.jsx("div",{className:"text-xs text-zinc-400 uppercase tracking-wide mb-1",children:"Content"}),e.jsx("div",{className:"font-semibold text-zinc-800 dark:text-zinc-200 break-all",children:s.txt_value})]})]},i))]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:()=>window.location.reload(),className:"text-xs font-medium text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(h,{className:"w-3 h-3"})," Check Verification Status"]})})]}),t.status==="active"&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 p-4 rounded-lg flex items-start gap-3",children:[e.jsx(A,{className:"w-5 h-5 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm",children:"SSL Certificate Active"}),e.jsx("p",{className:"text-sm mt-1 opacity-90",children:"Your custom domain is secured with a managed SSL certificate. It may take up to 24 hours for DNS to propagate globally."}),e.jsxs("a",{href:`https://${t.domain}`,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 mt-3 text-sm font-medium hover:underline",children:["Visit ",t.domain," ",e.jsx(E,{className:"w-3 h-3"})]})]})]})]})}):e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 mb-4",children:"Add a Custom Domain"}),e.jsx("form",{onSubmit:f,className:"max-w-md",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-zinc-500 uppercase tracking-wide mb-2",children:"Domain Name"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:d,onChange:s=>p(s.target.value),className:"flex-1 px-3 py-2 border border-zinc-300 dark:border-zinc-700 rounded-md bg-white dark:bg-zinc-800 outline-none focus:ring-2 focus:ring-blue-500",placeholder:"studio.example.com",disabled:n}),e.jsx("button",{type:"submit",disabled:n||!d,className:"bg-zinc-900 dark:bg-zinc-50 text-white dark:text-zinc-900 px-4 py-2 rounded-md font-medium text-sm hover:bg-zinc-800 dark:hover:bg-zinc-200 disabled:opacity-50",children:n?"Adding...":"Add Domain"})]}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-2",children:["We recommend using a subdomain like ",e.jsx("span",{className:"font-mono",children:"app.yourdomain.com"})," or ",e.jsx("span",{className:"font-mono",children:"studio.yourdomain.com"}),"."]})]})})]}),e.jsx(y,{isOpen:b,onClose:()=>c(!1),onConfirm:j,title:"Disconnect Domain",message:"Are you sure? This will disconnect your custom domain immediately. Your studio will revert to the default subdomain.",confirmText:"Disconnect",isDestructive:!0})]})});export{J as default};
