import{w as m,u as x,d as p,r as u,L as h}from"./chunk-JMJ3UQ3L-OilvkdUQ.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{C as f}from"./ChatWindow-B7YTSiei.js";import{a as g}from"./api-D1U4i9fn.js";import{A as j}from"./arrow-left-C8PBcL2X.js";import{C as b}from"./circle-check-big-CLM4Ciwy.js";import{C as z}from"./clock-_aUOwCMK.js";import"./send-BS3f6L2P.js";import"./createLucideIcon-Bxh06Jdl.js";const A=m(function(){const{room:s,token:i,user:c,apiUrl:n}=x(),{slug:l}=p(),[t,d]=u.useState(s.status||"open"),a=s.metadata?.source==="widget"||s.customerEmail,r=async o=>{try{await g(`/chat/rooms/${s.id}`,i,{method:"PATCH",body:JSON.stringify({status:o})}),d(o)}catch{alert("Failed to update status")}};return e.jsxs("div",{className:"h-[calc(100vh-64px)] bg-zinc-50 flex flex-col",children:[e.jsxs("header",{className:"bg-white border-b border-zinc-200 px-6 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(h,{to:`/studio/${l}/chat`,className:"p-2 hover:bg-zinc-100 rounded-full text-zinc-500",children:e.jsx(j,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-zinc-900 leading-tight",children:s.name}),e.jsxs("div",{className:"text-xs text-zinc-500 flex items-center gap-2",children:[e.jsx("span",{className:"uppercase tracking-wider font-semibold",children:a?"Customer Inquiry":"Platform Ticket"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"font-mono text-zinc-400",children:s.id.slice(0,8)})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${t==="open"?"bg-green-100 text-green-700":t==="closed"?"bg-zinc-100 text-zinc-600":"bg-blue-50 text-blue-700"}`,children:t}),a&&t!=="closed"&&e.jsxs("button",{onClick:()=>r("closed"),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-md text-sm hover:bg-green-700",children:[e.jsx(b,{size:14}),"Resolve"]}),a&&t==="closed"&&e.jsxs("button",{onClick:()=>r("open"),className:"flex items-center gap-1 px-3 py-1.5 bg-zinc-100 text-zinc-700 rounded-md text-sm hover:bg-zinc-200",children:[e.jsx(z,{size:14}),"Reopen"]})]})]}),e.jsx("main",{className:"flex-1 p-6 flex justify-center overflow-hidden",children:e.jsx("div",{className:"w-full max-w-4xl h-full flex flex-col",children:e.jsx(f,{roomId:s.id,token:i,currentUser:c,wsUrl:n})})})]})});export{A as default};
