import{w as h,v as m,I as z,r as b,z as g}from"./chunk-JMJ3UQ3L-DmAaMJDT.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{a as k}from"./api-piI5qlNr.js";import{u as j}from"./chunk-OT5FTIRN-DtMOiK0s.js";import"./index-B-TQESlZ.js";const A=h(function(){const{members:s,error:i,errorDetails:a}=m(),{roles:d}=z(),o=d&&d.includes("owner"),{getToken:x}=j(),[u,c]=b.useState(null),p=async(t,r)=>{if(confirm(`Are you sure you want to change this user's role to ${r}?`)){c(t);try{const n=await x(),l=await k(`/members/${t}/role`,n,{method:"PATCH",headers:{"X-Tenant-Slug":window.location.pathname.split("/")[2]},body:JSON.stringify({role:r})});l.error?alert(l.error):window.location.reload()}catch(n){alert(n.message)}finally{c(null)}}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"People"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{placeholder:"Search members...",className:"px-3 py-2 border border-zinc-200 dark:border-zinc-800 rounded-md text-sm min-w-[250px] bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100"}),e.jsx("button",{className:"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 px-4 py-2 rounded-md hover:bg-zinc-800 dark:hover:bg-zinc-200 text-sm font-medium",children:"Add Member"})]})]}),i&&e.jsxs("div",{className:"bg-red-50 text-red-700 p-4 rounded mb-4 text-sm",children:["Failed to load members: ",i,a&&e.jsx("pre",{className:"mt-2 text-xs bg-red-100 p-2 rounded overflow-auto",children:JSON.stringify(a,null,2)})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg overflow-hidden shadow-sm",children:[e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-zinc-50 dark:bg-zinc-800/50 border-b border-zinc-200 dark:border-zinc-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-zinc-500 dark:text-zinc-400",children:"No members found yet."})}):s.map(t=>e.jsxs("tr",{className:"hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-zinc-900 dark:text-zinc-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center text-xs font-bold uppercase",children:t.user.email.substring(0,2)}),e.jsx(g,{to:`${t.id}`,className:"hover:text-blue-600 dark:hover:text-blue-400 hover:underline",children:t.user.profile?.firstName?`${t.user.profile.firstName} ${t.user.profile.lastName}`:"Unknown Name"})]})}),e.jsx("td",{className:"px-6 py-4 text-zinc-600 dark:text-zinc-400 text-sm",children:t.user.email}),e.jsx("td",{className:"px-6 py-4",children:o?e.jsxs("select",{disabled:u===t.id,className:"text-sm border-zinc-200 dark:border-zinc-700 rounded p-1 bg-zinc-50 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100",value:t.roles.find(r=>r.role==="owner"||r.role==="instructor")?.role||"student",onChange:r=>p(t.id,r.target.value),children:[e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"instructor",children:"Instructor"}),e.jsx("option",{value:"owner",children:"Owner"})]}):e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-zinc-100 dark:bg-zinc-800 text-zinc-800 dark:text-zinc-200 capitalize",children:t.roles.map(r=>r.role).join(", ")||"Student"})}),e.jsx("td",{className:"px-6 py-4 text-zinc-500 dark:text-zinc-400 text-sm",children:new Date(t.joinedAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{className:"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 text-sm",children:"Edit"})})]},t.id))})]}),e.jsxs("div",{className:"p-4 border-t border-zinc-100 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-800/50 text-center text-xs text-zinc-500 dark:text-zinc-400",children:["Showing ",s.length," member",s.length===1?"":"s"]})]})]})});export{A as default};
