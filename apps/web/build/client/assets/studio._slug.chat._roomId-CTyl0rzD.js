import{w as d,u as x,d as p,L as u}from"./chunk-EPOLDU6W-QEwcj8It.js";import{j as e}from"./vendor-puck-d5q8lBvG.js";import{C as h}from"./ChatWindow-DNnOnEHj.js";import{a as f}from"./api-D1U4i9fn.js";import{r as g}from"./vendor-charts-C-svo-KU.js";import{t as j}from"./index-Ca5h0yF9.js";import{A as b}from"./arrow-left-CifcE9PA.js";import{C as z}from"./circle-check-big-4vjiwfXL.js";import{C}from"./clock-DFbJ6nku.js";import"./send-DiA6Xyku.js";import"./createLucideIcon-Ccni2AnG.js";const U=d(function(){const{room:s,token:o,user:c,apiUrl:n}=x(),{slug:l}=p(),[t,m]=g.useState(s.status||"open"),r=s.metadata?.source==="widget"||s.customerEmail,a=async i=>{try{await f(`/chat/rooms/${s.id}`,o,{method:"PATCH",body:JSON.stringify({status:i})}),m(i)}catch{j.error("Failed to update status")}};return e.jsxs("div",{className:"h-[calc(100vh-64px)] bg-zinc-50 flex flex-col",children:[e.jsxs("header",{className:"bg-white border-b border-zinc-200 px-6 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{to:`/studio/${l}/chat`,className:"p-2 hover:bg-zinc-100 rounded-full text-zinc-500",children:e.jsx(b,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-zinc-900 leading-tight",children:s.name}),e.jsxs("div",{className:"text-xs text-zinc-500 flex items-center gap-2",children:[e.jsx("span",{className:"uppercase tracking-wider font-semibold",children:r?"Customer Inquiry":"Platform Ticket"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"font-mono text-zinc-400",children:s.id.slice(0,8)})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${t==="open"?"bg-green-100 text-green-700":t==="closed"?"bg-zinc-100 text-zinc-600":"bg-blue-50 text-blue-700"}`,children:t}),r&&t!=="closed"&&e.jsxs("button",{onClick:()=>a("closed"),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-md text-sm hover:bg-green-700",children:[e.jsx(z,{size:14}),"Resolve"]}),r&&t==="closed"&&e.jsxs("button",{onClick:()=>a("open"),className:"flex items-center gap-1 px-3 py-1.5 bg-zinc-100 text-zinc-700 rounded-md text-sm hover:bg-zinc-200",children:[e.jsx(C,{size:14}),"Reopen"]})]})]}),e.jsx("main",{className:"flex-1 p-6 flex justify-center overflow-hidden",children:e.jsx("div",{className:"w-full max-w-4xl h-full flex flex-col",children:e.jsx(h,{roomId:s.id,token:o,currentUser:c,wsUrl:n})})})]})});export{U as default};
