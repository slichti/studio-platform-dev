import{p as u,q as N,G as f,a as m,j as e,at as l,K as v,au as z,av as o,ag as w,aw as h,ax as y,a1 as C,y as P,O as D}from"./vendor-react-D59Q0YKK.js";import"./vendor-puck-RN2Ey-av.js";import"./vendor-charts-Dp-zC2wb.js";const I=u(function(){const{challenges:r,myProgress:p,leaderboard:n}=N();f();const[S,j]=m.useState(!1),[a,b]=m.useState("active"),c=r.filter(s=>s.status==="active"),d=r.filter(s=>s.status!=="active"),g=s=>p.find(t=>t.challengeId===s),i=s=>new Date(s).toLocaleDateString(void 0,{month:"short",day:"numeric"});return e.jsxs("div",{className:"flex flex-col h-full bg-zinc-50",children:[e.jsxs("header",{className:"bg-gradient-to-r from-amber-500 to-orange-600 px-6 py-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(l,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Challenges"}),e.jsx("p",{className:"text-white/80",children:"Complete challenges and earn rewards"})]})]}),e.jsxs("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-white text-amber-600 rounded-lg font-medium hover:bg-amber-50 flex items-center gap-2",children:[e.jsx(v,{size:16})," Create Challenge"]})]}),e.jsx("div",{className:"flex gap-4 mt-6",children:["active","leaderboard","past"].map(s=>e.jsxs("button",{onClick:()=>b(s),className:`px-4 py-2 rounded-lg font-medium transition ${a===s?"bg-white text-amber-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[s==="active"&&e.jsxs(e.Fragment,{children:[e.jsx(z,{size:16,className:"inline mr-1"})," Active"]}),s==="leaderboard"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{size:16,className:"inline mr-1"})," Leaderboard"]}),s==="past"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{size:16,className:"inline mr-1"})," Past"]})]},s))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[a==="active"&&e.jsx("div",{className:"space-y-4",children:c.length===0?e.jsxs("div",{className:"text-center py-12 text-zinc-500",children:[e.jsx(h,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No active challenges"})]}):c.map(s=>{const t=g(s.id),x=t?Math.min(100,t.currentValue/s.goal*100):0;return e.jsx("div",{className:"bg-white rounded-xl border border-zinc-200 p-5 hover:shadow-md transition",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-100 rounded-xl",children:e.jsx(l,{size:24,className:"text-amber-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-zinc-900",children:s.title}),e.jsxs("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-medium flex items-center gap-1",children:[e.jsx(y,{size:12})," ",s.rewardPoints," pts"]})]}),e.jsx("p",{className:"text-sm text-zinc-500 mt-1",children:s.description}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs text-zinc-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{size:12})," ",i(s.startDate)," - ",i(s.endDate)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{size:12})," Goal: ",s.goal]})]}),t?e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsxs("span",{className:"font-medium text-zinc-700",children:[t.currentValue," / ",s.goal]}),e.jsxs("span",{className:"text-amber-600",children:[Math.round(x),"%"]})]}),e.jsx("div",{className:"h-2 bg-zinc-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${t.completed?"bg-green-500":"bg-amber-500"}`,style:{width:`${x}%`}})}),t.completed&&e.jsxs("p",{className:"text-xs text-green-600 mt-2 flex items-center gap-1",children:[e.jsx(P,{size:12})," Completed!"]})]}):e.jsxs(D,{method:"post",className:"mt-4",children:[e.jsx("input",{type:"hidden",name:"intent",value:"join"}),e.jsx("input",{type:"hidden",name:"challengeId",value:s.id}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-amber-500 text-white rounded-lg text-sm font-medium hover:bg-amber-600",children:"Join Challenge"})]})]})]})},s.id)})}),a==="leaderboard"&&e.jsxs("div",{className:"bg-white rounded-xl border border-zinc-200",children:[e.jsx("div",{className:"p-4 border-b border-zinc-100",children:e.jsxs("h2",{className:"font-bold text-zinc-900 flex items-center gap-2",children:[e.jsx(o,{size:18})," Top Challengers"]})}),e.jsx("div",{className:"divide-y divide-zinc-100",children:n.length===0?e.jsx("p",{className:"p-8 text-center text-zinc-500",children:"No leaderboard data"}):n.slice(0,10).map((s,t)=>e.jsxs("div",{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${t===0?"bg-amber-400 text-white":t===1?"bg-zinc-300 text-zinc-700":t===2?"bg-amber-600 text-white":"bg-zinc-100 text-zinc-500"}`,children:t+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-zinc-900",children:s.user?.profile?.firstName||s.user?.email}),e.jsxs("div",{className:"text-xs text-zinc-500",children:[s.completedCount," challenges completed"]})]}),e.jsxs("div",{className:"text-lg font-bold text-amber-600",children:[s.totalPoints," pts"]})]},t))})]}),a==="past"&&e.jsx("div",{className:"space-y-4",children:d.length===0?e.jsx("p",{className:"text-center py-12 text-zinc-500",children:"No past challenges"}):d.map(s=>e.jsx("div",{className:"bg-white rounded-xl border border-zinc-200 p-4 opacity-75",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{size:20,className:"text-zinc-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-zinc-700",children:s.title}),e.jsx("p",{className:"text-xs text-zinc-500",children:i(s.endDate)})]})]})},s.id))})]})]})});export{I as default};
