import{a as r,j as e,bX as H,bY as Z,T as Q,Z as ee,az as Y,bf as P,a0 as L,a1 as te,bh as se,p as ae,_ as ne,$ as ie,b5 as re}from"./vendor-react-D59Q0YKK.js";import{R as O,L as oe,X as R,Y as S,C as E,T as F,f as le,h as A,A as B,a as C,b as ce}from"./vendor-charts-Dp-zC2wb.js";import{a as G}from"./api-D1U4i9fn.js";import{P as I}from"./PrivacyBlur-DiS0hyj7.js";import"./vendor-puck-RN2Ey-av.js";function de(){const[c,x]=r.useState("growth"),[n,m]=r.useState([]),[z,N]=r.useState(""),[l,D]=r.useState(!1);r.useEffect(()=>{const t=localStorage.getItem("studio_projection_scenarios");if(t)try{m(JSON.parse(t))}catch(a){console.error("Failed to load scenarios",a)}},[]);const[s,y]=r.useState({studentCount:50,avgMembershipPrice:120,avgDropInPrice:25,membershipSplit:60,classesPerDropIn:4.5,rent:2e3,payrollPerClass:40,classesPerMonth:60,otherExpenses:500,churnRate:5,growthRate:8,seasonalityResult:15,seasonalityEnabled:!1}),p=r.useMemo(()=>{const t=Math.round(s.studentCount*(s.membershipSplit/100)),a=s.studentCount-t,o=t*s.avgMembershipPrice,i=a*s.classesPerDropIn*s.avgDropInPrice,d=o+i,g=s.classesPerMonth*s.payrollPerClass,f=s.rent+g+s.otherExpenses,v=d-f,k=d>0?v/d*100:0;return{totalRevenue:d,totalExpenses:f,profit:v,margin:k,breakdown:{membershipRevenue:o,dropInRevenue:i}}},[s]),T=r.useMemo(()=>{const t=[],a=Math.max(s.studentCount*3,200),o=Math.ceil(a/20);for(let i=0;i<=a;i+=o){const d=Math.round(i*(s.membershipSplit/100)),g=i-d,f=d*s.avgMembershipPrice+g*s.classesPerDropIn*s.avgDropInPrice,v=s.classesPerMonth*s.payrollPerClass,k=s.rent+v+s.otherExpenses;t.push({students:i,revenue:f,expenses:k,profit:f-k})}return t},[s]),u=r.useMemo(()=>{const t=[];let a=s.studentCount;const o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=new Date().getMonth();for(let d=0;d<24;d++){const g=(i+d)%12,f=o[g];let v=1;s.seasonalityEnabled&&(g===5||g===6||g===7)&&(v=1-s.seasonalityResult/100);const k=a*(s.churnRate/100),U=s.growthRate*v;a=Math.max(0,a-k+U);const _=Math.round(a*(s.membershipSplit/100)),X=a-_,K=_*s.avgMembershipPrice+X*s.classesPerDropIn*s.avgDropInPrice,q=s.classesPerMonth*s.payrollPerClass,W=s.rent+q+s.otherExpenses;t.push({month:d===0?"Now":d<=11?f:`${f} '25`,students:Math.round(a),revenue:K,expenses:W,profit:K-W})}return t},[s]),h=(t,a)=>{if(typeof a=="boolean"){y(i=>({...i,[t]:a}));return}const o=typeof a=="string"?parseFloat(a)||0:a;y(i=>({...i,[t]:o}))},M=()=>{if(!z)return;const t=[...n,{name:z,data:s}];m(t),localStorage.setItem("studio_projection_scenarios",JSON.stringify(t)),N(""),D(!1)},j=t=>{y(n[t].data)},$=t=>{const a=n.filter((o,i)=>i!==t);m(a),localStorage.setItem("studio_projection_scenarios",JSON.stringify(a))};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 animate-in fade-in slide-in-from-bottom-4",children:[e.jsx("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm h-fit space-y-8",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-zinc-900 dark:text-zinc-100 font-bold text-lg",children:[e.jsx(H,{className:"text-blue-600"}),e.jsx("h3",{children:"Simulator Inputs"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg text-zinc-500",children:e.jsx(Z,{size:18})}),e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-xl p-2 hidden group-hover:block z-50",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-400 px-2 py-1 mb-1",children:"LOAD SCENARIO"}),n.length===0&&e.jsx("div",{className:"px-2 py-1 text-xs text-zinc-500 italic",children:"No saved scenarios"}),n.map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5 hover:bg-zinc-50 dark:hover:bg-zinc-800 rounded cursor-pointer group/item",children:[e.jsx("span",{onClick:()=>j(a),className:"text-sm truncate flex-1",children:t.name}),e.jsx(Q,{size:12,className:"text-red-400 opacity-0 group-hover/item:opacity-100 hover:text-red-600",onClick:o=>{o.stopPropagation(),$(a)}})]},a))]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>D(!l),className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg text-blue-600",children:e.jsx(ee,{size:18})}),l&&e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-64 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-xl p-3 z-50",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-400 mb-2",children:"SAVE CURRENT SCENARIO"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 min-w-0 bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded px-2 py-1 text-sm",placeholder:"Scenario Name...",value:z,onChange:t=>N(t.target.value)}),e.jsx("button",{onClick:M,disabled:!z,className:"bg-blue-600 text-white px-3 py-1 rounded text-xs font-bold disabled:opacity-50",children:"Save"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-xs font-bold text-zinc-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(Y,{size:14})," Current Status"]}),e.jsx(b,{label:"Total Active Students",value:s.studentCount,onChange:t=>h("studentCount",t)}),e.jsx(b,{label:"Avg. Membership Price ($)",value:s.avgMembershipPrice,onChange:t=>h("avgMembershipPrice",t)}),e.jsx(b,{label:"Avg. Drop-In Price ($)",value:s.avgDropInPrice,onChange:t=>h("avgDropInPrice",t)}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300 flex justify-between",children:[e.jsx("span",{children:"Membership Split"}),e.jsxs("span",{className:"text-zinc-500",children:[s.membershipSplit,"% Members"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",value:s.membershipSplit,onChange:t=>h("membershipSplit",t.target.value),className:"w-full accent-blue-600"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-800 space-y-4",children:[e.jsxs("h4",{className:"text-xs font-bold text-purple-500 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(P,{size:14})," Growth & Churn"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(b,{label:"New Students / Mo",value:s.growthRate,onChange:t=>h("growthRate",t)}),e.jsx(b,{label:"Churn Rate (%)",value:s.churnRate,onChange:t=>h("churnRate",t)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-50 dark:bg-zinc-800 rounded-lg border border-zinc-100 dark:border-zinc-700",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("label",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Seasonality"}),e.jsx("div",{className:"text-xs text-zinc-500",children:"Summer slump simulation"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[s.seasonalityEnabled&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-amber-600 bg-amber-50 px-2 py-0.5 rounded-full border border-amber-100",children:["-",s.seasonalityResult,"%"]}),e.jsx("button",{onClick:()=>h("seasonalityEnabled",!s.seasonalityEnabled),className:`w-10 h-6 rounded-full transition-colors relative ${s.seasonalityEnabled?"bg-blue-600":"bg-zinc-200 dark:bg-zinc-700"}`,children:e.jsx("div",{className:`w-4 h-4 rounded-full bg-white absolute top-1 transition-transform ${s.seasonalityEnabled?"left-5":"left-1"}`})})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-800 space-y-4",children:[e.jsxs("h4",{className:"text-xs font-bold text-red-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(L,{size:14})," Expenses (Monthly)"]}),e.jsx(b,{label:"Rent & Utilities",value:s.rent,onChange:t=>h("rent",t)}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(b,{label:"Pay / Class",value:s.payrollPerClass,onChange:t=>h("payrollPerClass",t)}),e.jsx(b,{label:"Classes / Mo",value:s.classesPerMonth,onChange:t=>h("classesPerMonth",t)})]}),e.jsx(b,{label:"Other Expenses",value:s.otherExpenses,onChange:t=>h("otherExpenses",t)})]})]})]})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"flex bg-zinc-100 dark:bg-zinc-800 p-1 rounded-lg w-fit",children:[e.jsxs("button",{onClick:()=>x("growth"),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all flex items-center gap-2 ${c==="growth"?"bg-white dark:bg-zinc-700 shadow text-zinc-900 dark:text-zinc-100":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700"}`,children:[e.jsx(te,{size:16}),"24-Month Forecast"]}),e.jsxs("button",{onClick:()=>x("static"),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all flex items-center gap-2 ${c==="static"?"bg-white dark:bg-zinc-700 shadow text-zinc-900 dark:text-zinc-100":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700"}`,children:[e.jsx(P,{size:16}),"Profitability Curve"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm",children:[e.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:"Current Revenue"}),e.jsxs("div",{className:"text-3xl font-black text-zinc-900 dark:text-zinc-100",children:["$",p.totalRevenue.toLocaleString(void 0,{maximumFractionDigits:0}),e.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"/mo"})]}),e.jsxs("div",{className:"text-xs text-zinc-500 mt-2 flex gap-2",children:["Margins: ",e.jsxs("span",{className:p.margin>20?"text-green-600":"text-zinc-600",children:[p.margin.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm",children:[e.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:"12-Month Outlook"}),e.jsxs("div",{className:"text-3xl font-black text-blue-600 flex items-center gap-2",children:["$",u[11].revenue.toLocaleString(void 0,{maximumFractionDigits:0}),u[11].revenue>p.totalRevenue?e.jsx(P,{size:20}):e.jsx(se,{size:20})]}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-2",children:[u[11].students," Active Students (+",u[11].students-s.studentCount,")"]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm",children:[e.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:"Net Income (12mo)"}),e.jsxs("div",{className:`text-3xl font-black ${u[11].profit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[u[11].profit>=0?"+":"","$",u[11].profit.toLocaleString(void 0,{maximumFractionDigits:0})]}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-2",children:["Projected for ",u[11].month]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm h-[450px]",children:[e.jsx("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:c==="growth"?"24-Month Growth Forecast":"Profitability Analysis"}),e.jsx(O,{width:"100%",height:"100%",minHeight:300,children:c==="growth"?e.jsxs(oe,{data:u,margin:{top:10,right:30,left:10,bottom:0},children:[e.jsx(R,{dataKey:"month",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#71717A"}}),e.jsx(S,{yAxisId:"left",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#71717A"},tickFormatter:t=>`$${t/1e3}k`}),e.jsx(S,{yAxisId:"right",orientation:"right",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#71717A"}}),e.jsx(E,{vertical:!1,strokeDasharray:"3 3",stroke:"#E4E4E7"}),e.jsx(F,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)"},formatter:(t,a)=>[a==="Students"?t:`$${Number(t).toLocaleString()}`,a]}),e.jsx(le,{}),e.jsx(A,{yAxisId:"left",type:"monotone",dataKey:"revenue",name:"Revenue",stroke:"#3B82F6",strokeWidth:3,dot:!1}),e.jsx(A,{yAxisId:"left",type:"monotone",dataKey:"expenses",name:"Expenses",stroke:"#EF4444",strokeWidth:2,strokeDasharray:"5 5",dot:!1}),e.jsx(A,{yAxisId:"right",type:"monotone",dataKey:"students",name:"Students",stroke:"#8B5CF6",strokeWidth:2,dot:!1})]}):e.jsxs(B,{data:T,margin:{top:10,right:30,left:10,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorProfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})]}),e.jsx(R,{dataKey:"students",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#71717A"},label:{value:"Number of Students",position:"insideBottomRight",offset:-10,fontSize:12,fill:"#71717A"}}),e.jsx(S,{tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#71717A"},tickFormatter:t=>`$${t/1e3}k`}),e.jsx(E,{vertical:!1,strokeDasharray:"3 3",stroke:"#E4E4E7"}),e.jsx(F,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)"},formatter:t=>[`$${Number(t).toLocaleString()}`,""]}),e.jsx(C,{type:"monotone",dataKey:"revenue",name:"Revenue",stroke:"#3B82F6",fillOpacity:1,fill:"url(#colorRevenue)",strokeWidth:2}),e.jsx(C,{type:"monotone",dataKey:"expenses",name:"Expenses",stroke:"#EF4444",fill:"none",strokeWidth:2,strokeDasharray:"5 5"}),e.jsx(C,{type:"monotone",dataKey:"profit",name:"Net Profit",stroke:"#10B981",fillOpacity:1,fill:"url(#colorProfit)",strokeWidth:2}),e.jsx(ce,{x:s.studentCount,stroke:"#F59E0B",strokeDasharray:"3 3",label:{position:"top",value:"Current",fill:"#F59E0B",fontSize:12}})]})})]})]})]})}function b({label:c,value:x,onChange:n}){return e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:c}),e.jsx("input",{type:"number",value:x,onChange:m=>n(m.target.value),className:"w-full px-3 py-2 bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all"})]})}function xe(c=!1){const[x,n]=r.useState(!1);return r.useEffect(()=>{if(typeof window<"u"){const m=localStorage.getItem("admin_show_financials")==="true";n(!m)}},[]),{isPrivacyMode:x}}const ge=ae(function(){const{tenant:x}=ne(),[n,m]=r.useState("financials"),[z,N]=r.useState(!0),[l,D]=r.useState(null),[s,y]=r.useState(null),[p,T]=r.useState("30d"),[u,h]=r.useState(!1);r.useEffect(()=>{h(!!localStorage.getItem("impersonation_token"))},[]);const{isPrivacyMode:M}=xe(),j=u&&M;r.useEffect(()=>{$()},[n,p]);const $=async()=>{N(!0);const t=new Date,a=new Date;p==="30d"&&a.setDate(t.getDate()-30),p==="90d"&&a.setDate(t.getDate()-90),p==="1y"&&a.setFullYear(t.getFullYear()-1);const o=await window.Clerk?.session?.getToken();try{if(n==="financials"){const i=await G(`/reports/revenue?startDate=${a.toISOString()}&endDate=${t.toISOString()}`,o);D(i)}else{const i=await G(`/reports/attendance?startDate=${a.toISOString()}&endDate=${t.toISOString()}`,o);y(i)}}catch(i){console.error("Failed to fetch report data",i)}finally{N(!1)}};return z&&!l&&!s?e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx(ie,{className:"animate-spin text-zinc-400"})}):e.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Analytics"}),e.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:"Performance metrics and insights."})]}),e.jsxs("div",{className:"flex bg-zinc-100 dark:bg-zinc-800 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>m("financials"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${n==="financials"?"bg-white dark:bg-zinc-700 shadow text-zinc-900 dark:text-zinc-100":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700"}`,children:"Financials"}),e.jsx("button",{onClick:()=>m("attendance"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${n==="attendance"?"bg-white dark:bg-zinc-700 shadow text-zinc-900 dark:text-zinc-100":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700"}`,children:"Attendance"}),e.jsx("button",{onClick:()=>m("projections"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${n==="projections"?"bg-white dark:bg-zinc-700 shadow text-zinc-900 dark:text-zinc-100":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700"}`,children:"Projections"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n==="financials"&&l&&e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Gross Volume (Period)",value:e.jsx(I,{revealed:!j,placeholder:"***",children:`$${(l.grossVolume/100).toFixed(2)}`}),icon:e.jsx(L,{size:20,className:"text-green-500"})}),e.jsx(w,{title:"Monthly Recurring Revenue",value:e.jsx(I,{revealed:!j,placeholder:"***",children:`$${(l.mrr/100).toFixed(2)}`}),subtext:"Active subscriptions snapshot",icon:e.jsx(P,{size:20,className:"text-blue-500"})}),e.jsx(w,{title:"Sales Breakdown",value:e.jsx(I,{revealed:!j,placeholder:"***",children:`${(l.breakdown.retail/(l.grossVolume||1)*100).toFixed(0)}% Retail`}),subtext:`$${(l.breakdown.packs/100).toFixed(0)} Packs`,icon:e.jsx(L,{size:20,className:"text-purple-500"})})]}),n==="attendance"&&s&&e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Total Bookings",value:s.totalBookings,icon:e.jsx(Y,{size:20,className:"text-blue-500"})}),e.jsx(w,{title:"Check-in Rate",value:`${(s.totalCheckins/(s.totalBookings||1)*100).toFixed(0)}%`,subtext:`${s.totalCheckins} Checked-in`,icon:e.jsx(re,{size:20,className:"text-green-500"})})]})]}),n==="projections"?e.jsx(de,{}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm relative",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:n==="financials"?"Revenue Trends":"Attendance Trends"}),j&&n==="financials"&&e.jsx("div",{className:"absolute inset-0 z-10 backdrop-blur-md bg-white/30 dark:bg-black/30 flex items-center justify-center rounded-xl",children:e.jsx("div",{className:"bg-white dark:bg-zinc-800 px-4 py-2 rounded-lg shadow lg text-sm font-medium",children:"Privacy Mode Enabled"})}),e.jsxs("div",{className:"h-80 w-full flex items-center justify-center text-zinc-400 text-sm",children:[n==="financials"&&l?.chartData?J(l.chartData)?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-2",children:"No revenue data for this period"}),e.jsx("div",{className:"text-xs text-zinc-500",children:"Record sales in POS to see trends"})]}):e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(B,{data:l.chartData,children:[e.jsx(E,{strokeDasharray:"3 3",vertical:!1,stroke:"#E4E4E7"}),e.jsx(R,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#71717A",fontSize:12},dy:10,tickFormatter:t=>V(t)}),e.jsx(S,{axisLine:!1,tickLine:!1,tick:{fill:"#71717A",fontSize:12}}),e.jsx(F,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:t=>[`$${Number(t).toFixed(2)}`,"Revenue"],labelFormatter:t=>new Date(t).toLocaleDateString()}),e.jsx(C,{type:"monotone",dataKey:"value",stroke:"#3B82F6",fill:"#EFF6FF",strokeWidth:2})]})}):null,n==="attendance"&&s?.chartData?J(s.chartData)?e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"mb-2",children:"No attendance data for this period"})}):e.jsx(O,{width:"100%",height:"100%",children:e.jsxs(B,{data:s.chartData,children:[e.jsx(E,{strokeDasharray:"3 3",vertical:!1,stroke:"#E4E4E7"}),e.jsx(R,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#71717A",fontSize:12},dy:10,tickFormatter:t=>V(t)}),e.jsx(S,{axisLine:!1,tickLine:!1,tick:{fill:"#71717A",fontSize:12}}),e.jsx(F,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:t=>[t,"Attendees"],labelFormatter:t=>new Date(t).toLocaleDateString()}),e.jsx(C,{type:"monotone",dataKey:"value",stroke:"#10B981",fill:"#ECFDF5",strokeWidth:2})]})}):null]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm relative",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:n==="financials"?"Top Selling":"Top Classes"}),j&&n==="financials"&&e.jsx("div",{className:"absolute inset-0 z-10 backdrop-blur-md bg-white/30 dark:bg-black/30 flex items-center justify-center rounded-xl"}),n==="attendance"&&s?.topClasses&&e.jsxs("div",{className:"space-y-4",children:[s.topClasses.map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium truncate max-w-[180px]",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-zinc-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500",style:{width:`${Math.min(t.attendees/50*100,100)}%`}})}),e.jsx("span",{className:"text-xs text-zinc-500 w-6 text-right",children:t.attendees})]})]},a)),s.topClasses.length===0&&e.jsx("div",{className:"text-center text-sm text-zinc-500 py-8",children:"No data available"})]}),n==="financials"&&l?.breakdown&&e.jsxs("div",{className:"space-y-4",children:[Object.entries(l.breakdown).map(([t,a])=>{const o=Number(a);if(o===0)return null;const i=l.grossVolume||1,d=o/i*100;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium capitalize text-zinc-700 dark:text-zinc-300",children:t}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-24 h-2 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${d}%`}})}),e.jsxs("span",{className:"text-xs font-mono text-zinc-500 w-16 text-right",children:["$",(o/100).toFixed(2)]})]})]},t)}),Object.values(l.breakdown).every(t=>t===0)&&e.jsx("div",{className:"text-center text-sm text-zinc-500 py-8",children:"No specific sales data recorded."})]})]})]})]})});function w({title:c,value:x,subtext:n,icon:m}){return e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-2 bg-zinc-50 dark:bg-zinc-800 rounded-lg",children:m})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:c}),e.jsx("div",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:x}),n&&e.jsx("p",{className:"text-xs text-zinc-500 mt-2",children:n})]})]})}function J(c){return!c||c.length===0?!0:c.every(x=>x.value===0)}function V(c){const x=new Date(c);return`${x.getMonth()+1}/${x.getDate()}`}export{ge as default};
