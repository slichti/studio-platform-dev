import{w,u as y,b as P,L as C}from"./chunk-JMJ3UQ3L-D6qeZyod.js";import{j as e}from"./vendor-puck-C9fWOLBg.js";import{a as b}from"./api-D1U4i9fn.js";import{a as n}from"./vendor-sentry-D-95zPX-.js";import{C as E,E as O}from"./Dialogs-5SVcnpQt.js";import{G as S}from"./globe-DWo01Qbe.js";import{P as p}from"./plus-D93jR3m4.js";import{F as f}from"./file-text-CNQPL-k0.js";import{E as T}from"./eye-off-DnQbrab3.js";import{E as D}from"./eye-CFAXC14I.js";import{E as L}from"./external-link-CWLWe6FF.js";import{P as $}from"./pen-BetY0dA4.js";import{T as F}from"./trash-2-BbVhgg9k.js";import{u as A}from"./chunk-OT5FTIRN-B828R5Z6.js";import"./Modal-AfMv2c7i.js";import"./createLucideIcon-Qes_Sb9D.js";import"./index-B5GN05BP.js";import"./vendor-charts-8PN1tkI-.js";const se=w(function(){const{pages:z,error:h}=y(),[r,o]=n.useState(z||[]),{getToken:m}=A();P();const[j,l]=n.useState(!1),[i,x]=n.useState({title:"",slug:""}),[d,u]=n.useState(null),[g,c]=n.useState({isOpen:!1,message:""}),k=async()=>{if(!(!i.title||!i.slug))try{const t=await m(),s=await b("/platform-pages/pages",t,{method:"POST",body:JSON.stringify(i)});o([...r,s]),l(!1),x({title:"",slug:""})}catch(t){c({isOpen:!0,message:"Failed to create page: "+t.message})}},N=async()=>{if(d)try{const t=await m();await b(`/platform-pages/pages/${d}`,t,{method:"DELETE"}),o(r.filter(s=>s.id!==d)),u(null)}catch(t){c({isOpen:!0,message:"Failed to delete: "+t.message})}},v=async t=>{try{const s=await m();await b(`/platform-pages/pages/${t.id}/publish`,s,{method:"POST",body:JSON.stringify({isPublished:!t.isPublished})}),o(r.map(a=>a.id===t.id?{...a,isPublished:!a.isPublished}:a))}catch(s){c({isOpen:!0,message:"Failed to update: "+s.message})}};return h?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg",children:["Error: ",h]})}):e.jsxs("div",{className:"p-8 max-w-6xl mx-auto",children:[e.jsx(E,{isOpen:!!d,onClose:()=>u(null),onConfirm:N,title:"Delete Page",message:"Are you sure you want to delete this page? This cannot be undone.",confirmText:"Delete",isDestructive:!0}),e.jsx(O,{isOpen:g.isOpen,onClose:()=>c({...g,isOpen:!1}),message:g.message}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[e.jsx(S,{className:"text-blue-600"}),"Platform Website Builder"]}),e.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mt-1",children:"Manage main site pages (Home, Pricing, About, etc.)"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:[e.jsx(p,{size:18}),"New Page"]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-xl p-6 w-full max-w-md shadow-xl",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 dark:text-zinc-100",children:"Create New Platform Page"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Page Title"}),e.jsx("input",{type:"text",value:i.title,onChange:t=>x({...i,title:t.target.value}),className:"w-full border border-zinc-300 dark:border-zinc-700 rounded-lg px-3 py-2 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100",placeholder:"e.g., About Us"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"URL Slug"}),e.jsx("input",{type:"text",value:i.slug,onChange:t=>x({...i,slug:t.target.value.toLowerCase().replace(/\s+/g,"-")}),className:"w-full border border-zinc-300 dark:border-zinc-700 rounded-lg px-3 py-2 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100",placeholder:"e.g., about"}),e.jsxs("p",{className:"text-xs text-zinc-400 mt-1",children:["studio-platform.com/",i.slug||"slug"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Page"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-6 mb-8 text-white",children:[e.jsx("h2",{className:"font-semibold mb-3",children:"Common Pages"}),e.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Create pages for these common routes if they don't exist:"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["home","pricing","about","contact","features"].map(t=>{const s=r.some(a=>a.slug===t);return e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm ${s?"bg-white/20":"bg-white/10 opacity-60"}`,children:["/",t," ",s?"âœ“":""]},t)})})]}),r.length===0?e.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-xl p-12 text-center",children:[e.jsx(f,{size:48,className:"mx-auto text-zinc-300 dark:text-zinc-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"No platform pages yet"}),e.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-4",children:"Create your first page to customize the main site"}),e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg",children:[e.jsx(p,{size:18}),"Create First Page"]})]}):e.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-zinc-200 dark:border-zinc-800 divide-y divide-zinc-200 dark:divide-zinc-800",children:r.map(t=>e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${t.isPublished?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500"}`,children:e.jsx(f,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:t.title}),e.jsxs("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:["/",t.slug]})]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${t.isPublished?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400"}`,children:t.isPublished?"Published":"Draft"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>v(t),className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg text-zinc-600 dark:text-zinc-400",title:t.isPublished?"Unpublish":"Publish",children:t.isPublished?e.jsx(T,{size:18}):e.jsx(D,{size:18})}),e.jsx("a",{href:t.slug==="home"?"/":`/${t.slug}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg text-zinc-600 dark:text-zinc-400",children:e.jsx(L,{size:18})}),e.jsx(C,{to:`/admin/website/edit/${t.id}`,className:"p-2 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400",children:e.jsx($,{size:18})}),e.jsx("button",{onClick:()=>u(t.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400",children:e.jsx(F,{size:18})})]})]},t.id))})]})});export{se as default};
