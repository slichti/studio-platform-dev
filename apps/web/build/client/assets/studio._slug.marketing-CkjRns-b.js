import{w as U,d as Y,r as l}from"./chunk-JMJ3UQ3L-Dzyq37y6.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{a as u}from"./api-piI5qlNr.js";import{M as _}from"./Modal-Ccs7c619.js";import{T as Z}from"./triangle-alert-eH89_QPn.js";import{C as K}from"./circle-check-big--AT2vWr6.js";import{X as Q}from"./x-BEWYwdxC.js";import{M as ee}from"./mail-Ci_j9QIs.js";import{c as C}from"./createLucideIcon-CNXPjsb6.js";import{P as te}from"./plus-ZxFZXXXb.js";import{C as se}from"./clock-Bxd0hqXE.js";import{P as ne}from"./pencil-BBZH-oKk.js";import{u as ae}from"./chunk-OT5FTIRN-VRdL-y8m.js";import"./index-B3WcaCfs.js";import"./index-D9_Tf6xB.js";const ie=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],z=C("send",ie);const le=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],re=C("sparkles",le);const oe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ce=C("zap",oe),Te=U(function(){const{campaigns:P,automations:F,slug:m}=Y(),{getToken:g}=ae(),[x,k]=l.useState("broadcast"),[j,y]=l.useState(null),[S,J]=l.useState(P),[T,E]=l.useState(""),[M,A]=l.useState(""),[O,$]=l.useState(!1),[r,v]=l.useState({ageMin:0,ageMax:100,preset:"all"}),[p,N]=l.useState(F||[]),[b,h]=l.useState(null),[n,a]=l.useState({subject:"",content:"",isEnabled:!1,timingType:"immediate",timingValue:0,triggerEvent:"",triggerCondition:"{}",channels:["email"],couponConfig:{enabled:!1,type:"percent",value:20,validityDays:7}}),[o,f]=l.useState({isOpen:!1,automationId:null,email:""}),[D,I]=l.useState(!1),c=(t,s="success")=>{y({message:t,type:s}),setTimeout(()=>y(null),3e3)},[me,xe]=l.useState("");async function B(t){t.preventDefault(),$(!0);try{const s=await g(),i=await u("/marketing",s,{method:"POST",headers:{"X-Tenant-Slug":m},body:JSON.stringify({subject:T,content:M,filters:r.preset==="all"?{}:{ageMin:r.ageMin,ageMax:r.ageMax}})});if(i.error)c(i.error,"error");else{c(`Campaign Sent to ${i.count} recipients!`),E(""),A("");const d=await u("/marketing",s,{headers:{"X-Tenant-Slug":m}});J(d.campaigns||[])}}catch(s){c("Failed to send: "+s.message,"error")}finally{$(!1)}}async function H(){try{const t=await g(),s=await u("/marketing/automations",t,{method:"POST",headers:{"X-Tenant-Slug":m},body:JSON.stringify({triggerEvent:"new_student",subject:"New Automation"})});if(s.error)throw new Error(s.error);N([...p,s]),h(s),a({subject:s.subject,content:s.content,isEnabled:s.isEnabled,timingType:s.timingType||"immediate",timingValue:s.timingValue||0,triggerEvent:s.triggerEvent,triggerCondition:JSON.stringify(s.triggerCondition||{},null,2),channels:s.channels||["email"],couponConfig:s.couponConfig?{...s.couponConfig,enabled:!0}:{enabled:!1,type:"percent",value:20,validityDays:7}})}catch(t){c("Failed to create: "+t.message,"error")}}async function L(t){if(t.preventDefault(),!!b)try{let s=null;try{s=n.triggerCondition?JSON.parse(n.triggerCondition):null}catch{c("Invalid JSON in Condition field","error");return}const i=await g(),d={...n,triggerCondition:s},G=await u(`/marketing/automations/${b.id}`,i,{method:"PATCH",headers:{"X-Tenant-Slug":m},body:JSON.stringify(d)});N(p.map(w=>w.id===b.id?G:w)),h(null),c("Automation updated successfully")}catch(s){c("Failed to update: "+s.message,"error")}}function X(t){f({isOpen:!0,automationId:t,email:o.email})}async function q(t){if(t.preventDefault(),!(!o.automationId||!o.email)){I(!0);try{const s=await g();await u(`/marketing/automations/${o.automationId}/test`,s,{method:"POST",headers:{"X-Tenant-Slug":m},body:JSON.stringify({email:o.email})}),c("Test email sent!"),f({...o,isOpen:!1})}catch(s){c("Failed to test: "+s.message,"error")}finally{I(!1)}}}const V={new_student:"New Student Welcome",birthday:"Birthday Greeting",absent:"Win-back (Absent)",class_attended:"Class Follow-up",order_completed:"Order Follow-up",trial_ending:"Trial Ending",subscription_renewing:"Subscription Renewing"},R=t=>t.timingType==="immediate"?"Immediate":t.timingType==="delay"?`Delay: ${t.timingValue} hours`:t.timingType==="before"?`${t.timingValue} hours Before`:t.timingType==="after"?`${t.timingValue} hours After`:t.delayHours>0?`Delay: ${t.delayHours} hours`:"Immediate";async function W(t){try{const s=!t.isEnabled;N(p.map(d=>d.id===t.id?{...d,isEnabled:s}:d));const i=await g();await u(`/marketing/automations/${t.id}`,i,{method:"PATCH",headers:{"X-Tenant-Slug":m},body:JSON.stringify({isEnabled:s})})}catch(s){c("Failed to toggle: "+s.message,"error"),N(p.map(i=>i.id===t.id?{...i,isEnabled:!t.isEnabled}:i))}}return e.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4 relative",children:[j&&e.jsxs("div",{className:`fixed top-4 right-4 z-[100] px-4 py-3 rounded-lg shadow-lg border flex items-center gap-3 animate-in slide-in-from-right fade-in duration-300 ${j.type==="error"?"bg-red-50 border-red-200 text-red-800":"bg-emerald-50 border-emerald-200 text-emerald-800"}`,children:[j.type==="error"?e.jsx(Z,{className:"h-5 w-5"}):e.jsx(K,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium text-sm",children:j.message}),e.jsx("button",{onClick:()=>y(null),className:"ml-2 hover:opacity-70",children:e.jsx(Q,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-zinc-900",children:"Marketing"}),e.jsx("p",{className:"text-zinc-500",children:"Engage your students with broadcasts and automations."})]}),e.jsxs("div",{className:"flex gap-4 mb-6 border-b border-zinc-200",children:[e.jsxs("button",{onClick:()=>k("broadcast"),className:`pb-3 px-1 font-medium text-sm transition-colors relative ${x==="broadcast"?"text-blue-600":"text-zinc-500 hover:text-zinc-700"}`,children:["Broadcasts",x==="broadcast"&&e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600"})]}),e.jsxs("button",{onClick:()=>k("automation"),className:`pb-3 px-1 font-medium text-sm transition-colors relative ${x==="automation"?"text-blue-600":"text-zinc-500 hover:text-zinc-700"}`,children:["Automations",x==="automation"&&e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600"})]})]}),x==="broadcast"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg border border-zinc-200 p-6 shadow-sm",children:[e.jsxs("h2",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5 text-blue-600"}),"New Broadcast"]}),e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Subject Line"}),e.jsx("input",{type:"text",value:T,onChange:t=>E(t.target.value),className:"w-full border border-zinc-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. November Newsletter",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Message Content"}),e.jsx("textarea",{value:M,onChange:t=>A(t.target.value),className:"w-full border border-zinc-300 rounded-lg px-3 py-2 h-48 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Write your message...",required:!0}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("p",{className:"text-xs text-zinc-400",children:"Plain text only for MVP."}),e.jsxs("div",{className:"text-xs text-zinc-500",children:["Variables: ",e.jsx("span",{className:"font-mono bg-zinc-100 px-1 rounded",children:"{{firstName}}"})," ",e.jsx("span",{className:"font-mono bg-zinc-100 px-1 rounded",children:"{{studioName}}"})]})]})]}),e.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-semibold text-zinc-800 mb-3",children:"Target Audience"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{label:"All Students",value:"all",min:0,max:100},{label:"Youth (<18)",value:"youth",min:0,max:17},{label:"Adults (18-64)",value:"adults",min:18,max:64},{label:"Seniors (65+)",value:"seniors",min:65,max:100},{label:"Custom",value:"custom",min:r.ageMin,max:r.ageMax}].map(t=>e.jsx("button",{type:"button",onClick:()=>v({...r,preset:t.value,ageMin:t.min,ageMax:t.max}),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-colors ${r.preset===t.value?"bg-blue-600 text-white":"bg-white border border-zinc-300 text-zinc-600 hover:bg-zinc-50"}`,children:t.label},t.value))}),r.preset==="custom"&&e.jsxs("div",{className:"flex items-center gap-4 animate-in fade-in slide-in-from-top-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-[10px] uppercase font-bold text-zinc-500 mb-1",children:"Min Age"}),e.jsx("input",{type:"number",value:r.ageMin,onChange:t=>v({...r,ageMin:Number(t.target.value)}),className:"w-full border border-zinc-300 rounded px-2 py-1 text-sm outline-none"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-[10px] uppercase font-bold text-zinc-500 mb-1",children:"Max Age"}),e.jsx("input",{type:"number",value:r.ageMax,onChange:t=>v({...r,ageMax:Number(t.target.value)}),className:"w-full border border-zinc-300 rounded px-2 py-1 text-sm outline-none"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:O,className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:O?"Sending...":e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"h-4 w-4"}),"Send Broadcast"]})})})]})]})}),e.jsxs("div",{className:"bg-zinc-50 rounded-lg border border-zinc-200 p-6 h-fit",children:[e.jsx("h3",{className:"font-semibold text-zinc-700 mb-4",children:"Recent Campaigns"}),e.jsxs("div",{className:"space-y-4",children:[S.length===0&&e.jsx("p",{className:"text-sm text-zinc-500 italic",children:"No campaigns yet."}),S.map(t=>e.jsxs("div",{className:"bg-white border border-zinc-200 rounded p-3 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:"font-medium text-sm text-zinc-900 line-clamp-1",children:t.subject}),e.jsx("span",{className:`text-[10px] uppercase font-bold px-1.5 py-0.5 rounded ${t.status==="sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:t.status})]}),e.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:new Date(t.sentAt).toLocaleDateString()}),e.jsxs("div",{className:"flex gap-3 text-xs text-zinc-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"h-3 w-3"}),t.stats?.sent||0," Sent"]}),t.filters&&e.jsxs("span",{className:"flex items-center gap-1 bg-zinc-100 px-1.5 rounded",children:[t.filters.ageMin,"-",t.filters.ageMax," yrs"]})]})]},t.id))]})]})]}),x==="automation"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-zinc-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"font-semibold text-lg flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5 text-amber-500"}),"Active Automations"]}),e.jsx("p",{className:"text-sm text-zinc-500",children:"These emails are sent automatically based on student activity."})]}),e.jsxs("button",{onClick:H,className:"flex items-center gap-2 bg-zinc-900 text-white px-3 py-1.5 rounded-lg text-sm font-medium hover:bg-zinc-800",children:[e.jsx(te,{className:"h-4 w-4"}),"New Automation"]})]}),e.jsx("div",{className:"flex flex-col gap-2",children:p.map(t=>e.jsxs("div",{className:"group border border-zinc-200 rounded-lg px-4 py-3 flex items-center justify-between hover:border-blue-300 transition-colors bg-white",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[e.jsx("div",{className:`p-1.5 rounded-full shrink-0 ${t.isEnabled?"bg-blue-100 text-blue-600":"bg-zinc-100 text-zinc-400"}`,children:e.jsx(re,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-zinc-900 whitespace-nowrap shrink-0",children:V[t.triggerEvent]||t.triggerEvent||t.triggerType}),e.jsxs("span",{className:"flex items-center gap-1 bg-zinc-50 px-2 py-0.5 rounded text-xs text-zinc-500 whitespace-nowrap shrink-0 border border-zinc-100",children:[e.jsx(se,{className:"w-3 h-3"}),R(t)]}),e.jsx("span",{className:"text-sm text-zinc-500 truncate min-w-0",children:t.subject})]})]}),e.jsxs("div",{className:"flex items-center gap-4 shrink-0 ml-4",children:[e.jsx("button",{onClick:()=>W(t),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${t.isEnabled?"bg-blue-600":"bg-zinc-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t.isEnabled?"translate-x-6":"translate-x-1"}`})}),e.jsx("button",{onClick:()=>X(t.id),className:"text-xs text-zinc-500 hover:text-zinc-800 p-2 hover:bg-zinc-100 rounded",title:"Send Test",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{h(t),a({subject:t.subject,content:t.content,isEnabled:t.isEnabled,timingType:t.timingType||(t.delayHours>0?"delay":"immediate"),timingValue:t.timingValue||t.delayHours||0,triggerEvent:t.triggerEvent||t.triggerType,triggerCondition:JSON.stringify(t.triggerCondition||{},null,2),channels:t.channels||["email"],couponConfig:t.couponConfig?{...t.couponConfig,enabled:!0}:{enabled:!1,type:"percent",value:20,validityDays:7}})},className:"text-xs text-zinc-500 hover:text-blue-600 p-2 hover:bg-blue-50 rounded",title:"Edit",children:e.jsx(ne,{className:"h-4 w-4"})})]})]},t.id))})]})}),e.jsx(_,{isOpen:o.isOpen,onClose:()=>f({...o,isOpen:!1}),title:"Send Test Email",children:e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"To Email Address"}),e.jsx("input",{type:"email",value:o.email,onChange:t=>f({...o,email:t.target.value}),className:"w-full border border-zinc-300 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"you@example.com",autoFocus:!0,required:!0}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"This will send a real email to the address above."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>f({...o,isOpen:!1}),className:"px-4 py-2 text-sm text-zinc-600 hover:text-zinc-900",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:D,className:"bg-zinc-900 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-zinc-800 disabled:opacity-50",children:D?"Sending...":"Send Test"})]})]})}),e.jsx(_,{isOpen:!!b,onClose:()=>h(null),title:"Edit Automation",maxWidth:"max-w-2xl",children:b&&e.jsxs("form",{onSubmit:L,className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto max-h-[70vh] pr-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-zinc-50 p-3 rounded-lg border border-zinc-200",children:[e.jsx("span",{className:"text-sm font-medium text-zinc-900",children:"Automation Status"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.isEnabled,onChange:t=>a({...n,isEnabled:t.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-zinc-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-zinc-700",children:n.isEnabled?"Enabled":"Disabled"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Trigger Event"}),e.jsx("select",{value:n.triggerEvent,onChange:t=>a({...n,triggerEvent:t.target.value}),className:"w-full border border-zinc-300 rounded px-2 py-1.5 text-sm bg-white",children:Object.entries(V).map(([t,s])=>e.jsx("option",{value:t,children:s},t))})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Timing Rule"}),e.jsxs("select",{value:n.timingType,onChange:t=>a({...n,timingType:t.target.value}),className:"w-full border border-zinc-300 rounded px-2 py-1.5 text-sm bg-white",children:[e.jsx("option",{value:"immediate",children:"Immediately"}),e.jsx("option",{value:"delay",children:"Delay (Wait)"}),e.jsx("option",{value:"before",children:"Before Event"}),e.jsx("option",{value:"after",children:"After Event"})]})]}),n.timingType!=="immediate"&&e.jsxs("div",{className:"w-20",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Hours"}),e.jsx("input",{type:"number",min:"0",value:n.timingValue,onChange:t=>a({...n,timingValue:parseInt(t.target.value)||0}),className:"w-full border border-zinc-300 rounded px-2 py-1.5 text-sm bg-white"})]})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Trigger Conditions (JSON)"}),e.jsx("textarea",{value:n.triggerCondition,onChange:t=>a({...n,triggerCondition:t.target.value}),className:"w-full border border-zinc-300 rounded px-2 py-1 text-xs font-mono h-12 bg-zinc-50",placeholder:'{ "planId": "..." }'})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-500",children:"Channels"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm bg-white border border-zinc-200 rounded px-3 py-1.5",children:[e.jsx("input",{type:"checkbox",checked:n.channels.includes("email"),onChange:t=>{const s=n.channels,i=t.target.checked?[...s,"email"]:s.filter(d=>d!=="email");a({...n,channels:i})},className:"rounded text-blue-600 focus:ring-blue-500"}),"Email"]}),e.jsx("span",{className:"text-xs text-zinc-400",children:"SMS Coming Soon"})]})]}),e.jsxs("div",{className:"bg-zinc-50 p-3 rounded-lg border border-zinc-200",children:[e.jsxs("label",{className:"flex items-center gap-2 mb-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.couponConfig.enabled,onChange:t=>a({...n,couponConfig:{...n.couponConfig,enabled:t.target.checked}}),className:"w-4 h-4 text-green-600 rounded focus:ring-green-500"}),e.jsx("span",{className:"text-sm font-medium text-zinc-900",children:"Include Discount Coupon"})]}),n.couponConfig.enabled&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 animate-in fade-in slide-in-from-top-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-medium text-zinc-500 mb-1",children:"Type"}),e.jsxs("select",{value:n.couponConfig.type,onChange:t=>a({...n,couponConfig:{...n.couponConfig,type:t.target.value}}),className:"w-full border border-zinc-300 rounded px-2 py-1 text-xs",children:[e.jsx("option",{value:"percent",children:"Percent (%)"}),e.jsx("option",{value:"amount",children:"Amount ($)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-medium text-zinc-500 mb-1",children:"Value"}),e.jsx("input",{type:"number",value:n.couponConfig.value,onChange:t=>a({...n,couponConfig:{...n.couponConfig,value:parseInt(t.target.value)||0}}),className:"w-full border border-zinc-300 rounded px-2 py-1 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-medium text-zinc-500 mb-1",children:"Validity (Days)"}),e.jsx("input",{type:"number",value:n.couponConfig.validityDays,onChange:t=>a({...n,couponConfig:{...n.couponConfig,validityDays:parseInt(t.target.value)||7}}),className:"w-full border border-zinc-300 rounded px-2 py-1 text-xs"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Subject Line"}),e.jsx("input",{type:"text",value:n.subject,onChange:t=>a({...n,subject:t.target.value}),className:"w-full border border-zinc-300 rounded px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Content"}),e.jsx("textarea",{value:n.content,onChange:t=>a({...n,content:t.target.value}),className:"w-full border border-zinc-300 rounded px-3 py-2 h-32 outline-none focus:ring-2 focus:ring-blue-500 font-mono text-xs"}),e.jsxs("div",{className:"flex gap-2 mt-1 text-[10px] text-zinc-500 flex-wrap",children:[e.jsx("span",{children:"Variables:"}),e.jsx("code",{className:"bg-zinc-100 px-1 rounded",children:"{{firstName}}"}),e.jsx("code",{className:"bg-zinc-100 px-1 rounded",children:"{{lastName}}"}),e.jsx("code",{className:"bg-zinc-100 px-1 rounded",children:"{{email}}"}),e.jsx("code",{className:"bg-zinc-100 px-1 rounded",children:"{{title}}"}),e.jsx("code",{className:"bg-zinc-100 px-1 rounded",children:"{{address}}"}),n.couponConfig.enabled&&e.jsx("code",{className:"bg-yellow-100 text-yellow-800 px-1 rounded",children:"{{coupon_code}}"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 mt-2 border-t border-zinc-100",children:[e.jsx("button",{type:"button",onClick:()=>h(null),className:"px-4 py-2 text-sm text-zinc-600 hover:text-zinc-900 border border-zinc-200 rounded-lg hover:bg-zinc-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 shadow-sm",children:"Save Changes"})]})]})})]})});export{Te as default};
