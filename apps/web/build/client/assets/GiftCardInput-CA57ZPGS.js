import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r}from"./chunk-JMJ3UQ3L-DmAaMJDT.js";import{a as h}from"./api-piI5qlNr.js";import{C as j}from"./circle-check-Ct3joEXe.js";import{C as p}from"./circle-x-B7pAMd5Y.js";import{T as C}from"./ticket-BzV2cjp6.js";import{L as k}from"./loader-circle-COV7T8XM.js";function A({token:m,slug:x,onApply:u,onRemove:f}){const[a,i]=r.useState(""),[n,o]=r.useState(!1),[d,s]=r.useState(null),[l,c]=r.useState(null),b=async()=>{if(a){o(!0),s(null);try{const t=await h(`/gift-cards/validate/${a}`,m,{headers:{"X-Tenant-Slug":x}});t.error?s(t.error):(c(t),u(t))}catch{s("Invalid or expired gift card code.")}finally{o(!1)}}},g=()=>{c(null),i(""),f()};return l?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800 rounded-xl animate-in zoom-in-95",children:[e.jsxs("div",{className:"flex items-center gap-3 text-emerald-700 dark:text-emerald-400",children:[e.jsx(j,{size:18}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold",children:l.code}),e.jsxs("span",{className:"text-[10px] uppercase font-bold tracking-tighter opacity-70",children:["Applied: $",(l.balance/100).toFixed(2)," Credit"]})]})]}),e.jsx("button",{onClick:g,className:"p-1 hover:bg-emerald-100 dark:hover:bg-emerald-800 rounded text-emerald-600",children:e.jsx(p,{size:18})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-zinc-400"}),e.jsx("input",{type:"text",placeholder:"Wanna use a Gift Card?",value:a,onChange:t=>i(t.target.value.toUpperCase()),className:"w-full pl-10 pr-24 py-3 bg-zinc-100 dark:bg-zinc-800 border-none rounded-2xl text-sm focus:ring-2 focus:ring-blue-500 outline-none uppercase font-mono tracking-wider"}),e.jsx("button",{onClick:b,disabled:n||!a,className:"absolute right-2 top-1/2 -translate-y-1/2 px-4 py-1.5 bg-zinc-900 dark:bg-zinc-100 dark:text-zinc-900 text-white text-xs font-bold rounded-xl disabled:opacity-50",children:n?e.jsx(k,{size:14,className:"animate-spin"}):"APPLY"})]}),d&&e.jsxs("p",{className:"text-[10px] text-red-500 font-bold uppercase tracking-tight ml-4 flex items-center gap-1",children:[e.jsx(p,{size:10})," ",d]})]})}export{A as G};
