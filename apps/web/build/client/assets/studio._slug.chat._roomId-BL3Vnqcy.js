import{p as x,q as m,W as p,a as u,j as e,L as h,J as f,ab as g,ag as j}from"./vendor-react-D59Q0YKK.js";import{C as b}from"./ChatWindow-ByQfC7U1.js";import{a as z}from"./api-D1U4i9fn.js";import"./vendor-puck-RN2Ey-av.js";import"./vendor-charts-Dp-zC2wb.js";const $=x(function(){const{room:s,token:i,user:o,apiUrl:r}=m(),{slug:l}=p(),[t,d]=u.useState(s.status||"open"),a=s.metadata?.source==="widget"||s.customerEmail,c=async n=>{try{await z(`/chat/rooms/${s.id}`,i,{method:"PATCH",body:JSON.stringify({status:n})}),d(n)}catch{alert("Failed to update status")}};return e.jsxs("div",{className:"h-[calc(100vh-64px)] bg-zinc-50 flex flex-col",children:[e.jsxs("header",{className:"bg-white border-b border-zinc-200 px-6 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(h,{to:`/studio/${l}/chat`,className:"p-2 hover:bg-zinc-100 rounded-full text-zinc-500",children:e.jsx(f,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-zinc-900 leading-tight",children:s.name}),e.jsxs("div",{className:"text-xs text-zinc-500 flex items-center gap-2",children:[e.jsx("span",{className:"uppercase tracking-wider font-semibold",children:a?"Customer Inquiry":"Platform Ticket"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"font-mono text-zinc-400",children:s.id.slice(0,8)})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${t==="open"?"bg-green-100 text-green-700":t==="closed"?"bg-zinc-100 text-zinc-600":"bg-blue-50 text-blue-700"}`,children:t}),a&&t!=="closed"&&e.jsxs("button",{onClick:()=>c("closed"),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-md text-sm hover:bg-green-700",children:[e.jsx(g,{size:14}),"Resolve"]}),a&&t==="closed"&&e.jsxs("button",{onClick:()=>c("open"),className:"flex items-center gap-1 px-3 py-1.5 bg-zinc-100 text-zinc-700 rounded-md text-sm hover:bg-zinc-200",children:[e.jsx(j,{size:14}),"Reopen"]})]})]}),e.jsx("main",{className:"flex-1 p-6 flex justify-center overflow-hidden",children:e.jsx("div",{className:"w-full max-w-4xl h-full flex flex-col",children:e.jsx(b,{roomId:s.id,token:i,currentUser:o,wsUrl:r})})})]})});export{$ as default};
