import{c2 as D,c3 as me,c4 as j,c5 as be,c6 as pe,c7 as ge,c8 as F,c9 as K,ca as de,cb as It,cc as Ae,cd as wn,ce as os,cf as Cn,cg as Ft,ch as as,ci as ls,cj as cs,ck as ds,cl as us,cm as V,cn as Tn,co as St,cp as ps,cq as hs,cr as En,cs as fs,ct as ms,cu as nn,cv as gs,cw as bs,cx as sn,cy as Ln,cz as Me,cA as gt,cB as xs,cC as ys,cD as ks,cE as vs,cF as ws,cG as Cs,a as z,j as l,cH as Ts,cI as Es,cJ as Ls,cK as Ns,cL as As,b1 as Ms,a3 as js,cM as Is,aj as Ss,p as Os,q as Rs,V as zs,a_ as Hs,ab as Ps,X as Ds,a7 as Bs,aP as kt,aG as $s,K as _s,aK as Us,ag as Fs,b4 as Ws,T as rn}from"./vendor-react-D59Q0YKK.js";import{a as ae}from"./api-D1U4i9fn.js";import{M as vt}from"./Modal-B9krvlse.js";import"./vendor-puck-RN2Ey-av.js";import"./vendor-charts-Dp-zC2wb.js";var _e=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},Ks=/^\s*>\s$/,Vs=D.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return _e("blockquote",{...j(this.options.HTMLAttributes,e),children:_e("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const n=">",r=[];return e.content.forEach(s=>{const a=t.renderChildren([s]).split(`
`).map(c=>c.trim()===""?n:`${n} ${c}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[me({find:Ks,type:this.type})]}}),Gs=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,qs=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Js=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Xs=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Qs=be.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return _e("strong",{...j(this.options.HTMLAttributes,e),children:_e("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ge({find:Gs,type:this.type}),ge({find:Js,type:this.type})]},addPasteRules(){return[pe({find:qs,type:this.type}),pe({find:Xs,type:this.type})]}}),Ys=/(^|[^`])`([^`]+)`(?!`)$/,Zs=/(^|[^`])`([^`]+)`(?!`)/g,er=be.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",j(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ge({find:Ys,type:this.type})]},addPasteRules(){return[pe({find:Zs,type:this.type})]}}),wt=4,tr=/^```([a-z]+)?[\s\n]$/,nr=/^~~~([a-z]+)?[\s\n]$/,sr=D.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:wt,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;if(!n)return null;const i=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",j(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var n;return((n=e.raw)==null?void 0:n.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var n;let r="";const s=((n=e.attrs)==null?void 0:n.language)||"";return e.content?r=[`\`\`\`${s}`,t.renderChildren(e.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:wt,{state:r}=e,{selection:s}=r,{$from:i,empty:o}=s;if(i.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?e.commands.insertContent(a):e.commands.command(({tr:c})=>{const{from:u,to:f}=s,g=r.doc.textBetween(u,f,`
`,`
`).split(`
`).map(b=>a+b).join(`
`);return c.replaceWith(u,f,r.schema.text(g)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:wt,{state:r}=e,{selection:s}=r,{$from:i,empty:o}=s;return i.parent.type!==this.type?!1:o?e.commands.command(({tr:a})=>{var c;const{pos:u}=i,f=i.start(),d=i.end(),g=r.doc.textBetween(f,d,`
`,`
`).split(`
`);let b=0,y=0;const v=u-f;for(let M=0;M<g.length;M+=1){if(y+g[M].length>=v){b=M;break}y+=g[M].length+1}const E=((c=g[b].match(/^ */))==null?void 0:c[0])||"",$=Math.min(E.length,n);if($===0)return!0;let H=f;for(let M=0;M<b;M+=1)H+=g[M].length+1;return a.delete(H,H+$),u-H<=$&&a.setSelection(de.create(a.doc,H)),!0}):e.commands.command(({tr:a})=>{const{from:c,to:u}=s,h=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(g=>{var b;const y=((b=g.match(/^ */))==null?void 0:b[0])||"",v=Math.min(y.length,n);return g.slice(v)}).join(`
`);return a.replaceWith(c,u,r.schema.text(h)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:e.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?e.commands.command(({tr:u})=>(u.setSelection(Ae.near(r.resolve(a))),!0)):e.commands.exitCode()}}},addInputRules(){return[It({find:tr,type:this.type,getAttributes:e=>({language:e[1]})}),It({find:nr,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new F({key:new K("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s?.mode;if(!n||!i)return!1;const{tr:o,schema:a}=e.state,c=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},c)),o.selection.$from.parent.type!==this.type&&o.setSelection(de.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),rr=D.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),ir=D.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",j(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:s,storedMarks:i}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,c=i||s.$to.parentOffset&&s.$from.marks();return t().insertContent({type:this.name}).command(({tr:u,dispatch:f})=>{if(f&&c&&o){const d=c.filter(h=>a.includes(h.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),or=D.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,j(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var n;const r=(n=e.attrs)!=null&&n.level?parseInt(e.attrs.level,10):1,s="#".repeat(r);return e.content?`${s} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>It({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),ar=D.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",j(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!os(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,s=e();return Cn(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:i,tr:o,dispatch:a})=>{if(a){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(de.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(Ft.create(o.doc,c.pos)):o.setSelection(de.create(o.doc,c.pos));else{const f=i.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,d=f?.create();d&&(o.insert(u,d),o.setSelection(de.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[wn({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),lr=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,cr=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,dr=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ur=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,pr=be.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",j(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ge({find:lr,type:this.type}),ge({find:dr,type:this.type})]},addPasteRules(){return[pe({find:cr,type:this.type}),pe({find:ur,type:this.type})]}});const hr="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",fr="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Ot="numeric",Rt="ascii",zt="alpha",we="asciinumeric",ve="alphanumeric",Ht="domain",Nn="emoji",mr="scheme",gr="slashscheme",Ct="whitespace";function br(e,t){return e in t||(t[e]=[]),t[e]}function ce(e,t,n){t[Ot]&&(t[we]=!0,t[ve]=!0),t[Rt]&&(t[we]=!0,t[zt]=!0),t[we]&&(t[ve]=!0),t[zt]&&(t[ve]=!0),t[ve]&&(t[Ht]=!0),t[Nn]&&(t[Ht]=!0);for(const r in t){const s=br(r,n);s.indexOf(e)<0&&s.push(e)}}function xr(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function P(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}P.groups={};P.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const s=t.jr[r][0],i=t.jr[r][1];if(i&&s.test(e))return i}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let s=0;s<e.length;s++)this.tt(e[s],t,n,r)},tr(e,t,n,r){r=r||P.groups;let s;return t&&t.j?s=t:(s=new P(t),n&&r&&ce(t,n,r)),this.jr.push([e,s]),s},ts(e,t,n,r){let s=this;const i=e.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(e[o]);return s.tt(e[i-1],t,n,r)},tt(e,t,n,r){r=r||P.groups;const s=this;if(t&&t.j)return s.j[e]=t,t;const i=t;let o,a=s.go(e);if(a?(o=new P,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new P,i){if(r)if(o.t&&typeof o.t=="string"){const c=Object.assign(xr(o.t,r),n);ce(i,c,r)}else n&&ce(i,n,r);o.t=i}return s.j[e]=o,o}};const C=(e,t,n,r,s)=>e.ta(t,n,r,s),N=(e,t,n,r,s)=>e.tr(t,n,r,s),on=(e,t,n,r,s)=>e.ts(t,n,r,s),m=(e,t,n,r,s)=>e.tt(t,n,r,s),ee="WORD",Pt="UWORD",An="ASCIINUMERICAL",Mn="ALPHANUMERICAL",je="LOCALHOST",Dt="TLD",Bt="UTLD",Be="SCHEME",fe="SLASH_SCHEME",Wt="NUM",$t="WS",Kt="NL",Ce="OPENBRACE",Te="CLOSEBRACE",Ue="OPENBRACKET",Fe="CLOSEBRACKET",We="OPENPAREN",Ke="CLOSEPAREN",Ve="OPENANGLEBRACKET",Ge="CLOSEANGLEBRACKET",qe="FULLWIDTHLEFTPAREN",Je="FULLWIDTHRIGHTPAREN",Xe="LEFTCORNERBRACKET",Qe="RIGHTCORNERBRACKET",Ye="LEFTWHITECORNERBRACKET",Ze="RIGHTWHITECORNERBRACKET",et="FULLWIDTHLESSTHAN",tt="FULLWIDTHGREATERTHAN",nt="AMPERSAND",st="APOSTROPHE",rt="ASTERISK",se="AT",it="BACKSLASH",ot="BACKTICK",at="CARET",ie="COLON",Vt="COMMA",lt="DOLLAR",G="DOT",ct="EQUALS",Gt="EXCLAMATION",U="HYPHEN",Ee="PERCENT",dt="PIPE",ut="PLUS",pt="POUND",Le="QUERY",qt="QUOTE",jn="FULLWIDTHMIDDLEDOT",Jt="SEMI",q="SLASH",Ne="TILDE",ht="UNDERSCORE",In="EMOJI",ft="SYM";var Sn=Object.freeze({__proto__:null,ALPHANUMERICAL:Mn,AMPERSAND:nt,APOSTROPHE:st,ASCIINUMERICAL:An,ASTERISK:rt,AT:se,BACKSLASH:it,BACKTICK:ot,CARET:at,CLOSEANGLEBRACKET:Ge,CLOSEBRACE:Te,CLOSEBRACKET:Fe,CLOSEPAREN:Ke,COLON:ie,COMMA:Vt,DOLLAR:lt,DOT:G,EMOJI:In,EQUALS:ct,EXCLAMATION:Gt,FULLWIDTHGREATERTHAN:tt,FULLWIDTHLEFTPAREN:qe,FULLWIDTHLESSTHAN:et,FULLWIDTHMIDDLEDOT:jn,FULLWIDTHRIGHTPAREN:Je,HYPHEN:U,LEFTCORNERBRACKET:Xe,LEFTWHITECORNERBRACKET:Ye,LOCALHOST:je,NL:Kt,NUM:Wt,OPENANGLEBRACKET:Ve,OPENBRACE:Ce,OPENBRACKET:Ue,OPENPAREN:We,PERCENT:Ee,PIPE:dt,PLUS:ut,POUND:pt,QUERY:Le,QUOTE:qt,RIGHTCORNERBRACKET:Qe,RIGHTWHITECORNERBRACKET:Ze,SCHEME:Be,SEMI:Jt,SLASH:q,SLASH_SCHEME:fe,SYM:ft,TILDE:Ne,TLD:Dt,UNDERSCORE:ht,UTLD:Bt,UWORD:Pt,WORD:ee,WS:$t});const Y=/[a-z]/,ke=new RegExp("\\p{L}","u"),Tt=new RegExp("\\p{Emoji}","u"),Z=/\d/,Et=/\s/,an="\r",Lt=`
`,yr="️",kr="‍",Nt="￼";let ze=null,He=null;function vr(e=[]){const t={};P.groups=t;const n=new P;ze==null&&(ze=ln(hr)),He==null&&(He=ln(fr)),m(n,"'",st),m(n,"{",Ce),m(n,"}",Te),m(n,"[",Ue),m(n,"]",Fe),m(n,"(",We),m(n,")",Ke),m(n,"<",Ve),m(n,">",Ge),m(n,"（",qe),m(n,"）",Je),m(n,"「",Xe),m(n,"」",Qe),m(n,"『",Ye),m(n,"』",Ze),m(n,"＜",et),m(n,"＞",tt),m(n,"&",nt),m(n,"*",rt),m(n,"@",se),m(n,"`",ot),m(n,"^",at),m(n,":",ie),m(n,",",Vt),m(n,"$",lt),m(n,".",G),m(n,"=",ct),m(n,"!",Gt),m(n,"-",U),m(n,"%",Ee),m(n,"|",dt),m(n,"+",ut),m(n,"#",pt),m(n,"?",Le),m(n,'"',qt),m(n,"/",q),m(n,";",Jt),m(n,"~",Ne),m(n,"_",ht),m(n,"\\",it),m(n,"・",jn);const r=N(n,Z,Wt,{[Ot]:!0});N(r,Z,r);const s=N(r,Y,An,{[we]:!0}),i=N(r,ke,Mn,{[ve]:!0}),o=N(n,Y,ee,{[Rt]:!0});N(o,Z,s),N(o,Y,o),N(s,Z,s),N(s,Y,s);const a=N(n,ke,Pt,{[zt]:!0});N(a,Y),N(a,Z,i),N(a,ke,a),N(i,Z,i),N(i,Y),N(i,ke,i);const c=m(n,Lt,Kt,{[Ct]:!0}),u=m(n,an,$t,{[Ct]:!0}),f=N(n,Et,$t,{[Ct]:!0});m(n,Nt,f),m(u,Lt,c),m(u,Nt,f),N(u,Et,f),m(f,an),m(f,Lt),N(f,Et,f),m(f,Nt,f);const d=N(n,Tt,In,{[Nn]:!0});m(d,"#"),N(d,Tt,d),m(d,yr,d);const h=m(d,kr);m(h,"#"),N(h,Tt,d);const g=[[Y,o],[Z,s]],b=[[Y,null],[ke,a],[Z,i]];for(let y=0;y<ze.length;y++)ne(n,ze[y],Dt,ee,g);for(let y=0;y<He.length;y++)ne(n,He[y],Bt,Pt,b);ce(Dt,{tld:!0,ascii:!0},t),ce(Bt,{utld:!0,alpha:!0},t),ne(n,"file",Be,ee,g),ne(n,"mailto",Be,ee,g),ne(n,"http",fe,ee,g),ne(n,"https",fe,ee,g),ne(n,"ftp",fe,ee,g),ne(n,"ftps",fe,ee,g),ce(Be,{scheme:!0,ascii:!0},t),ce(fe,{slashscheme:!0,ascii:!0},t),e=e.sort((y,v)=>y[0]>v[0]?1:-1);for(let y=0;y<e.length;y++){const v=e[y][0],E=e[y][1]?{[mr]:!0}:{[gr]:!0};v.indexOf("-")>=0?E[Ht]=!0:Y.test(v)?Z.test(v)?E[we]=!0:E[Rt]=!0:E[Ot]=!0,on(n,v,v,E)}return on(n,"localhost",je,{ascii:!0}),n.jd=new P(ft),{start:n,tokens:Object.assign({groups:t},Sn)}}function On(e,t){const n=wr(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,s=[];let i=0,o=0;for(;o<r;){let a=e,c=null,u=0,f=null,d=-1,h=-1;for(;o<r&&(c=a.go(n[o]));)a=c,a.accepts()?(d=0,h=0,f=a):d>=0&&(d+=n[o].length,h++),u+=n[o].length,i+=n[o].length,o++;i-=d,o-=h,u-=d,s.push({t:f.t,v:t.slice(i-u,i),s:i-u,e:i})}return s}function wr(e){const t=[],n=e.length;let r=0;for(;r<n;){let s=e.charCodeAt(r),i,o=s<55296||s>56319||r+1===n||(i=e.charCodeAt(r+1))<56320||i>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function ne(e,t,n,r,s){let i;const o=t.length;for(let a=0;a<o-1;a++){const c=t[a];e.j[c]?i=e.j[c]:(i=new P(r),i.jr=s.slice(),e.j[c]=i),e=i}return i=new P(n),i.jr=s.slice(),e.j[t[o-1]]=i,i}function ln(e){const t=[],n=[];let r=0,s="0123456789";for(;r<e.length;){let i=0;for(;s.indexOf(e[r+i])>=0;)i++;if(i>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+i),10);o>0;o--)n.pop();r+=i}else n.push(e[r]),r++}return t}const Ie={defaultProtocol:"http",events:null,format:cn,formatHref:cn,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Xt(e,t=null){let n=Object.assign({},Ie);e&&(n=Object.assign(n,e instanceof Xt?e.o:e));const r=n.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=s}Xt.prototype={o:Ie,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let s=this.o[e];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:Ie[e],typeof s=="function"&&r&&(s=s(t,n))):typeof s=="function"&&r&&(s=s(t,n.t,n)),s)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function cn(e){return e}function Rn(e,t){this.t="token",this.v=e,this.tk=t}Rn.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=Ie.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),s=e.get("tagName",n,t),i=this.toFormattedString(e),o={},a=e.get("className",n,t),c=e.get("target",n,t),u=e.get("rel",n,t),f=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return o.href=r,a&&(o.class=a),c&&(o.target=c),u&&(o.rel=u),f&&Object.assign(o,f),{tagName:s,attributes:o,content:i,eventListeners:d}}};function bt(e,t){class n extends Rn{constructor(s,i){super(s,i),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const dn=bt("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),un=bt("text"),Cr=bt("nl"),Pe=bt("url",{isLink:!0,toHref(e=Ie.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==je&&e[1].t===ie}}),_=e=>new P(e);function Tr({groups:e}){const t=e.domain.concat([nt,rt,se,it,ot,at,lt,ct,U,Wt,Ee,dt,ut,pt,q,ft,Ne,ht]),n=[st,ie,Vt,G,Gt,Ee,Le,qt,Jt,Ve,Ge,Ce,Te,Fe,Ue,We,Ke,qe,Je,Xe,Qe,Ye,Ze,et,tt],r=[nt,st,rt,it,ot,at,lt,ct,U,Ce,Te,Ee,dt,ut,pt,Le,q,ft,Ne,ht],s=_(),i=m(s,Ne);C(i,r,i),C(i,e.domain,i);const o=_(),a=_(),c=_();C(s,e.domain,o),C(s,e.scheme,a),C(s,e.slashscheme,c),C(o,r,i),C(o,e.domain,o);const u=m(o,se);m(i,se,u),m(a,se,u),m(c,se,u);const f=m(i,G);C(f,r,i),C(f,e.domain,i);const d=_();C(u,e.domain,d),C(d,e.domain,d);const h=m(d,G);C(h,e.domain,d);const g=_(dn);C(h,e.tld,g),C(h,e.utld,g),m(u,je,g);const b=m(d,U);m(b,U,b),C(b,e.domain,d),C(g,e.domain,d),m(g,G,h),m(g,U,b);const y=m(g,ie);C(y,e.numeric,dn);const v=m(o,U),x=m(o,G);m(v,U,v),C(v,e.domain,o),C(x,r,i),C(x,e.domain,o);const E=_(Pe);C(x,e.tld,E),C(x,e.utld,E),C(E,e.domain,o),C(E,r,i),m(E,G,x),m(E,U,v),m(E,se,u);const $=m(E,ie),H=_(Pe);C($,e.numeric,H);const L=_(Pe),M=_();C(L,t,L),C(L,n,M),C(M,t,L),C(M,n,M),m(E,q,L),m(H,q,L);const w=m(a,ie),S=m(c,ie),B=m(S,q),X=m(B,q);C(a,e.domain,o),m(a,G,x),m(a,U,v),C(c,e.domain,o),m(c,G,x),m(c,U,v),C(w,e.domain,L),m(w,q,L),m(w,Le,L),C(X,e.domain,L),C(X,t,L),m(X,q,L);const xe=[[Ce,Te],[Ue,Fe],[We,Ke],[Ve,Ge],[qe,Je],[Xe,Qe],[Ye,Ze],[et,tt]];for(let he=0;he<xe.length;he++){const[O,Oe]=xe[he],ye=m(L,O);m(M,O,ye),m(ye,Oe,L);const te=_(Pe);C(ye,t,te);const oe=_();C(ye,n),C(te,t,te),C(te,n,oe),C(oe,t,te),C(oe,n,oe),m(te,Oe,L),m(oe,Oe,L)}return m(s,je,E),m(s,Kt,Cr),{start:s,tokens:Sn}}function Er(e,t,n){let r=n.length,s=0,i=[],o=[];for(;s<r;){let a=e,c=null,u=null,f=0,d=null,h=-1;for(;s<r&&!(c=a.go(n[s].t));)o.push(n[s++]);for(;s<r&&(u=c||a.go(n[s].t));)c=null,a=u,a.accepts()?(h=0,d=a):h>=0&&h++,s++,f++;if(h<0)s-=f,s<r&&(o.push(n[s]),s++);else{o.length>0&&(i.push(At(un,t,o)),o=[]),s-=h,f-=h;const g=d.t,b=n.slice(s-f,s);i.push(At(g,t,b))}}return o.length>0&&i.push(At(un,t,o)),i}function At(e,t,n){const r=n[0].s,s=n[n.length-1].e,i=t.slice(r,s);return new e(i,n)}const Lr=typeof console<"u"&&console&&console.warn||(()=>{}),Nr="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",T={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Ar(){return P.groups={},T.scanner=null,T.parser=null,T.tokenQueue=[],T.pluginQueue=[],T.customSchemes=[],T.initialized=!1,T}function pn(e,t=!1){if(T.initialized&&Lr(`linkifyjs: already initialized - will not register custom scheme "${e}" ${Nr}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);T.customSchemes.push([e,t])}function Mr(){T.scanner=vr(T.customSchemes);for(let e=0;e<T.tokenQueue.length;e++)T.tokenQueue[e][1]({scanner:T.scanner});T.parser=Tr(T.scanner.tokens);for(let e=0;e<T.pluginQueue.length;e++)T.pluginQueue[e][1]({scanner:T.scanner,parser:T.parser});return T.initialized=!0,T}function Qt(e){return T.initialized||Mr(),Er(T.parser.start,e,On(T.scanner.start,e))}Qt.scan=On;function zn(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new Xt(n),s=Qt(e),i=[];for(let o=0;o<s.length;o++){const a=s[o];a.isLink&&(!t||a.t===t)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}var Yt="[\0-   ᠎ -\u2029 　]",jr=new RegExp(Yt),Ir=new RegExp(`${Yt}$`),Sr=new RegExp(Yt,"g");function Or(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function Rr(e){return new F({key:new K("autolink"),appendTransaction:(t,n,r)=>{const s=t.some(u=>u.docChanged)&&!n.doc.eq(r.doc),i=t.some(u=>u.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=r,a=as(n.doc,[...t]);if(ls(a).forEach(({newRange:u})=>{const f=cs(r.doc,u,g=>g.isTextblock);let d,h;if(f.length>1)d=f[0],h=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(f.length){const g=r.doc.textBetween(u.from,u.to," "," ");if(!Ir.test(g))return;d=f[0],h=r.doc.textBetween(d.pos,u.to,void 0," ")}if(d&&h){const g=h.split(jr).filter(Boolean);if(g.length<=0)return!1;const b=g[g.length-1],y=d.pos+h.lastIndexOf(b);if(!b)return!1;const v=Qt(b).map(x=>x.toObject(e.defaultProtocol));if(!Or(v))return!1;v.filter(x=>x.isLink).map(x=>({...x,from:y+x.start+1,to:y+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>e.validate(x.value)).filter(x=>e.shouldAutoLink(x.value)).forEach(x=>{ds(x.from,x.to,r.doc).some(E=>E.mark.type===e.type)||o.addMark(x.from,x.to,e.type.create({href:x.href}))})}}),!!o.steps.length)return o}})}function zr(e){return new F({key:new K("handleClickLink"),props:{handleClick:(t,n,r)=>{var s,i;if(r.button!==0||!t.editable)return!1;let o=!1;if(e.enableClickSelection&&(o=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let d=r.target;const h=[];for(;d.nodeName!=="DIV";)h.push(d),d=d.parentNode;a=h.find(g=>g.nodeName==="A")}if(!a)return o;const c=us(t.state,e.type.name),u=(s=a?.href)!=null?s:c.href,f=(i=a?.target)!=null?i:c.target;a&&u&&(window.open(u,f),o=!0)}return o}}})}function Hr(e){return new F({key:new K("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{shouldAutoLink:s}=e,{state:i}=t,{selection:o}=i,{empty:a}=o;if(a)return!1;let c="";r.content.forEach(f=>{c+=f.textContent});const u=zn(c,{defaultProtocol:e.defaultProtocol}).find(f=>f.isLink&&f.value===c);return!c||!u||s!==void 0&&!s(u.value)?!1:e.editor.commands.setMark(e.type,{href:u.href})}}})}function le(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!e||e.replace(Sr,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Hn=be.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){pn(e);return}pn(e.scheme,e.optionalSlashes)})},onDestroy(){Ar()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!le(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>{const t=/^[a-z][a-z0-9+.-]*:\/\//i.test(e),n=/^[a-z][a-z0-9+.-]*:/i.test(e);if(t||n&&!e.includes("@"))return!0;const s=(e.includes("@")?e.split("@").pop():e).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(s)||!/\./.test(s))}}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!le(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!le(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",j(this.options.HTMLAttributes,e),0]:["a",j(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var n;const r=((n=e.attrs)==null?void 0:n.href)||"";return`[${t.renderChildren(e)}](${r})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!le(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!le(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[pe({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,s=zn(e).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!le(o,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(i=>{this.options.shouldAutoLink(i.value)&&t.push({text:i.value,data:{href:i.href},index:i.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(Rr({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!le(s,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),e.push(zr({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(Hr({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),Pr=Hn,Dr=Object.defineProperty,Br=(e,t)=>{for(var n in t)Dr(e,n,{get:t[n],enumerable:!0})},$r="listItem",hn="textStyle",fn=/^\s*([-+*])\s$/,Pn=D.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",j(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes($r,this.editor.getAttributes(hn)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=me({find:fn,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=me({find:fn,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(hn),editor:this.editor})),[e]}}),Dn=D.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",j(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let n=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(s=>s.type==="paragraph"))n=t.parseChildren(e.tokens);else{const s=e.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:t.parseInline(s.tokens)}],e.tokens.length>1){const o=e.tokens.slice(1),a=t.parseChildren(o);n.push(...a)}}else n=t.parseChildren(e.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(e,t,n)=>Tn(e,t,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),_r={};Br(_r,{findListItemPos:()=>Se,getNextListDepth:()=>Zt,handleBackspace:()=>_t,handleDelete:()=>Ut,hasListBefore:()=>Bn,hasListItemAfter:()=>Ur,hasListItemBefore:()=>$n,listItemHasSubList:()=>_n,nextListIsDeeper:()=>Un,nextListIsHigher:()=>Fn});var Se=(e,t)=>{const{$from:n}=t.selection,r=En(e,t.schema);let s=null,i=n.depth,o=n.pos,a=null;for(;i>0&&a===null;)s=n.node(i),s.type===r?a=i:(i-=1,o-=1);return a===null?null:{$pos:t.doc.resolve(o),depth:a}},Zt=(e,t)=>{const n=Se(e,t);if(!n)return!1;const[,r]=fs(t,e,n.$pos.pos+4);return r},Bn=(e,t,n)=>{const{$anchor:r}=e.selection,s=Math.max(0,r.pos-2),i=e.doc.resolve(s).node();return!(!i||!n.includes(i.type.name))},$n=(e,t)=>{var n;const{$anchor:r}=t.selection,s=t.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==e)},_n=(e,t,n)=>{if(!n)return!1;const r=En(e,t.schema);let s=!1;return n.descendants(i=>{i.type===r&&(s=!0)}),s},_t=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!St(e.state,t)&&Bn(e.state,t,n)){const{$anchor:a}=e.state.selection,c=e.state.doc.resolve(a.before()-1),u=[];c.node().descendants((h,g)=>{h.type.name===t&&u.push({node:h,pos:g})});const f=u.at(-1);if(!f)return!1;const d=e.state.doc.resolve(c.start()+f.pos+1);return e.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!St(e.state,t)||!ps(e.state))return!1;const r=Se(t,e.state);if(!r)return!1;const i=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=_n(t,e.state,i);return $n(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},Un=(e,t)=>{const n=Zt(e,t),r=Se(e,t);return!r||!n?!1:n>r.depth},Fn=(e,t)=>{const n=Zt(e,t),r=Se(e,t);return!r||!n?!1:n<r.depth},Ut=(e,t)=>{if(!St(e.state,t)||!hs(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:Un(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():Fn(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},Ur=(e,t)=>{var n;const{$anchor:r}=t.selection,s=t.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==e)},Wn=V.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&Ut(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&Ut(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&_t(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&_t(e,n,r)&&(t=!0)}),t}}}}),mn=/^(\s*)(\d+)\.\s+(.*)$/,Fr=/^\s/;function Wr(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n],i=s.match(mn);if(!i)break;const[,o,a,c]=i,u=o.length;let f=c,d=n+1;const h=[s];for(;d<e.length;){const g=e[d];if(g.match(mn))break;if(g.trim()==="")h.push(g),f+=`
`,d+=1;else if(g.match(Fr))h.push(g),f+=`
${g.slice(u+2)}`,d+=1;else break}t.push({indent:u,number:parseInt(a,10),content:f.trim(),raw:h.join(`
`)}),r=d,n=d}return[t,r]}function Kn(e,t,n){var r;const s=[];let i=0;for(;i<e.length;){const o=e[i];if(o.indent===t){const a=o.content.split(`
`),c=((r=a[0])==null?void 0:r.trim())||"",u=[];c&&u.push({type:"paragraph",raw:c,tokens:n.inlineTokens(c)});const f=a.slice(1).join(`
`).trim();if(f){const g=n.blockTokens(f);u.push(...g)}let d=i+1;const h=[];for(;d<e.length&&e[d].indent>t;)h.push(e[d]),d+=1;if(h.length>0){const g=Math.min(...h.map(y=>y.indent)),b=Kn(h,g,n);u.push({type:"list",ordered:!0,start:h[0].number,items:b,raw:h.map(y=>y.raw).join(`
`)})}s.push({type:"list_item",raw:o.raw,tokens:u}),i=d}else i+=1}return s}function Kr(e,t){return e.map(n=>{if(n.type!=="list_item")return t.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...t.parseChildren([s]));else if(s.type==="text"&&s.tokens){const i=t.parseChildren([s]);r.push({type:"paragraph",content:i})}else{const i=t.parseChildren([s]);i.length>0&&r.push(...i)}}),{type:"listItem",content:r}})}var Vr="listItem",gn="textStyle",bn=/^(\d+)\.\s$/,Vn=D.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",j(this.options.HTMLAttributes,n),0]:["ol",j(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const n=e.start||1,r=e.items?Kr(e.items,t):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),n=t?.index;return n!==void 0?n:-1},tokenize:(e,t,n)=>{var r;const s=e.split(`
`),[i,o]=Wr(s);if(i.length===0)return;const a=Kn(i,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=i[0])==null?void 0:r.number)||1,items:a,raw:s.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Vr,this.editor.getAttributes(gn)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=me({find:bn,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=me({find:bn,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(gn)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),Gr=/^\s*(\[([( |x])?\])\s$/,qr=D.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",j(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const n=[];if(e.tokens&&e.tokens.length>0?n.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?n.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):n.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const r=t.parseChildren(e.nestedTokens);n.push(...r)}return t.createNode("taskItem",{checked:e.checked||!1},n)},renderMarkdown:(e,t)=>{var n;const s=`- [${(n=e.attrs)!=null&&n.checked?"x":" "}] `;return Tn(e,t,s)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const s=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),c=document.createElement("div"),u=d=>{var h,g;a.ariaLabel=((g=(h=this.options.a11y)==null?void 0:h.checkboxLabel)==null?void 0:g.call(h,d,a.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};u(e),i.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",d=>d.preventDefault()),a.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:h}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:g})=>{const b=n();if(typeof b!="number")return!1;const y=g.doc.nodeAt(b);return g.setNodeMarkup(b,void 0,{...y?.attrs,checked:h}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,h)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,h])=>{s.setAttribute(d,h)}),s.dataset.checked=e.attrs.checked,a.checked=e.attrs.checked,i.append(a,o),s.append(i,c),Object.entries(t).forEach(([d,h])=>{s.setAttribute(d,h)});let f=new Set(Object.keys(t));return{dom:s,contentDOM:c,update:d=>{if(d.type!==this.type)return!1;s.dataset.checked=d.attrs.checked,a.checked=d.attrs.checked,u(d);const h=r.extensionManager.attributes,g=ms(d,h),b=new Set(Object.keys(g)),y=this.options.HTMLAttributes;return f.forEach(v=>{b.has(v)||(v in y?s.setAttribute(v,y[v]):s.removeAttribute(v))}),Object.entries(g).forEach(([v,x])=>{x==null?v in y?s.setAttribute(v,y[v]):s.removeAttribute(v):s.setAttribute(v,x)}),f=b,!0}}}},addInputRules(){return[me({find:Gr,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),Jr=D.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",j(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const n=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return n!==void 0?n:-1},tokenize(e,t,n){const r=i=>{const o=nn(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,c)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:c}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(i)},s=nn(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,o)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:n.inlineTokens(i.mainContent),nestedTokens:o}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});V.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(Pn.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(Dn.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(Wn.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(Vn.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(qr.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(Jr.configure(this.options.taskList)),e}});var Xr=D.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",j(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const n=e.tokens||[];return n.length===1&&n[0].type==="image"?t.parseChildren([n[0]]):t.createNode("paragraph",void 0,t.parseInline(n))},renderMarkdown:(e,t)=>!e||!Array.isArray(e.content)?"":t.renderChildren(e.content),addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Qr=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Yr=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Zr=be.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",j(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ge({find:Qr,type:this.type})]},addPasteRules(){return[pe({find:Yr,type:this.type})]}}),ei=D.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),ti=be.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",j(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!s)return;const i=s[2].trim();return{type:"underline",raw:s[0],text:i,tokens:n.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function ni(e={}){return new F({view(t){return new si(t,e)}})}class si{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return t.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,s=this.editorView.dom,i=s.getBoundingClientRect(),o=i.width/s.offsetWidth,a=i.height/s.offsetHeight;if(n){let d=t.nodeBefore,h=t.nodeAfter;if(d||h){let g=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(g){let b=g.getBoundingClientRect(),y=d?b.bottom:b.top;d&&h&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*a;r={left:b.left,right:b.right,top:y-v,bottom:y+v}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*o;r={left:d.left-h,right:d.left+h,top:d.top,bottom:d.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,f;if(!c||c==document.body&&getComputedStyle(c).position=="static")u=-pageXOffset,f=-pageYOffset;else{let d=c.getBoundingClientRect(),h=d.width/c.offsetWidth,g=d.height/c.offsetHeight;u=d.left-c.scrollLeft*h,f=d.top-c.scrollTop*g}this.element.style.left=(r.left-u)/o+"px",this.element.style.top=(r.top-f)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,n,t):s;if(n&&!i){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=gs(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class A extends Ae{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return A.valid(r)?new A(r):Ae.near(r)}content(){return Ln.empty}eq(t){return t instanceof A&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new A(t.resolve(n.pos))}getBookmark(){return new en(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!ri(t)||!ii(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(t.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&A.valid(t))return t;let s=t.pos,i=null;for(let o=t.depth;;o--){let a=t.node(o);if(n>0?t.indexAfter(o)<a.childCount:t.index(o)>0){i=a.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;s+=n;let c=t.doc.resolve(s);if(A.valid(c))return c}for(;;){let o=n>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!Ft.isSelectable(i)){t=t.doc.resolve(s+i.nodeSize*n),r=!1;continue e}break}i=o,s+=n;let a=t.doc.resolve(s);if(A.valid(a))return a}return null}}}A.prototype.visible=!1;A.findFrom=A.findGapCursorFrom;Ae.jsonID("gapcursor",A);class en{constructor(t){this.pos=t}map(t){return new en(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return A.valid(n)?new A(n):Ae.near(n)}}function Gn(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function ri(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||Gn(s.type))return!0;if(s.inlineContent)return!1}}return!0}function ii(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||Gn(s.type))return!0;if(s.inlineContent)return!1}}return!0}function oi(){return new F({props:{decorations:di,createSelectionBetween(e,t,n){return t.pos==n.pos&&A.valid(n)?new A(n):null},handleClick:li,handleKeyDown:ai,handleDOMEvents:{beforeinput:ci}}})}const ai=bs({ArrowLeft:De("horiz",-1),ArrowRight:De("horiz",1),ArrowUp:De("vert",-1),ArrowDown:De("vert",1)});function De(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,s,i){let o=r.selection,a=t>0?o.$to:o.$from,c=o.empty;if(o instanceof de){if(!i.endOfTextblock(n)||a.depth==0)return!1;c=!1,a=r.doc.resolve(t>0?a.after():a.before())}let u=A.findGapCursorFrom(a,t,c);return u?(s&&s(r.tr.setSelection(new A(u))),!0):!1}}function li(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!A.valid(r))return!1;let s=e.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&Ft.isSelectable(e.state.doc.nodeAt(s.inside))?!1:(e.dispatch(e.state.tr.setSelection(new A(r))),!0)}function ci(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof A))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let s=sn.empty;for(let o=r.length-1;o>=0;o--)s=sn.from(r[o].createAndFill(null,s));let i=e.state.tr.replace(n.pos,n.pos,new Ln(s,0,0));return i.setSelection(de.near(i.doc.resolve(n.pos+1))),e.dispatch(i),!1}function di(e){if(!(e.selection instanceof A))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Me.create(e.doc,[gt.widget(e.selection.head,t,{key:"gapcursor"})])}var mt=200,I=function(){};I.prototype.append=function(t){return t.length?(t=I.from(t),!this.length&&t||t.length<mt&&this.leafAppend(t)||this.length<mt&&t.leafPrepend(this)||this.appendInner(t)):this};I.prototype.prepend=function(t){return t.length?I.from(t).append(this):this};I.prototype.appendInner=function(t){return new ui(this,t)};I.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?I.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};I.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};I.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};I.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(t(i,o))},n,r),s};I.from=function(t){return t instanceof I?t:t&&t.length?new qn(t):I.empty};var qn=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new t(this.values.slice(s,i))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,i,o,a){for(var c=i;c<o;c++)if(s(this.values[c],a+c)===!1)return!1},t.prototype.forEachInvertedInner=function(s,i,o,a){for(var c=i-1;c>=o;c--)if(s(this.values[c],a+c)===!1)return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=mt)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=mt)return new t(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(I);I.empty=new qn([]);var ui=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,s,i,o){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,i,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(s,a),i,o)===!1)return!1},t.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},t.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new t(s,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(I);const pi=500;class W{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;n&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=t.tr,a,c,u=[],f=[];return this.items.forEach((d,h)=>{if(!d.step){s||(s=this.remapping(r,h+1),i=s.maps.length),i--,f.push(d);return}if(s){f.push(new J(d.map));let g=d.step.map(s.slice(i)),b;g&&o.maybeStep(g).doc&&(b=o.mapping.maps[o.mapping.maps.length-1],u.push(new J(b,void 0,void 0,u.length+f.length))),i--,b&&s.appendMap(b,i)}else o.maybeStep(d.step);if(d.selection)return a=s?d.selection.map(s.slice(i)):d.selection,c=new W(this.items.slice(0,r).append(f.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:a}}addTransform(t,n,r,s){let i=[],o=this.eventCount,a=this.items,c=!s&&a.length?a.get(a.length-1):null;for(let f=0;f<t.steps.length;f++){let d=t.steps[f].invert(t.docs[f]),h=new J(t.mapping.maps[f],d,n),g;(g=c&&c.merge(h))&&(h=g,f?i.pop():a=a.slice(0,a.length-1)),i.push(h),n&&(o++,n=void 0),s||(c=h)}let u=o-r.depth;return u>fi&&(a=hi(a,u),o-=u),new W(a.append(i),o)}remapping(t,n){let r=new xs;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=t?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new W(this.items.append(t.map(n=>new J(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),i=t.mapping,o=t.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},s);let c=n;this.items.forEach(h=>{let g=i.getMirror(--c);if(g==null)return;o=Math.min(o,g);let b=i.maps[g];if(h.step){let y=t.steps[g].invert(t.docs[g]),v=h.selection&&h.selection.map(i.slice(c+1,g));v&&a++,r.push(new J(b,y,v))}else r.push(new J(b))},s);let u=[];for(let h=n;h<o;h++)u.push(new J(i.maps[h]));let f=this.items.slice(0,s).append(u).append(r),d=new W(f,a);return d.emptyItemCount()>pi&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,s=[],i=0;return this.items.forEach((o,a)=>{if(a>=t)s.push(o),o.selection&&i++;else if(o.step){let c=o.step.map(n.slice(r)),u=c&&c.getMap();if(r--,u&&n.appendMap(u,r),c){let f=o.selection&&o.selection.map(n.slice(r));f&&i++;let d=new J(u.invert(),c,f),h,g=s.length-1;(h=s.length&&s[g].merge(d))?s[g]=h:s.push(d)}}else o.map&&r--},this.items.length,0),new W(I.from(s.reverse()),i)}}W.empty=new W(I.empty,0);function hi(e,t){let n;return e.forEach((r,s)=>{if(r.selection&&t--==0)return n=s,!1}),e.slice(n)}class J{constructor(t,n,r,s){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=s}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new J(n.getMap().invert(),n,this.selection)}}}class re{constructor(t,n,r,s,i){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const fi=20;function mi(e,t,n,r){let s=n.getMeta(ue),i;if(s)return s.historyState;n.getMeta(xi)&&(e=new re(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(ue))return o.getMeta(ue).redo?new re(e.done.addTransform(n,void 0,r,$e(t)),e.undone,xn(n.mapping.maps),e.prevTime,e.prevComposition):new re(e.done,e.undone.addTransform(n,void 0,r,$e(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),c=e.prevTime==0||!o&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!gi(n,e.prevRanges)),u=o?Mt(e.prevRanges,n.mapping):xn(n.mapping.maps);return new re(e.done.addTransform(n,c?t.selection.getBookmark():void 0,r,$e(t)),W.empty,u,n.time,a??e.prevComposition)}else return(i=n.getMeta("rebased"))?new re(e.done.rebased(n,i),e.undone.rebased(n,i),Mt(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new re(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Mt(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function gi(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<t.length;i+=2)r<=t[i+1]&&s>=t[i]&&(n=!0)}),n}function xn(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,s,i,o)=>t.push(i,o));return t}function Mt(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let s=t.map(e[r],1),i=t.map(e[r+1],-1);s<=i&&n.push(s,i)}return n}function bi(e,t,n){let r=$e(t),s=ue.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),a=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),s,r),c=new re(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(o).setMeta(ue,{redo:n,historyState:c})}let jt=!1,yn=null;function $e(e){let t=e.plugins;if(yn!=t){jt=!1,yn=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){jt=!0;break}}return jt}const ue=new K("history"),xi=new K("closeHistory");function yi(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new F({key:ue,state:{init(){return new re(W.empty,W.empty,null,0,-1)},apply(t,n,r){return mi(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,s=r=="historyUndo"?Xn:r=="historyRedo"?Qn:null;return!s||!t.editable?!1:(n.preventDefault(),s(t.state,t.dispatch))}}}})}function Jn(e,t){return(n,r)=>{let s=ue.getState(n);if(!s||(e?s.undone:s.done).eventCount==0)return!1;if(r){let i=bi(s,n,e);i&&r(t?i.scrollIntoView():i)}return!0}}const Xn=Jn(!1,!0),Qn=Jn(!0,!0);V.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=e?.node||this.editor.state.doc;if((e?.mode||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=e?.node||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new F({key:new K("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const s=this.options.limit;if(s==null||s===0){e=!0;return}const i=this.storage.characters({node:r.doc});if(i>s){const o=i-s,a=0,c=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(a,c);return e=!0,u}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),i=this.storage.characters({node:t.doc});if(i<=r||s>r&&i>r&&i<=s)return!0;if(s>r&&i>r&&i>s||!t.getMeta("paste"))return!1;const a=t.selection.$head.pos,c=i-r,u=a-c,f=a;return t.deleteRange(u,f),!(this.storage.characters({node:t.doc})>r)}})]}});var ki=V.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[ni(this.options)]}});V.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new F({key:new K("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=t,i=[];if(!n||!r)return Me.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((c,u)=>{if(c.isText)return;if(!(s>=u&&s<=u+c.nodeSize-1))return!1;o+=1});let a=0;return e.descendants((c,u)=>{if(c.isText||!(s>=u&&s<=u+c.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";i.push(gt.node(u,u+c.nodeSize,{class:this.options.className}))}),Me.create(e,i)}}})]}});var vi=V.create({name:"gapCursor",addProseMirrorPlugins(){return[oi()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=ks(vs(e,"allowGapCursor",n)))!=null?t:null}}}),wi=V.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new F({key:new K("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,s=[];if(!n)return null;const i=this.editor.isEmpty;return e.descendants((o,a)=>{const c=r>=a&&r<=a+o.nodeSize,u=!o.isLeaf&&ys(o);if((c||!this.options.showOnlyCurrent)&&u){const f=[this.options.emptyNodeClass];i&&f.push(this.options.emptyEditorClass);const d=gt.node(a,a+o.nodeSize,{class:f.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:c}):this.options.placeholder});s.push(d)}return this.options.includeChildren}),Me.create(e,s)}}})]}});V.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new F({key:new K("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||Cn(n.selection)||e.view.dragging?null:Me.create(n.doc,[gt.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function kn({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||t?.type===e}var Ci=V.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new K(this.name),n=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new F({key:t,appendTransaction:(s,i,o)=>{const{doc:a,tr:c,schema:u}=o,f=t.getState(o),d=a.content.size,h=u.nodes[n];if(f)return c.insert(d,h.create())},state:{init:(s,i)=>{const o=i.tr.doc.lastChild;return!kn({node:o,types:r})},apply:(s,i)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return i;const o=s.doc.lastChild;return!kn({node:o,types:r})}}})]}}),Ti=V.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>Xn(e,t),redo:()=>({state:e,dispatch:t})=>Qn(e,t)}},addProseMirrorPlugins(){return[yi(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),Ei=V.create({name:"starterKit",addExtensions(){var e,t,n,r;const s=[];return this.options.bold!==!1&&s.push(Qs.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(Vs.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(Pn.configure(this.options.bulletList)),this.options.code!==!1&&s.push(er.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(sr.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(rr.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(ki.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(vi.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(ir.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(or.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(Ti.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(ar.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(pr.configure(this.options.italic)),this.options.listItem!==!1&&s.push(Dn.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(Wn.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&s.push(Hn.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&s.push(Vn.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(Xr.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(Zr.configure(this.options.strike)),this.options.text!==!1&&s.push(ei.configure(this.options.text)),this.options.underline!==!1&&s.push(ti.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(Ci.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),Li=Ei,Ni=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Ai=D.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",j(this.options.HTMLAttributes,e)]},parseMarkdown:(e,t)=>t.createNode("image",{src:e.href,title:e.title,alt:e.text}),renderMarkdown:e=>{var t,n,r,s,i,o;const a=(n=(t=e.attrs)==null?void 0:t.src)!=null?n:"",c=(s=(r=e.attrs)==null?void 0:r.alt)!=null?s:"",u=(o=(i=e.attrs)==null?void 0:i.title)!=null?o:"";return u?`![${c}](${a} "${u}")`:`![${c}](${a})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:e,minWidth:t,minHeight:n,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:s,getPos:i,HTMLAttributes:o,editor:a})=>{const c=document.createElement("img");Object.entries(o).forEach(([d,h])=>{if(h!=null)switch(d){case"width":case"height":break;default:c.setAttribute(d,h);break}}),c.src=o.src;const u=new ws({element:c,editor:a,node:s,getPos:i,onResize:(d,h)=>{c.style.width=`${d}px`,c.style.height=`${h}px`},onCommit:(d,h)=>{const g=i();g!==void 0&&this.editor.chain().setNodeSelection(g).updateAttributes(this.name,{width:d,height:h}).run()},onUpdate:(d,h,g)=>d.type===s.type,options:{directions:e,min:{width:t,height:n},preserveAspectRatio:r===!0}}),f=u.dom;return f.style.visibility="hidden",f.style.pointerEvents="none",c.onload=()=>{f.style.visibility="",f.style.pointerEvents=""},u}},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[wn({find:Ni,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}}),Mi=Ai,ji=wi;const Ii=({editor:e})=>{if(!e)return null;const t=()=>{const r=window.prompt("Enter image URL");r&&e.chain().focus().setImage({src:r}).run()},n=()=>{const r=e.getAttributes("link").href,s=window.prompt("URL",r);if(s!==null){if(s===""){e.chain().focus().extendMarkRange("link").unsetLink().run();return}e.chain().focus().extendMarkRange("link").setLink({href:s}).run()}};return l.jsxs("div",{className:"flex flex-wrap gap-1 p-2 border-b bg-zinc-50 rounded-t-lg",children:[l.jsx("button",{type:"button",onClick:()=>e.chain().focus().toggleBold().run(),disabled:!e.can().chain().focus().toggleBold().run(),className:`p-1.5 rounded hover:bg-zinc-200 ${e.isActive("bold")?"bg-zinc-200 text-black":"text-zinc-500"}`,title:"Bold",children:l.jsx(Es,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>e.chain().focus().toggleItalic().run(),disabled:!e.can().chain().focus().toggleItalic().run(),className:`p-1.5 rounded hover:bg-zinc-200 ${e.isActive("italic")?"bg-zinc-200 text-black":"text-zinc-500"}`,title:"Italic",children:l.jsx(Ls,{className:"w-4 h-4"})}),l.jsx("div",{className:"w-px h-6 bg-zinc-300 mx-1 self-center"}),l.jsx("button",{type:"button",onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),className:`p-1.5 rounded hover:bg-zinc-200 ${e.isActive("heading",{level:2})?"bg-zinc-200 text-black":"text-zinc-500"}`,title:"Heading 2",children:l.jsx(Ns,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>e.chain().focus().toggleBulletList().run(),className:`p-1.5 rounded hover:bg-zinc-200 ${e.isActive("bulletList")?"bg-zinc-200 text-black":"text-zinc-500"}`,title:"Bullet List",children:l.jsx(As,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>e.chain().focus().toggleCodeBlock().run(),className:`p-1.5 rounded hover:bg-zinc-200 ${e.isActive("codeBlock")?"bg-zinc-200 text-black":"text-zinc-500"}`,title:"Code Block",children:l.jsx(Ms,{className:"w-4 h-4"})}),l.jsx("div",{className:"w-px h-6 bg-zinc-300 mx-1 self-center"}),l.jsx("button",{type:"button",onClick:n,className:`p-1.5 rounded hover:bg-zinc-200 ${e.isActive("link")?"bg-zinc-200 text-black":"text-zinc-500"}`,title:"Add Link",children:l.jsx(js,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>e.chain().focus().unsetLink().run(),disabled:!e.isActive("link"),className:"p-1.5 rounded hover:bg-zinc-200 text-zinc-500 disabled:opacity-30",title:"Remove Link",children:l.jsx(Is,{className:"w-4 h-4"})}),l.jsx("div",{className:"w-px h-6 bg-zinc-300 mx-1 self-center"}),l.jsx("button",{type:"button",onClick:t,className:"p-1.5 rounded hover:bg-zinc-200 text-zinc-500",title:"Add Image URL",children:l.jsx(Ss,{className:"w-4 h-4"})})]})};function vn({value:e,onChange:t,placeholder:n,className:r}){const s=Cs({extensions:[Li,Pr.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 underline"}}),Mi.configure({HTMLAttributes:{class:"rounded-lg max-w-full my-4 border border-zinc-200"}}),ji.configure({placeholder:n||"Write something..."})],content:e,editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none min-h-[150px] p-4"}},onUpdate:({editor:i})=>{t(i.getHTML())}});return z.useEffect(()=>{s&&e!==s.getHTML()&&s.getText()===""&&e&&s.commands.setContent(e)},[e,s]),l.jsxs("div",{className:`border border-zinc-300 rounded-lg bg-white overflow-hidden focus-within:ring-2 focus-within:ring-blue-500 ${r}`,children:[l.jsx(Ii,{editor:s}),l.jsx(Ts,{editor:s})]})}const Pi=Os(function(){const{campaigns:t,automations:n,slug:r}=Rs(),{getToken:s}=zs(),[i,o]=z.useState("broadcast"),[a,c]=z.useState(null),[u,f]=z.useState(t),[d,h]=z.useState(""),[g,b]=z.useState(""),[y,v]=z.useState(!1),[x,E]=z.useState({ageMin:0,ageMax:100,preset:"all"}),[$,H]=z.useState(n||[]),[L,M]=z.useState(null),[w,S]=z.useState({subject:"",content:"",isEnabled:!1,timingType:"immediate",timingValue:0,triggerEvent:"",triggerCondition:"{}",channels:["email"],couponConfig:{enabled:!1,type:"percent",value:20,validityDays:7}}),[B,X]=z.useState({isOpen:!1,automationId:null,email:""}),[xe,he]=z.useState(!1),O=(p,k="success")=>{c({message:p,type:k}),setTimeout(()=>c(null),3e3)},[Oe,ye]=z.useState("");async function te(p){p.preventDefault(),v(!0);try{const k=await s(),R=await ae("/marketing",k,{method:"POST",headers:{"X-Tenant-Slug":r},body:JSON.stringify({subject:d,content:g,filters:x.preset==="all"?{}:{ageMin:x.ageMin,ageMax:x.ageMax}})});if(R.error)O(R.error,"error");else{O(`Campaign Sent to ${R.count} recipients!`),h(""),b("");const Q=await ae("/marketing",k,{headers:{"X-Tenant-Slug":r}});f(Q.campaigns||[])}}catch(k){O("Failed to send: "+k.message,"error")}finally{v(!1)}}async function oe(){try{const p=await s(),k=await ae("/marketing/automations",p,{method:"POST",headers:{"X-Tenant-Slug":r},body:JSON.stringify({triggerEvent:"new_student",subject:"New Automation"})});if(k.error)throw new Error(k.error);H([...$,k]),M(k),S({subject:k.subject,content:k.content,isEnabled:k.isEnabled,timingType:k.timingType||"immediate",timingValue:k.timingValue||0,triggerEvent:k.triggerEvent,triggerCondition:JSON.stringify(k.triggerCondition||{},null,2),channels:k.channels||["email"],couponConfig:k.couponConfig?{...k.couponConfig,enabled:!0}:{enabled:!1,type:"percent",value:20,validityDays:7}})}catch(p){O("Failed to create: "+p.message,"error")}}async function Yn(p){if(p.preventDefault(),!!L)try{let k=null;try{k=w.triggerCondition?JSON.parse(w.triggerCondition):null}catch{O("Invalid JSON in Condition field","error");return}const R=await s(),Q={...w,triggerCondition:k},is=await ae(`/marketing/automations/${L.id}`,R,{method:"PATCH",headers:{"X-Tenant-Slug":r},body:JSON.stringify(Q)});H($.map(yt=>yt.id===L.id?is:yt)),M(null),O("Automation updated successfully")}catch(k){O("Failed to update: "+k.message,"error")}}const[xt,Re]=z.useState({isOpen:!1,automationId:null});function Zn(p){Re({isOpen:!0,automationId:p})}async function es(){if(!xt.automationId)return;const p=xt.automationId;try{const k=await s();await ae(`/marketing/automations/${p}`,k,{method:"DELETE",headers:{"X-Tenant-Slug":r}}),H($.filter(R=>R.id!==p)),O("Automation deleted.")}catch(k){O("Failed to delete: "+k.message,"error")}finally{Re({isOpen:!1,automationId:null})}}function ts(p){X({isOpen:!0,automationId:p,email:B.email})}async function ns(p){if(p.preventDefault(),!(!B.automationId||!B.email)){he(!0);try{const k=await s();await ae(`/marketing/automations/${B.automationId}/test`,k,{method:"POST",headers:{"X-Tenant-Slug":r},body:JSON.stringify({email:B.email})}),O("Test email sent!"),X({...B,isOpen:!1})}catch(k){O("Failed to test: "+k.message,"error")}finally{he(!1)}}}const tn={new_student:"New Student Welcome",birthday:"Birthday Greeting",absent:"Win-back (Absent)",class_attended:"Class Follow-up",order_completed:"Order Follow-up",trial_ending:"Trial Ending",subscription_renewing:"Subscription Renewing"},ss=p=>p.timingType==="immediate"?"Immediate":p.timingType==="delay"?`Delay: ${p.timingValue} hours`:p.timingType==="before"?`${p.timingValue} hours Before`:p.timingType==="after"?`${p.timingValue} hours After`:p.delayHours>0?`Delay: ${p.delayHours} hours`:"Immediate";async function rs(p){try{const k=!p.isEnabled;H($.map(Q=>Q.id===p.id?{...Q,isEnabled:k}:Q));const R=await s();await ae(`/marketing/automations/${p.id}`,R,{method:"PATCH",headers:{"X-Tenant-Slug":r},body:JSON.stringify({isEnabled:k})})}catch(k){O("Failed to toggle: "+k.message,"error"),H($.map(R=>R.id===p.id?{...R,isEnabled:!p.isEnabled}:R))}}return l.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4 relative",children:[a&&l.jsxs("div",{className:`fixed top-4 right-4 z-[100] px-4 py-3 rounded-lg shadow-lg border flex items-center gap-3 animate-in slide-in-from-right fade-in duration-300 ${a.type==="error"?"bg-red-50 border-red-200 text-red-800":"bg-emerald-50 border-emerald-200 text-emerald-800"}`,children:[a.type==="error"?l.jsx(Hs,{className:"h-5 w-5"}):l.jsx(Ps,{className:"h-5 w-5"}),l.jsx("span",{className:"font-medium text-sm",children:a.message}),l.jsx("button",{onClick:()=>c(null),className:"ml-2 hover:opacity-70",children:l.jsx(Ds,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-zinc-900",children:"Marketing"}),l.jsx("p",{className:"text-zinc-500",children:"Engage your students with broadcasts and automations."})]}),l.jsxs("div",{className:"flex gap-4 mb-6 border-b border-zinc-200",children:[l.jsxs("button",{onClick:()=>o("broadcast"),className:`pb-3 px-1 font-medium text-sm transition-colors relative ${i==="broadcast"?"text-blue-600":"text-zinc-500 hover:text-zinc-700"}`,children:["Broadcasts",i==="broadcast"&&l.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600"})]}),l.jsxs("button",{onClick:()=>o("automation"),className:`pb-3 px-1 font-medium text-sm transition-colors relative ${i==="automation"?"text-blue-600":"text-zinc-500 hover:text-zinc-700"}`,children:["Automations",i==="automation"&&l.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600"})]})]}),i==="broadcast"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 space-y-6",children:l.jsxs("div",{className:"bg-white rounded-lg border border-zinc-200 p-6 shadow-sm",children:[l.jsxs("h2",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[l.jsx(Bs,{className:"h-5 w-5 text-blue-600"}),"New Broadcast"]}),l.jsxs("form",{onSubmit:te,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Subject Line"}),l.jsx("input",{type:"text",value:d,onChange:p=>h(p.target.value),className:"w-full border border-zinc-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. November Newsletter",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Message Content"}),l.jsx(vn,{value:g,onChange:b,placeholder:"Write your beautiful email content...",className:"min-h-[300px]"}),l.jsxs("div",{className:"flex justify-between items-start mt-1",children:[l.jsx("p",{className:"text-xs text-zinc-400",children:"Rich text enabled. Use the toolbar to format."}),l.jsxs("div",{className:"text-xs text-zinc-500 text-right",children:["Variables: ",l.jsx("span",{className:"font-mono bg-zinc-100 px-1 rounded",children:"{{firstName}}"})," ",l.jsx("span",{className:"font-mono bg-zinc-100 px-1 rounded",children:"{{studioName}}"})]})]})]}),l.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-lg",children:[l.jsx("label",{className:"block text-sm font-semibold text-zinc-800 mb-3",children:"Target Audience"}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{label:"All Students",value:"all",min:0,max:100},{label:"Youth (<18)",value:"youth",min:0,max:17},{label:"Adults (18-64)",value:"adults",min:18,max:64},{label:"Seniors (65+)",value:"seniors",min:65,max:100},{label:"Custom",value:"custom",min:x.ageMin,max:x.ageMax}].map(p=>l.jsx("button",{type:"button",onClick:()=>E({...x,preset:p.value,ageMin:p.min,ageMax:p.max}),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-colors ${x.preset===p.value?"bg-blue-600 text-white":"bg-white border border-zinc-300 text-zinc-600 hover:bg-zinc-50"}`,children:p.label},p.value))}),x.preset==="custom"&&l.jsxs("div",{className:"flex items-center gap-4 animate-in fade-in slide-in-from-top-1",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-[10px] uppercase font-bold text-zinc-500 mb-1",children:"Min Age"}),l.jsx("input",{type:"number",value:x.ageMin,onChange:p=>E({...x,ageMin:Number(p.target.value)}),className:"w-full border border-zinc-300 rounded px-2 py-1 text-sm outline-none"})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-[10px] uppercase font-bold text-zinc-500 mb-1",children:"Max Age"}),l.jsx("input",{type:"number",value:x.ageMax,onChange:p=>E({...x,ageMax:Number(p.target.value)}),className:"w-full border border-zinc-300 rounded px-2 py-1 text-sm outline-none"})]})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",disabled:y,className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:y?"Sending...":l.jsxs(l.Fragment,{children:[l.jsx(kt,{className:"h-4 w-4"}),"Send Broadcast"]})})})]})]})}),l.jsxs("div",{className:"bg-zinc-50 rounded-lg border border-zinc-200 p-6 h-fit",children:[l.jsx("h3",{className:"font-semibold text-zinc-700 mb-4",children:"Recent Campaigns"}),l.jsxs("div",{className:"space-y-4",children:[u.length===0&&l.jsx("p",{className:"text-sm text-zinc-500 italic",children:"No campaigns yet."}),u.map(p=>l.jsxs("div",{className:"bg-white border border-zinc-200 rounded p-3 shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-start mb-1",children:[l.jsx("span",{className:"font-medium text-sm text-zinc-900 line-clamp-1",children:p.subject}),l.jsx("span",{className:`text-[10px] uppercase font-bold px-1.5 py-0.5 rounded ${p.status==="sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:p.status})]}),l.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:new Date(p.sentAt).toLocaleDateString()}),l.jsxs("div",{className:"flex gap-3 text-xs text-zinc-600",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(kt,{className:"h-3 w-3"}),p.stats?.sent||0," Sent"]}),p.filters&&l.jsxs("span",{className:"flex items-center gap-1 bg-zinc-100 px-1.5 rounded",children:[p.filters.ageMin,"-",p.filters.ageMax," yrs"]})]})]},p.id))]})]})]}),i==="automation"&&l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"bg-white p-6 rounded-lg border border-zinc-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"font-semibold text-lg flex items-center gap-2",children:[l.jsx($s,{className:"h-5 w-5 text-amber-500"}),"Active Automations"]}),l.jsx("p",{className:"text-sm text-zinc-500",children:"These emails are sent automatically based on student activity."})]}),l.jsxs("button",{onClick:oe,className:"flex items-center gap-2 bg-zinc-900 text-white px-3 py-1.5 rounded-lg text-sm font-medium hover:bg-zinc-800",children:[l.jsx(_s,{className:"h-4 w-4"}),"New Automation"]})]}),l.jsx("div",{className:"flex flex-col gap-2",children:$.map(p=>l.jsxs("div",{className:"group border border-zinc-200 rounded-lg px-4 py-3 flex items-center justify-between hover:border-blue-300 transition-colors bg-white",children:[l.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[l.jsx("div",{className:`p-1.5 rounded-full shrink-0 ${p.isEnabled?"bg-blue-100 text-blue-600":"bg-zinc-100 text-zinc-400"}`,children:l.jsx(Us,{className:"h-4 w-4"})}),l.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[l.jsx("h3",{className:"font-medium text-zinc-900 whitespace-nowrap shrink-0",children:tn[p.triggerEvent]||p.triggerEvent||p.triggerType}),l.jsxs("span",{className:"flex items-center gap-1 bg-zinc-50 px-2 py-0.5 rounded text-xs text-zinc-500 whitespace-nowrap shrink-0 border border-zinc-100",children:[l.jsx(Fs,{className:"w-3 h-3"}),ss(p)]}),l.jsx("span",{className:"text-sm text-zinc-500 truncate min-w-0",children:p.subject})]})]}),l.jsxs("div",{className:"flex items-center gap-4 shrink-0 ml-4",children:[l.jsx("button",{onClick:()=>rs(p),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${p.isEnabled?"bg-blue-600":"bg-zinc-200"}`,children:l.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${p.isEnabled?"translate-x-6":"translate-x-1"}`})}),l.jsx("button",{onClick:()=>ts(p.id),className:"text-xs text-zinc-500 hover:text-zinc-800 p-2 hover:bg-zinc-100 rounded",title:"Send Test",children:l.jsx(kt,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>{M(p),S({subject:p.subject,content:p.content,isEnabled:p.isEnabled,timingType:p.timingType||(p.delayHours>0?"delay":"immediate"),timingValue:p.timingValue||p.delayHours||0,triggerEvent:p.triggerEvent||p.triggerType,triggerCondition:JSON.stringify(p.triggerCondition||{},null,2),channels:p.channels||["email"],couponConfig:p.couponConfig?{...p.couponConfig,enabled:!0}:{enabled:!1,type:"percent",value:20,validityDays:7}})},className:"text-xs text-zinc-500 hover:text-blue-600 p-2 hover:bg-blue-50 rounded",title:"Edit",children:l.jsx(Ws,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>Zn(p.id),className:"text-xs text-zinc-500 hover:text-red-600 p-2 hover:bg-red-50 rounded",title:"Delete",children:l.jsx(rn,{className:"h-4 w-4"})})]})]},p.id))})]})}),l.jsx(vt,{isOpen:B.isOpen,onClose:()=>X({...B,isOpen:!1}),title:"Send Test Email",children:l.jsxs("form",{onSubmit:ns,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"To Email Address"}),l.jsx("input",{type:"email",value:B.email,onChange:p=>X({...B,email:p.target.value}),className:"w-full border border-zinc-300 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"you@example.com",autoFocus:!0,required:!0}),l.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"This will send a real email to the address above."})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{type:"button",onClick:()=>X({...B,isOpen:!1}),className:"px-4 py-2 text-sm text-zinc-600 hover:text-zinc-900",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:xe,className:"bg-zinc-900 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-zinc-800 disabled:opacity-50",children:xe?"Sending...":"Send Test"})]})]})}),l.jsx(vt,{isOpen:!!L,onClose:()=>M(null),title:"Edit Automation",maxWidth:"max-w-2xl",children:L&&l.jsxs("form",{onSubmit:Yn,className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex-1 overflow-y-auto max-h-[70vh] pr-2 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between bg-zinc-50 p-3 rounded-lg border border-zinc-200",children:[l.jsx("span",{className:"text-sm font-medium text-zinc-900",children:"Automation Status"}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:w.isEnabled,onChange:p=>S({...w,isEnabled:p.target.checked}),className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 bg-zinc-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),l.jsx("span",{className:"ml-3 text-sm font-medium text-zinc-700",children:w.isEnabled?"Enabled":"Disabled"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Trigger Event"}),l.jsx("select",{value:w.triggerEvent,onChange:p=>S({...w,triggerEvent:p.target.value}),className:"w-full border border-zinc-300 rounded px-2 py-1.5 text-sm bg-white",children:Object.entries(tn).map(([p,k])=>l.jsx("option",{value:p,children:k},p))})]}),l.jsx("div",{className:"space-y-2",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Timing Rule"}),l.jsxs("select",{value:w.timingType,onChange:p=>S({...w,timingType:p.target.value}),className:"w-full border border-zinc-300 rounded px-2 py-1.5 text-sm bg-white",children:[l.jsx("option",{value:"immediate",children:"Immediately"}),l.jsx("option",{value:"delay",children:"Delay (Wait)"}),l.jsx("option",{value:"before",children:"Before Event"}),l.jsx("option",{value:"after",children:"After Event"})]})]}),w.timingType!=="immediate"&&l.jsxs("div",{className:"w-20",children:[l.jsx("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Hours"}),l.jsx("input",{type:"number",min:"0",value:w.timingValue,onChange:p=>S({...w,timingValue:parseInt(p.target.value)||0}),className:"w-full border border-zinc-300 rounded px-2 py-1.5 text-sm bg-white"})]})]})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Trigger Conditions (JSON)"}),l.jsx("textarea",{value:w.triggerCondition,onChange:p=>S({...w,triggerCondition:p.target.value}),className:"w-full border border-zinc-300 rounded px-2 py-1 text-xs font-mono h-12 bg-zinc-50",placeholder:'{ "planId": "..." }'})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"block text-xs font-medium text-zinc-500",children:"Channels"}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm bg-white border border-zinc-200 rounded px-3 py-1.5",children:[l.jsx("input",{type:"checkbox",checked:w.channels.includes("email"),onChange:p=>{const k=w.channels,R=p.target.checked?[...k,"email"]:k.filter(Q=>Q!=="email");S({...w,channels:R})},className:"rounded text-blue-600 focus:ring-blue-500"}),"Email"]}),l.jsx("span",{className:"text-xs text-zinc-400",children:"SMS Coming Soon"})]})]}),l.jsxs("div",{className:"bg-zinc-50 p-3 rounded-lg border border-zinc-200",children:[l.jsxs("label",{className:"flex items-center gap-2 mb-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:w.couponConfig.enabled,onChange:p=>S({...w,couponConfig:{...w.couponConfig,enabled:p.target.checked}}),className:"w-4 h-4 text-green-600 rounded focus:ring-green-500"}),l.jsx("span",{className:"text-sm font-medium text-zinc-900",children:"Include Discount Coupon"})]}),w.couponConfig.enabled&&l.jsxs("div",{className:"grid grid-cols-3 gap-2 animate-in fade-in slide-in-from-top-1",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-medium text-zinc-500 mb-1",children:"Type"}),l.jsxs("select",{value:w.couponConfig.type,onChange:p=>S({...w,couponConfig:{...w.couponConfig,type:p.target.value}}),className:"w-full border border-zinc-300 rounded px-2 py-1 text-xs",children:[l.jsx("option",{value:"percent",children:"Percent (%)"}),l.jsx("option",{value:"amount",children:"Amount ($)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-medium text-zinc-500 mb-1",children:"Value"}),l.jsx("input",{type:"number",value:w.couponConfig.value,onChange:p=>S({...w,couponConfig:{...w.couponConfig,value:parseInt(p.target.value)||0}}),className:"w-full border border-zinc-300 rounded px-2 py-1 text-xs"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-medium text-zinc-500 mb-1",children:"Validity (Days)"}),l.jsx("input",{type:"number",value:w.couponConfig.validityDays,onChange:p=>S({...w,couponConfig:{...w.couponConfig,validityDays:parseInt(p.target.value)||7}}),className:"w-full border border-zinc-300 rounded px-2 py-1 text-xs"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Subject Line"}),l.jsx("input",{type:"text",value:w.subject,onChange:p=>S({...w,subject:p.target.value}),className:"w-full border border-zinc-300 rounded px-3 py-1.5 text-sm outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-zinc-500 mb-1",children:"Content"}),l.jsx(vn,{value:w.content,onChange:p=>S({...w,content:p}),placeholder:"Write your automation content...",className:"min-h-[200px]"}),l.jsxs("div",{className:"flex gap-2 mt-1 text-[10px] text-zinc-500 flex-wrap",children:[l.jsx("span",{children:"Variables:"}),l.jsx("code",{className:"bg-zinc-100 px-1 rounded",children:"{{firstName}}"}),l.jsx("code",{className:"bg-zinc-100 px-1 rounded",children:"{{lastName}}"}),l.jsx("code",{className:"bg-zinc-100 px-1 rounded",children:"{{email}}"}),l.jsx("code",{className:"bg-zinc-100 px-1 rounded",children:"{{title}}"}),l.jsx("code",{className:"bg-zinc-100 px-1 rounded",children:"{{address}}"}),w.couponConfig.enabled&&l.jsx("code",{className:"bg-yellow-100 text-yellow-800 px-1 rounded",children:"{{coupon_code}}"})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-4 mt-2 border-t border-zinc-100",children:[l.jsx("button",{type:"button",onClick:()=>M(null),className:"px-4 py-2 text-sm text-zinc-600 hover:text-zinc-900 border border-zinc-200 rounded-lg hover:bg-zinc-50",children:"Cancel"}),l.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 shadow-sm",children:"Save Changes"})]})]})}),l.jsx(vt,{isOpen:xt.isOpen,onClose:()=>Re({isOpen:!1,automationId:null}),title:"Delete Automation",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-zinc-600",children:"Are you sure you want to delete this automation? This action cannot be undone."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>Re({isOpen:!1,automationId:null}),className:"px-4 py-2 text-sm font-medium text-zinc-600 hover:text-zinc-900",children:"Cancel"}),l.jsxs("button",{onClick:es,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 shadow-sm flex items-center gap-2",children:[l.jsx(rn,{className:"w-4 h-4"}),"Delete Forever"]})]})]})})]})});export{Pi as default};
