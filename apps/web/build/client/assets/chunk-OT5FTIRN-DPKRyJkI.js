import{e as b,b as M,c as w,d as U,f as A,C as x}from"./index-tijl61gk.js";import{a as h,R as S}from"./vendor-sentry-JepEA2vj.js";var L=class P extends Error{static kind="ClerkError";clerkError=!0;code;longMessage;docsUrl;cause;get name(){return this.constructor.name}constructor(t){super(new.target.formatMessage(new.target.kind,t.message,t.code,t.docsUrl),{cause:t.cause}),Object.setPrototypeOf(this,P.prototype),this.code=t.code,this.docsUrl=t.docsUrl,this.longMessage=t.longMessage,this.cause=t.cause}toString(){return`[${this.name}]
Message:${this.message}`}static formatMessage(t,r,n,s){const o="Clerk:",a=new RegExp(o.replace(" ","\\s*"),"i");return r=r.replace(a,""),r=`${o} ${r.trim()}

(code="${n}")

`,s&&(r+=`

Docs: ${s}`),r}};const B=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function I({packageName:e,customMessages:t}){let r=e;function n(o,a){if(!a)return`${r}: ${o}`;let i=o;const l=o.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const c of l){const u=(a[c[1]]||"").toString();i=i.replace(`{{${c[1]}}}`,u)}return`${r}: ${i}`}const s={...B,...t};return{setPackageName({packageName:o}){return typeof o=="string"&&(r=o),this},setMessages({customMessages:o}){return Object.assign(s,o||{}),this},throwInvalidPublishableKeyError(o){throw new Error(n(s.InvalidPublishableKeyErrorMessage,o))},throwInvalidProxyUrl(o){throw new Error(n(s.InvalidProxyUrlErrorMessage,o))},throwMissingPublishableKeyError(){throw new Error(n(s.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(n(s.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(o){throw new Error(n(s.MissingClerkProvider,o))},throw(o){throw new Error(n(o))}}}var X=class C extends L{static kind="ClerkRuntimeError";clerkRuntimeError=!0;constructor(t,r){super({...r,message:t}),Object.setPrototypeOf(this,C.prototype)}};const R={strict_mfa:{afterMinutes:10,level:"multi_factor"},strict:{afterMinutes:10,level:"second_factor"},moderate:{afterMinutes:60,level:"second_factor"},lax:{afterMinutes:1440,level:"second_factor"}},$=new Set(["first_factor","second_factor","multi_factor"]),z=new Set(["strict_mfa","strict","moderate","lax"]),_=e=>typeof e=="number"&&e>0,T=e=>$.has(e),O=e=>z.has(e),p=e=>e.replace(/^(org:)*/,"org:"),W=(e,t)=>{const{orgId:r,orgRole:n,orgPermissions:s}=t;return!e.role&&!e.permission||!r||!n||!s?null:e.permission?s.includes(p(e.permission)):e.role?p(n)===p(e.role):null},y=(e,t)=>{const{org:r,user:n}=V(e),[s,o]=t.split(":"),a=o||s;return s==="org"?r.includes(a):s==="user"?n.includes(a):[...r,...n].includes(a)},K=(e,t)=>{const{features:r,plans:n}=t;return e.feature&&r?y(r,e.feature):e.plan&&n?y(n,e.plan):null},V=e=>{const t=e?e.split(",").map(r=>r.trim()):[];return{org:t.filter(r=>r.split(":")[0].includes("o")).map(r=>r.split(":")[1]),user:t.filter(r=>r.split(":")[0].includes("u")).map(r=>r.split(":")[1])}},F=e=>{if(!e)return!1;const t=s=>typeof s=="string"?R[s]:s,r=typeof e=="string"&&O(e),n=typeof e=="object"&&T(e.level)&&_(e.afterMinutes);return r||n?t.bind(null,e):!1},j=(e,{factorVerificationAge:t})=>{if(!e.reverification||!t)return null;const r=F(e.reverification);if(!r)return null;const{level:n,afterMinutes:s}=r(),[o,a]=t,i=o!==-1?s>o:null,l=a!==-1?s>a:null;switch(n){case"first_factor":return i;case"second_factor":return a!==-1?l:i;case"multi_factor":return a===-1?i:i&&l}},D=e=>t=>{if(!e.userId)return!1;const r=K(t,e),n=W(t,e),s=j(t,e);return[r||n,s].some(o=>o===null)?[r||n,s].some(o=>o===!0):[r||n,s].every(o=>o===!0)},Y=({authObject:{sessionId:e,sessionStatus:t,userId:r,actor:n,orgId:s,orgRole:o,orgSlug:a,signOut:i,getToken:l,has:c,sessionClaims:u},options:{treatPendingAsSignedOut:d=!0}})=>{if(e===void 0&&r===void 0)return{isLoaded:!1,isSignedIn:void 0,sessionId:e,sessionClaims:void 0,userId:r,actor:void 0,orgId:void 0,orgRole:void 0,orgSlug:void 0,has:void 0,signOut:i,getToken:l};if(e===null&&r===null)return{isLoaded:!0,isSignedIn:!1,sessionId:e,userId:r,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:i,getToken:l};if(d&&t==="pending")return{isLoaded:!0,isSignedIn:!1,sessionId:null,userId:null,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:i,getToken:l};if(e&&u&&r&&s&&o)return{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:u,userId:r,actor:n||null,orgId:s,orgRole:o,orgSlug:a||null,has:c,signOut:i,getToken:l};if(e&&u&&r&&!s)return{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:u,userId:r,actor:n||null,orgId:null,orgRole:null,orgSlug:null,has:c,signOut:i,getToken:l}};var g=I({packageName:"@clerk/clerk-react"});function ee(e){g.setMessages(e).setPackageName(e)}var[re,q]=w("AuthContext"),te=x,f=U,oe="You've added multiple <ClerkProvider> components in your React component tree. Wrap your components in a single <ClerkProvider>.",ne=e=>`You've passed multiple children components to <${e}/>. You can only pass a single child component or text.`,H="Invalid state. Feel free to submit a bug or reach out to support here: https://clerk.com/support",se="Unsupported usage of isSatellite, domain or proxyUrl. The usage of isSatellite, domain or proxyUrl as function is not supported in non-browser environments.",ie="<UserProfile.Page /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",ae="<UserProfile.Link /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",le="<OrganizationProfile.Page /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",ue="<OrganizationProfile.Link /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",ce=e=>`<${e} /> can only accept <${e}.Page /> and <${e}.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.`,de=e=>`Missing props. <${e}.Page /> component requires the following props: url, label, labelIcon, alongside with children to be rendered inside the page.`,pe=e=>`Missing props. <${e}.Link /> component requires the following props: url, label and labelIcon.`,he=e=>`The <${e}/> component uses path-based routing by default unless a different routing strategy is provided using the \`routing\` prop. When path-based routing is used, you need to provide the path where the component is mounted on by using the \`path\` prop. Example: <${e} path={'/my-path'} />`,ge=e=>`The \`path\` prop will only be respected when the Clerk component uses path-based routing. To resolve this error, pass \`routing='path'\` to the <${e}/> component, or drop the \`path\` prop to switch to hash-based routing. For more details please refer to our docs: https://clerk.com/docs`,fe="<UserButton /> can only accept <UserButton.UserProfilePage />, <UserButton.UserProfileLink /> and <UserButton.MenuItems /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.",ve="<UserButton.MenuItems /> component can only accept <UserButton.Action /> and <UserButton.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.",me="<UserButton.MenuItems /> component needs to be a direct child of `<UserButton />`.",ke="<UserButton.Action /> component needs to be a direct child of `<UserButton.MenuItems />`.",ye="<UserButton.Link /> component needs to be a direct child of `<UserButton.MenuItems />`.",be="Missing props. <UserButton.Link /> component requires the following props: href, label and labelIcon.",Pe="Missing props. <UserButton.Action /> component requires the following props: label.",v=e=>{M(()=>{g.throwMissingClerkProviderError({source:e})})},E=e=>new Promise(t=>{const r=n=>{["ready","degraded"].includes(n)&&(t(),e.off("status",r))};e.on("status",r,{notify:!0})}),N=e=>async t=>(await E(e),e.session?e.session.getToken(t):null),G=e=>async(...t)=>(await E(e),e.signOut(...t)),Ce=(e={})=>{var t;v("useAuth");const{treatPendingAsSignedOut:r,...n}=e??{},s=n;let a=q();a.sessionId===void 0&&a.userId===void 0&&(a=s??{});const i=f(),l=h.useCallback(N(i),[i]),c=h.useCallback(G(i),[i]);return(t=i.telemetry)==null||t.record(b("useAuth",{treatPendingAsSignedOut:r})),J({...a,getToken:l,signOut:c},{treatPendingAsSignedOut:r})};function J(e,{treatPendingAsSignedOut:t=!0}={}){const{userId:r,orgId:n,orgRole:s,has:o,signOut:a,getToken:i,orgPermissions:l,factorVerificationAge:c,sessionClaims:u}=e??{},d=h.useCallback(k=>o?o(k):D({userId:r,orgId:n,orgRole:s,orgPermissions:l,factorVerificationAge:c,features:u?.fea||"",plans:u?.pla||""})(k),[o,r,n,s,l,c,u]),m=Y({authObject:{...e,getToken:i,signOut:a,has:d},options:{treatPendingAsSignedOut:t}});return m||g.throw(H)}var Ee=()=>{var e;v("useSignUp");const t=f(),r=A();return(e=t.telemetry)==null||e.record(b("useSignUp")),r?{isLoaded:!0,signUp:r.signUp,setActive:t.setActive}:{isLoaded:!1,signUp:void 0,setActive:void 0}},Me=(e,t)=>{const n=(typeof t=="string"?t:t?.component)||e.displayName||e.name||"Component";e.displayName=n;const s=typeof t=="string"?void 0:t,o=a=>{v(n);const i=f();return!i.loaded&&!s?.renderWhileLoading?null:S.createElement(e,{...a,component:n,clerk:i})};return o.displayName=`withClerk(${n})`,o};export{re as A,X as C,te as I,v as a,Ee as b,ce as c,de as d,pe as e,ie as f,ae as g,me as h,ke as i,ye as j,le as k,fe as l,ve as m,Pe as n,ue as o,be as p,g as q,ne as r,he as s,ge as t,Ce as u,I as v,Me as w,ee as x,oe as y,se as z};
