import{w as j,u as w,c as z,e as v,F as c}from"./chunk-JMJ3UQ3L-DsmOvVYk.js";import{j as e}from"./vendor-puck-Ox9nZAW8.js";import{a as k}from"./vendor-sentry-JepEA2vj.js";import{c as x}from"./cn-Bv06xx5N.js";import{a as N,i as m,f as a}from"./vendor-date-fns-0CaSm0ev.js";import{C as y}from"./calendar-vWMk9t_Y.js";import{U as C}from"./user-DrfMgmZN.js";import{M as D}from"./map-pin-BMDRpB-a.js";import{C as S}from"./circle-check-N5m9neNQ.js";import"./vendor-charts-CBCVHb7z.js";import"./createLucideIcon-CZ3UnH4h.js";const R=j(function(){const{classes:h,myBookings:p,selectedDate:f}=w(),n=z();v();const[r,u]=k.useState(new Date(f)),b=Array.from({length:7},(t,s)=>N(new Date,s)),o=(h||[]).filter(t=>m(new Date(t.startTime),r)),d=t=>n.formData?.get("classId")===t&&n.state==="submitting",g=t=>p?.find(s=>s.class.id===t||s.classId===t);return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsx("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Class Schedule"})}),e.jsx("div",{className:"flex overflow-x-auto pb-2 gap-2 hide-scrollbar",children:b.map(t=>{const s=m(t,r);return e.jsxs("button",{onClick:()=>u(t),className:x("flex flex-col items-center min-w-[4.5rem] p-3 rounded-xl border transition-all",s?"bg-indigo-600 border-indigo-600 text-white shadow-md shadow-indigo-200 dark:shadow-none":"bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 text-zinc-500 hover:border-zinc-300 dark:hover:border-zinc-700"),children:[e.jsx("span",{className:"text-xs font-medium opacity-80 uppercase",children:a(t,"EEE")}),e.jsx("span",{className:"text-xl font-bold",children:a(t,"d")})]},t.toISOString())})}),e.jsx("div",{className:"space-y-4",children:o.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-zinc-900 rounded-2xl border border-zinc-200 dark:border-zinc-800 border-dashed",children:[e.jsx(y,{className:"mx-auto h-12 w-12 text-zinc-300 dark:text-zinc-600 mb-3"}),e.jsx("h3",{className:"text-lg font-medium text-zinc-900 dark:text-zinc-100",children:"No classes scheduled"}),e.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:"There are no classes available on this day."})]}):o.map(t=>{const s=g(t.id),i=t.capacity>0&&(t.bookedCount||0)>=t.capacity,l=new Date(t.startTime);return new Date(l.getTime()+t.durationMinutes*6e4),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-5 border border-zinc-200 dark:border-zinc-800 shadow-sm flex flex-col sm:flex-row gap-5 hover:border-indigo-200 dark:hover:border-indigo-900 transition-colors",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[5rem] border-r border-zinc-100 dark:border-zinc-800 pr-5",children:[e.jsx("span",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100",children:a(l,"h:mm a")}),e.jsxs("span",{className:"text-xs text-zinc-500",children:[t.durationMinutes," min"]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-zinc-900 dark:text-zinc-100 text-lg mb-1",children:t.title}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-2 text-sm text-zinc-500 dark:text-zinc-400",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(C,{size:14}),e.jsx("span",{children:t.instructor?.profile?.firstName||"Staff"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(D,{size:14}),e.jsx("span",{children:t.location?.name||"Main Studio"})]})]}),t.description&&e.jsx("p",{className:"text-sm text-zinc-500 mt-2 line-clamp-2",children:t.description})]}),e.jsx("div",{className:"flex flex-col justify-center min-w-[8rem]",children:s?e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 text-sm font-bold bg-emerald-50 dark:bg-emerald-900/20 px-3 py-1.5 rounded-lg justify-center",children:[e.jsx(S,{size:16}),"Booked"]}),e.jsxs(c,{method:"post",children:[e.jsx("input",{type:"hidden",name:"bookingId",value:s.id}),e.jsx("input",{type:"hidden",name:"intent",value:"cancel"}),e.jsx("button",{className:"text-xs text-red-500 hover:text-red-600 hover:underline w-full text-center",children:"Cancel Booking"})]})]}):e.jsxs(c,{method:"post",children:[e.jsx("input",{type:"hidden",name:"classId",value:t.id}),e.jsx("input",{type:"hidden",name:"intent",value:"book"}),e.jsx("button",{disabled:i||d(t.id),className:x("w-full py-2.5 px-4 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2",i?"bg-zinc-100 text-zinc-400 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-lg shadow-indigo-200 dark:shadow-none"),children:d(t.id)?"Booking...":i?"Full":"Book Class"}),i&&e.jsx("div",{className:"text-center text-xs text-zinc-400 mt-1",children:"Waitlist Available"})]})})]},t.id)})})]})});export{R as default};
