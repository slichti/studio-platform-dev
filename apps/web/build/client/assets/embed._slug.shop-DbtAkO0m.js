import{w as v,u as w,r as x}from"./chunk-JMJ3UQ3L-OilvkdUQ.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{S as z}from"./shopping-cart-DWjxwiNJ.js";import{P as h}from"./package-DKq1ZN6v.js";import{P as f}from"./plus-BMDkmOrf.js";import{X as y}from"./x-iEfBqcMQ.js";import{M as C}from"./minus-BbWEGqEE.js";import"./createLucideIcon-Bxh06Jdl.js";const T=v(function(){const{products:a,slug:u}=w(),[n,m]=x.useState(new Map),[j,c]=x.useState(!1),d=s=>{m(t=>{const i=new Map(t);return i.set(s,(i.get(s)||0)+1),i})},b=s=>{m(t=>{const i=new Map(t),r=i.get(s)||0;return r<=1?i.delete(s):i.set(s,r-1),i})},o=Array.from(n.values()).reduce((s,t)=>s+t,0),p=Array.from(n.entries()).reduce((s,[t,i])=>{const r=a.find(N=>N.id===t);return s+(r?.price||0)*i},0),l=s=>`$${(s/100).toFixed(2)}`,g=[...new Set(a.map(s=>s.category||"Other"))];return e.jsxs("div",{className:"min-h-screen bg-zinc-50",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-zinc-200 px-4 py-3",children:e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-bold text-zinc-900",children:"Shop"}),e.jsxs("button",{onClick:()=>c(!0),className:"relative p-2 hover:bg-zinc-100 rounded-full transition",children:[e.jsx(z,{size:24}),o>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-zinc-900 text-white text-xs font-bold rounded-full flex items-center justify-center",children:o})]})]})}),e.jsx("main",{className:"max-w-6xl mx-auto px-4 py-8",children:a.length===0?e.jsxs("div",{className:"text-center py-20 text-zinc-500",children:[e.jsx(h,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No products available"})]}):g.map(s=>e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"text-lg font-bold text-zinc-900 mb-4",children:s}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.filter(t=>(t.category||"Other")===s).map(t=>e.jsxs("div",{className:"bg-white rounded-lg border border-zinc-200 overflow-hidden hover:shadow-md transition",children:[e.jsx("div",{className:"aspect-square bg-zinc-100",children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(h,{size:32,className:"text-zinc-300"})})}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-zinc-900 text-sm",children:t.name}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"font-bold text-zinc-900",children:l(t.price)}),t.stockQuantity<=0?e.jsx("span",{className:"text-xs text-red-500",children:"Out of Stock"}):e.jsx("button",{onClick:()=>d(t.id),className:"p-1.5 bg-zinc-900 text-white rounded-full hover:bg-zinc-800 transition",children:e.jsx(f,{size:16})})]})]})]},t.id))})]},s))}),j&&e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>c(!1)}),e.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-full max-w-md bg-white shadow-xl flex flex-col animate-in slide-in-from-right",children:[e.jsxs("div",{className:"p-4 border-b border-zinc-200 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-bold",children:["Your Cart (",o,")"]}),e.jsx("button",{onClick:()=>c(!1),children:e.jsx(y,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:n.size===0?e.jsx("p",{className:"text-center text-zinc-500 py-8",children:"Your cart is empty"}):Array.from(n.entries()).map(([s,t])=>{const i=a.find(r=>r.id===s);return i?e.jsxs("div",{className:"flex gap-4 p-3 bg-zinc-50 rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-zinc-200 rounded flex-shrink-0",children:i.imageUrl&&e.jsx("img",{src:i.imageUrl,className:"w-full h-full object-cover rounded"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-sm",children:i.name}),e.jsx("p",{className:"text-sm text-zinc-500",children:l(i.price)}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("button",{onClick:()=>b(s),className:"p-1 bg-white border rounded",children:e.jsx(C,{size:14})}),e.jsx("span",{className:"text-sm font-medium w-6 text-center",children:t}),e.jsx("button",{onClick:()=>d(s),className:"p-1 bg-white border rounded",children:e.jsx(f,{size:14})})]})]}),e.jsx("div",{className:"font-bold text-sm",children:l(i.price*t)})]},s):null})}),n.size>0&&e.jsxs("div",{className:"p-4 border-t border-zinc-200 space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:l(p)})]}),e.jsx("a",{href:`/studio/${u}/checkout?cart=${encodeURIComponent(JSON.stringify(Object.fromEntries(n)))}`,className:"block w-full py-3 bg-zinc-900 text-white text-center font-medium rounded-lg hover:bg-zinc-800",children:"Checkout"})]})]})]})]})});export{T as default};
