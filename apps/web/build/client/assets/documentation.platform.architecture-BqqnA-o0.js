const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mermaid.core-BJQrRNL7.js","assets/preload-helper-BXl3LOEh.js","assets/vendor-sentry-JepEA2vj.js","assets/vendor-charts-CBCVHb7z.js","assets/vendor-puck-Ox9nZAW8.js","assets/vendor-puck-B4Ym435T.css"])))=>i.map(i=>d[i]);
import{_ as a}from"./preload-helper-BXl3LOEh.js";import{w as n,f as l,n as c}from"./chunk-JMJ3UQ3L-DsmOvVYk.js";import{j as e}from"./vendor-puck-Ox9nZAW8.js";import{a as o}from"./vendor-sentry-JepEA2vj.js";import{c as d}from"./createLucideIcon-CZ3UnH4h.js";import{G as x}from"./globe-B4XmurjP.js";import{D as t}from"./database-VZ7s55nv.js";import{S as m}from"./shield-xoR-gJzw.js";import{L as h}from"./lock-t3rSRUYC.js";import{S as p}from"./server-Bx7LitLS.js";const u=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],g=d("cloud",u),R=n(function(){o.useEffect(()=>{a(()=>import("./mermaid.core-BJQrRNL7.js").then(s=>s.b7),__vite__mapDeps([0,1,2,3,4,5])).then(s=>{s.default.initialize({startOnLoad:!0,theme:"neutral"}),s.default.contentLoaded()})},[]);const{isPlatformAdmin:r}=l();return r?e.jsxs("div",{className:"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-zinc-900 dark:text-zinc-50 mb-4 font-serif",children:"Platform Architecture"}),e.jsx("p",{className:"text-xl text-zinc-600 dark:text-zinc-400 leading-relaxed max-w-3xl",children:"High-level overview of the Studio Platform infrastructure, built on Cloudflare's edge network for performance and scalability."})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-3",children:[e.jsx(g,{className:"text-blue-500"})," Core Infrastructure"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(x,{size:20,className:"text-orange-500"}),e.jsx("h3",{className:"font-bold text-lg",children:"Cloudflare Workers & Pages"})]}),e.jsxs("ul",{className:"space-y-2 text-zinc-600 dark:text-zinc-400 text-sm",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Web App:"})," Deployed to Cloudflare Pages (Remix/React Router)."]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"API Layer:"})," Cloudflare Workers (Hono framework)."]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Edge Runtime:"})," Code runs within milliseconds of users globally."]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("pre",{className:"mermaid",children:`
                                graph TD
                                    User[User Browser] -->|HTTPS| CF[Cloudflare Network]
                                    CF -->|Asset Request| Pages[Pages (Static Assets)]
                                    CF -->|API Request| Worker[Worker (Hono API)]
                                    Worker -->|Query| D1[(D1 Database)]
                                    Worker -->|Upload| R2[(R2 Storage)]
                                    Worker -.->|Payment| Stripe[Stripe Connect]
                                    Worker -.->|Email| Resend[Resend / SMTP]
                                    Worker -.->|SMS| Twilio[Twilio]
                                    
                                    subgraph "New Capabilities"
                                    Worker -->|Aggregations| Analytics[Analytics Engine (SQLite)]
                                    Worker -.->|Push| Expo[Expo Push Notifications]
                                    end
                                `})})]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(t,{size:20,className:"text-green-500"}),e.jsx("h3",{className:"font-bold text-lg",children:"Data & Storage"})]}),e.jsxs("ul",{className:"space-y-2 text-zinc-600 dark:text-zinc-400 text-sm",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Database:"})," Cloudflare D1 (SQLite at the edge)."]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Object Storage:"})," Cloudflare R2 (Images, Videos, Assets)."]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"ORM:"})," Drizzle ORM for type-safe database queries."]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Analytics:"})," Optimized group-by queries for Reporting."]})]})]})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-3",children:[e.jsx(m,{className:"text-purple-500"})," Security & Identity"]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800",children:[e.jsx("p",{className:"text-zinc-600 dark:text-zinc-400 mb-6",children:"We use a hybrid approach for authentication and multi-tenancy to ensure data isolation and secure access."}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[e.jsx(h,{size:16})," Identity Provider"]}),e.jsxs("p",{className:"text-sm text-zinc-500",children:[e.jsx("strong",{children:"Clerk"})," handles user identity, MFA, and session management."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[e.jsx(p,{size:16})," API Security"]}),e.jsx("p",{className:"text-sm text-zinc-500",children:"Validates JWTs using RS256 (Clerk) and HS256 (Impersonation) algorithms."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[e.jsx(t,{size:16})," Data Isolation"]}),e.jsxs("p",{className:"text-sm text-zinc-500",children:["Logical isolation using ",e.jsx("code",{children:"tenantId"})," column on all major tables."]})]})]})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Key Services"}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:["Billing (Stripe Connect)","Realtime Chat (Durable Objects)","Video Processing (R2 + Workers)","Email (Resend/System)","SMS (Twilio)","Marketing Automations (Crons)","Inventory Management (Retail)"].map((s,i)=>e.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-sm font-medium text-zinc-700 dark:text-zinc-300",children:s},i))})]})]}):e.jsx(c,{to:"/documentation",replace:!0})});export{R as default};
