import{w as y,c as j,r as c}from"./chunk-JMJ3UQ3L-CxfiyNnI.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{a as k}from"./api-D1U4i9fn.js";import{S as N}from"./smartphone-wAOZA_39.js";import{G as w}from"./globe-BaAOCTJg.js";import{M as S}from"./messages-square-B-6krHXz.js";import{C as m}from"./credit-card-Bl2CRyQo.js";import{V as p}from"./video-BNsgPGFP.js";import{M as E}from"./message-square-DYgn44iF.js";import{M}from"./mail-CPnlCm8O.js";import{S as v}from"./save-DZgVrOXA.js";import{u as _}from"./chunk-OT5FTIRN-CBo2Dujz.js";import"./createLucideIcon-CglF3LvP.js";import"./index-CNOED--u.js";import"./index-DxEZQSMD.js";const u=[{key:"feature_mobile_app",label:"White-Label Mobile App",description:"Enable Mobile App settings and promotion across all studios. Keep disabled until apps are approved.",icon:N},{key:"feature_website_builder",label:"Website Builder",description:"Enable drag-and-drop website creation for tenants using Puck editor.",icon:w},{key:"feature_chat",label:"Chat System",description:"Enable real-time chat for support and community using Durable Objects.",icon:S},{key:"feature_financials",label:"Financials & Payouts",description:"Global master switch for Financial reporting and Stripe payouts.",icon:m},{key:"feature_vod",label:"Video on Demand (VOD)",description:"Global master switch for VOD functionality.",icon:p},{key:"feature_zoom",label:"Zoom Integration",description:"Enable Zoom meeting creation and sync.",icon:p},{key:"feature_pos",label:"POS & Retail",description:"Enable Point of Sale and Product management.",icon:m},{key:"feature_sms",label:"SMS Messaging",description:"Enable Twilio SMS features and quotas.",icon:E},{key:"feature_marketing",label:"Marketing & CRM",description:"Enable Email Marketing and CRM tools.",icon:M},{key:"feature_payroll",label:"Payroll & Compensation",description:"Enable Instructor Payroll and Commission tracking.",icon:v}],W=y(function(){const{configs:o,error:r}=j(),[b,l]=c.useState(o||[]),{getToken:f}=_(),[g,d]=c.useState(null),x=i=>b.find(s=>s.key===i)||{enabled:!1},h=async(i,s)=>{d(i),l(t=>t.find(n=>n.key===i)?t.map(n=>n.key===i?{...n,enabled:!s}:n):[...t,{key:i,enabled:!s}]);try{const t=await f();await k(`/admin/platform/config/${i}`,t,{method:"PUT",body:JSON.stringify({enabled:!s,description:u.find(a=>a.key===i)?.description})})}catch(t){console.error(t),alert("Failed to update feature flag"),l(o)}finally{d(null)}};return r?e.jsxs("div",{className:"p-8 text-red-600",children:["Error loading config: ",r]}):e.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-zinc-900",children:"Platform Features"}),e.jsx("p",{className:"text-zinc-500 mt-2",children:"Manage global feature flags. Disabling a feature here hides it from all tenants."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:u.map(i=>{const s=x(i.key),t=s.enabled,a=i.icon;return e.jsx("div",{className:"bg-white rounded-lg border border-zinc-200 p-3 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-md flex-shrink-0 ${t?"bg-blue-50 text-blue-600":"bg-zinc-100 text-zinc-400"}`,children:e.jsx(a,{size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-zinc-900 leading-tight",children:i.label}),e.jsx("button",{onClick:()=>h(i.key,t),disabled:g===i.key,className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-1 ${t?"bg-blue-600":"bg-zinc-200"}`,children:e.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${t?"translate-x-4":"translate-x-0"}`})})]}),e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5 line-clamp-2",children:i.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[e.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium ${t?"bg-green-100 text-green-800":"bg-zinc-100 text-zinc-600"}`,children:t?"Enabled":"Disabled (Hidden)"}),s.updatedAt&&e.jsxs("span",{className:"text-[10px] text-zinc-400",children:["Updated ",new Date(s.updatedAt).toLocaleDateString()]})]})]})]})},i.key)})}),e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-100 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How this works"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Enabled:"})," Feature is visible to tenants (subject to their subscription tier)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Disabled:"})," Feature is completely hidden from the entire platform. Useful for testing or incomplete features (e.g. Mobile App)."]})]})]})]})});export{W as default};
