import{w as z,b as S,c as C,a as k}from"./chunk-JMJ3UQ3L-D5-P_Fux.js";import{j as e}from"./vendor-puck-Ox9nZAW8.js";import{a as t}from"./vendor-sentry-JepEA2vj.js";import{a as $}from"./api-OnQO3erh.js";import{u as P}from"./index-tijl61gk.js";import{a as R,R as T,S as E}from"./chunk-VMBS36YX-CqvVU-dK.js";import"./vendor-charts-CBCVHb7z.js";import"./chunk-OT5FTIRN-DPKRyJkI.js";import"./runtimeEnvironment-BB2sO-19-DQnzQjGy.js";const D=z(function(){const{user:v,isLoaded:p}=P(),N=S();C();const[o]=k(),[r,m]=t.useState("monthly"),[a,y]=t.useState(""),[u,x]=t.useState(""),[l,i]=t.useState("basic"),[b,c]=t.useState(null),[h,f]=t.useState(!1);t.useEffect(()=>{const s=o.get("tier");s&&["basic","growth","scale"].includes(s)&&i(s);const n=o.get("interval");n&&["monthly","annual"].includes(n)&&m(n)},[o]),t.useEffect(()=>{if(!a)return;const s=a.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-");x(s)},[a]);const w=async s=>{s.preventDefault(),f(!0),c(null);try{const n=await window.Clerk?.session?.getToken(),d=await $("/onboarding/studio",n,{method:"POST",body:JSON.stringify({name:a,slug:u,tier:l,interval:r})});d.tenant?N(`/studio/${d.tenant.slug}/dashboard`):d.error&&c(d.error)}catch(n){c(n.message||"Failed to create studio.")}finally{f(!1)}};if(!p)return e.jsx("div",{className:"p-10 text-center",children:"Loading..."});const g=v?.primaryEmailAddress?.verification?.status==="verified",j=r==="annual"?"Billed annually":"Billed monthly";return e.jsxs("main",{className:"min-h-screen bg-zinc-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsx(R,{children:e.jsx(T,{})}),e.jsxs(E,{children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-zinc-900",children:"Create your Studio"}),e.jsx("p",{className:"mt-2 text-center text-sm text-zinc-600",children:"Start managing your classes and students today."})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[!g&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-yellow-700",children:"Please verify your email address to create a studio. Check your inbox."})})]})}),b&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded mb-4 text-sm",children:b}),e.jsxs("form",{className:"space-y-6",onSubmit:w,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-zinc-700",children:"Studio Name"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"name",name:"name",type:"text",required:!0,className:"appearance-none block w-full px-3 py-2 border border-zinc-300 rounded-md shadow-sm placeholder-zinc-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:a,onChange:s=>y(s.target.value),placeholder:"e.g. Zen Yoga"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"slug",className:"block text-sm font-medium text-zinc-700",children:"Studio URL (Slug)"}),e.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[e.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-zinc-300 bg-zinc-50 text-zinc-500 sm:text-sm",children:"studio.platform.com/"}),e.jsx("input",{id:"slug",name:"slug",type:"text",required:!0,className:"flex-1 min-w-0 block w-full px-3 py-2 rounded-none rounded-r-md border border-zinc-300 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:u,onChange:s=>x(s.target.value)})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700",children:"Select Plan"}),e.jsxs("button",{type:"button",onClick:()=>m(s=>s==="monthly"?"annual":"monthly"),className:"text-xs text-blue-600 hover:text-blue-500 font-medium",children:["Switch to ",r==="monthly"?"Annual":"Monthly"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{onClick:()=>i("basic"),className:`cursor-pointer border rounded-lg p-4 flex items-center justify-between transition-all ${l==="basic"?"border-blue-500 ring-1 ring-blue-500 bg-blue-50":"border-zinc-200 hover:border-blue-300"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-zinc-900",children:"Launch (Free)"}),e.jsx("div",{className:"text-sm text-zinc-500",children:"Up to 5 Instructors, 1 location."})]}),e.jsx("div",{className:"h-4 w-4 rounded-full border border-zinc-300 flex items-center justify-center",children:l==="basic"&&e.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full"})})]}),e.jsxs("div",{onClick:()=>i("growth"),className:`cursor-pointer border rounded-lg p-4 flex items-center justify-between transition-all ${l==="growth"?"border-blue-500 ring-1 ring-blue-500 bg-blue-50":"border-zinc-200 hover:border-blue-300"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-zinc-900",children:["Growth (",r==="annual"?"$39/mo":"$49/mo",")"]}),e.jsxs("div",{className:"text-sm text-zinc-500",children:["14-day free trial. ",j,"."]}),r==="annual"&&e.jsx("div",{className:"text-xs text-emerald-600 font-medium mt-1",children:"Total $468/year. Save $120."})]}),e.jsx("div",{className:"h-4 w-4 rounded-full border border-zinc-300 flex items-center justify-center",children:l==="growth"&&e.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full"})})]}),e.jsxs("div",{onClick:()=>i("scale"),className:`cursor-pointer border rounded-lg p-4 flex items-center justify-between transition-all ${l==="scale"?"border-blue-500 ring-1 ring-blue-500 bg-blue-50":"border-zinc-200 hover:border-blue-300"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-zinc-900",children:["Scale (",r==="annual"?"$99/mo":"$129/mo",")"]}),e.jsxs("div",{className:"text-sm text-zinc-500",children:["14-day free trial. ",j,"."]}),r==="annual"&&e.jsx("div",{className:"text-xs text-emerald-600 font-medium mt-1",children:"Total $1,188/year. Save $360."})]}),e.jsx("div",{className:"h-4 w-4 rounded-full border border-zinc-300 flex items-center justify-center",children:l==="scale"&&e.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full"})})]})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:h||!g,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-zinc-900 hover:bg-zinc-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-zinc-500 disabled:opacity-70 disabled:cursor-not-allowed",children:h?"Creating...":"Create Studio"})})]})]})})]})]})});export{D as default};
