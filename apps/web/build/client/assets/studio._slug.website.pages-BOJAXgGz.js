import{w,d as z,r as x,a as v,L as P}from"./chunk-EPOLDU6W-CCdTpUCB.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{a as u}from"./api-LAgipKeK.js";import{G as k}from"./globe-BsZwy-Xw.js";import{P as h}from"./plus-DIP3YFhX.js";import{F as b}from"./file-text-1GUGb925.js";import{c as g}from"./createLucideIcon-BL8SG8hg.js";import{E as C}from"./eye-BHBbsmKO.js";import{T}from"./trash-2-C9iLOpof.js";import{u as S}from"./chunk-OT5FTIRN-ZNG8QEaZ.js";import"./index-DnWvPTQO.js";import"./index-CTNgJJrB.js";const E=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],L=g("eye-off",E);const $=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],_=g("pen",$),I=w(function(){const{pages:p,error:m,slug:r}=z(),[l,d]=x.useState(p||[]),{getToken:c}=S();v();const[f,n]=x.useState(!1),[i,o]=x.useState({title:"",slug:""}),j=async()=>{if(!(!i.title||!i.slug))try{const s=await c(),t=await u("/website/pages",s,{method:"POST",headers:{"X-Tenant-Slug":r},body:JSON.stringify(i)});d([...l,t]),n(!1),o({title:"",slug:""})}catch(s){alert("Failed to create page: "+s.message)}},N=async s=>{if(confirm("Delete this page?"))try{const t=await c();await u(`/website/pages/${s}`,t,{method:"DELETE",headers:{"X-Tenant-Slug":r}}),d(l.filter(a=>a.id!==s))}catch(t){alert("Failed to delete: "+t.message)}},y=async s=>{try{const t=await c();await u(`/website/pages/${s.id}/publish`,t,{method:"POST",headers:{"X-Tenant-Slug":r},body:JSON.stringify({isPublished:!s.isPublished})}),d(l.map(a=>a.id===s.id?{...a,isPublished:!a.isPublished}:a))}catch(t){alert("Failed to update: "+t.message)}};return m?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg",children:["Error: ",m]})}):e.jsxs("div",{className:"p-8 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-zinc-900 flex items-center gap-2",children:[e.jsx(k,{className:"text-blue-600"}),"Website Builder"]}),e.jsx("p",{className:"text-zinc-500 mt-1",children:"Create and manage your studio website pages"})]}),e.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:[e.jsx(h,{size:18}),"New Page"]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-xl",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Create New Page"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Page Title"}),e.jsx("input",{type:"text",value:i.title,onChange:s=>o({...i,title:s.target.value}),className:"w-full border border-zinc-300 rounded-lg px-3 py-2",placeholder:"e.g., About Us"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"URL Slug"}),e.jsx("input",{type:"text",value:i.slug,onChange:s=>o({...i,slug:s.target.value.toLowerCase().replace(/\s+/g,"-")}),className:"w-full border border-zinc-300 rounded-lg px-3 py-2",placeholder:"e.g., about"}),e.jsxs("p",{className:"text-xs text-zinc-400 mt-1",children:["yoursite.com/",i.slug||"slug"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{onClick:()=>n(!1),className:"px-4 py-2 text-zinc-600 hover:bg-zinc-100 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Page"})]})]})}),l.length===0?e.jsxs("div",{className:"bg-zinc-50 border-2 border-dashed border-zinc-200 rounded-xl p-12 text-center",children:[e.jsx(b,{size:48,className:"mx-auto text-zinc-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-zinc-700 mb-2",children:"No pages yet"}),e.jsx("p",{className:"text-zinc-500 mb-4",children:"Create your first page to start building your website"}),e.jsxs("button",{onClick:()=>n(!0),className:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg",children:[e.jsx(h,{size:18}),"Create First Page"]})]}):e.jsx("div",{className:"bg-white rounded-xl border border-zinc-200 divide-y",children:l.map(s=>e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-zinc-50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.isPublished?"bg-green-100 text-green-600":"bg-zinc-100 text-zinc-400"}`,children:e.jsx(b,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-zinc-900",children:s.title}),e.jsxs("p",{className:"text-sm text-zinc-500",children:["/",s.slug]})]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${s.isPublished?"bg-green-100 text-green-700":"bg-zinc-100 text-zinc-600"}`,children:s.isPublished?"Published":"Draft"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>y(s),className:"p-2 hover:bg-zinc-100 rounded-lg text-zinc-600",title:s.isPublished?"Unpublish":"Publish",children:s.isPublished?e.jsx(L,{size:18}):e.jsx(C,{size:18})}),e.jsx(P,{to:`/studio/${r}/website/editor/${s.id}`,className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600",children:e.jsx(_,{size:18})}),e.jsx("button",{onClick:()=>N(s.id),className:"p-2 hover:bg-red-50 rounded-lg text-red-600",children:e.jsx(T,{size:18})})]})]},s.id))})]})});export{I as default};
