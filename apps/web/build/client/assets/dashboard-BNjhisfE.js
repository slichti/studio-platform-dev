import{r as l,p as e,H as c,w,x as h,O as S}from"./chunk-JMJ3UQ3L-Bmktta78.js";import{u as I,f as z}from"./index-CCnl-c2s.js";import"./chunk-OT5FTIRN-BGHl3_fX.js";import"./index-Bf9IPYjI.js";import"./chunk-VMBS36YX-DONK8QXx.js";import"./chunk-6WD75OPE-CHjYrt5S.js";import"./index-BR1D0jcX.js";const B={dark:{bg:"#1c1e2e",sidebarBg:"#181924",headerBg:"#181924",border:"#282a3a",text:"#e5e7eb",textMuted:"#9ca3af",accentText:"#818cf8",cardBg:"#232536",hoverBg:"#282a3a",navActiveBg:"#282a3a",navActiveText:"#fff"},light:{bg:"#f8f9fa",sidebarBg:"#ffffff",headerBg:"#ffffff",border:"#e9ecef",text:"#343a40",textMuted:"#868e96",accentText:"#4f46e5",cardBg:"#ffffff",hoverBg:"#f1f3f5",navActiveBg:"#f1f3f5",navActiveText:"#212529"}};function T({children:u,tenantName:a="Studio Platform",role:i,navItems:x,title:m="Overview"}){const{user:o,isLoaded:b}=I(),{signOut:v}=z(),[s,g]=l.useState("dark"),[p,n]=l.useState(!1),[f,d]=l.useState(null);l.useEffect(()=>{const t=localStorage.getItem("theme");t?g(t):window.matchMedia("(prefers-color-scheme: light)").matches&&g("light"),d(localStorage.getItem("impersonation_token"))},[]);const k=()=>{const t=s==="dark"?"light":"dark";g(t),localStorage.setItem("theme",t)},r=B[s],y={"--bg":r.bg,"--sidebar-bg":r.sidebarBg,"--header-bg":r.headerBg,"--border":r.border,"--text":r.text,"--text-muted":r.textMuted,"--accent":r.accentText,"--card-bg":r.cardBg,"--hover-bg":r.hoverBg,"--nav-active-bg":r.navActiveBg,"--nav-active-text":r.navActiveText},j=()=>{typeof window<"u"&&(localStorage.removeItem("impersonation_token"),d(null)),v({redirectUrl:"/"})};return e.jsxs("div",{style:{...y,display:"flex",height:"100vh",fontFamily:"'Inter', sans-serif",background:"var(--bg)",color:"var(--text)",transition:"background 0.3s, color 0.3s"},children:[e.jsxs("aside",{style:{width:"260px",background:"var(--sidebar-bg)",borderRight:"1px solid var(--border)",display:"flex",flexDirection:"column",transition:"background 0.3s, border-color 0.3s"},children:[e.jsxs("div",{style:{padding:"24px",display:"flex",alignItems:"center",gap:"16px",borderBottom:"1px solid var(--border)"},children:[e.jsx("div",{style:{fontSize:"2rem"},children:"üßò‚Äç‚ôÄÔ∏è"}),e.jsx("div",{children:e.jsx("h1",{style:{fontSize:"1.2rem",fontWeight:"700",color:"var(--accent)",lineHeight:"1.2"},children:a})})]}),e.jsx("nav",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"8px",flex:1,overflowY:"auto"},children:x||e.jsx(e.Fragment,{children:e.jsx(c,{to:"/dashboard",style:({isActive:t})=>({display:"block",padding:"10px 12px",borderRadius:"8px",background:t?"var(--nav-active-bg)":"transparent",textDecoration:"none",color:t?"var(--nav-active-text)":"var(--text-muted)",fontSize:"0.95rem",fontWeight:t?600:400,transition:"all 0.2s"}),children:"Overview"})})})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[f&&e.jsxs("div",{style:{background:"#ef4444",color:"white",padding:"8px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",fontSize:"0.9rem",fontWeight:"500"},children:[e.jsxs("span",{children:["‚ö†Ô∏è You are currently impersonating a user (",typeof window<"u"?localStorage.getItem("impersonation_target_email"):"User","). Financial actions are restricted."]}),e.jsx("button",{onClick:()=>{localStorage.removeItem("impersonation_token"),localStorage.removeItem("impersonation_target_email"),d(null),window.location.href="/"},style:{background:"white",color:"#ef4444",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.8rem",fontWeight:"bold",cursor:"pointer"},children:"Exit Impersonation"})]}),e.jsxs("header",{style:{height:"70px",background:"var(--header-bg)",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 32px",transition:"background 0.3s, border-color 0.3s"},children:[e.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"500",color:"var(--text)"},children:m}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[e.jsx("button",{onClick:k,style:{width:"32px",height:"32px",borderRadius:"50%",background:"var(--hover-bg)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",border:"none",cursor:"pointer",transition:"all 0.2s"},title:`Switch to ${s==="dark"?"light":"dark"} mode`,children:s==="dark"?"‚òæ":"‚òÄ"}),b&&o&&e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("div",{role:"button",tabIndex:0,onClick:()=>n(!p),onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&n(!p)},style:{display:"flex",alignItems:"center",gap:"12px",background:"transparent",border:"none",cursor:"pointer",padding:"4px",borderRadius:"8px",transition:"background 0.2s"},onMouseEnter:t=>t.currentTarget.style.background="var(--hover-bg)",onMouseLeave:t=>t.currentTarget.style.background="transparent",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",overflow:"hidden",background:"var(--accent)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"1.2rem"},children:o.imageUrl?e.jsx("img",{src:o.imageUrl,alt:o.fullName||"User",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("span",{children:o.firstName?o.firstName[0]:"U"})}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem",color:"var(--text)"},children:o.fullName}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",fontWeight:"400"},children:i||"admin"})]}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"var(--text-muted)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),p&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:40},onClick:()=>n(!1)}),e.jsxs("div",{style:{position:"absolute",top:"calc(100% + 10px)",right:0,width:"200px",background:"var(--card-bg)",border:"1px solid var(--border)",borderRadius:"8px",padding:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",zIndex:50},children:[e.jsxs(c,{to:"/dashboard/profile",onClick:()=>n(!1),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px",borderRadius:"6px",textDecoration:"none",color:"var(--text)",fontSize:"0.9rem",transition:"background 0.2s"},onMouseEnter:t=>t.currentTarget.style.background="var(--hover-bg)",onMouseLeave:t=>t.currentTarget.style.background="transparent",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"My Profile"]}),f&&e.jsxs("button",{onClick:()=>{n(!1),localStorage.removeItem("impersonation_token"),localStorage.removeItem("impersonation_target_email"),d(null),window.location.href="/admin"},style:{width:"100%",display:"flex",alignItems:"center",gap:"8px",padding:"10px",borderRadius:"6px",background:"transparent",border:"none",cursor:"pointer",color:"var(--accent)",fontSize:"0.9rem",textAlign:"left",transition:"background 0.2s"},onMouseEnter:t=>t.currentTarget.style.background="var(--hover-bg)",onMouseLeave:t=>t.currentTarget.style.background="transparent",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 2a10 10 0 0 0-10 10v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6a10 10 0 0 0-10-10Z"}),e.jsx("path",{d:"M12 12v6"}),e.jsx("circle",{cx:"12",cy:"7",r:"1"})]}),"Return to Admin Console"]}),e.jsx("div",{style:{height:"1px",background:"var(--border)",margin:"4px 0"}}),e.jsxs("button",{onClick:()=>{n(!1),j()},style:{width:"100%",display:"flex",alignItems:"center",gap:"8px",padding:"10px",borderRadius:"6px",background:"transparent",border:"none",cursor:"pointer",color:"#ef4444",fontSize:"0.9rem",textAlign:"left",transition:"background 0.2s"},onMouseEnter:t=>t.currentTarget.style.background="rgba(239, 68, 68, 0.1)",onMouseLeave:t=>t.currentTarget.style.background="transparent",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Sign Out"]})]})]})]})]})]}),e.jsx("main",{style:{flex:1,padding:"40px",overflowY:"auto",background:"var(--bg)",transition:"background 0.3s"},children:u})]})]})}const D=w(function(){const{isSystemAdmin:a}=h();let i=[e.jsx(c,{to:"/dashboard",end:!0,className:({isActive:x})=>`block px-3 py-2 rounded-md text-sm font-medium transition-colors ${x?"bg-zinc-800 text-white":"text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800 dark:hover:text-white"}`,children:"Overview"},"overview")];return a&&(i.push(e.jsx("div",{className:"my-2 border-t border-zinc-200 dark:border-zinc-800"},"separator")),i.push(e.jsx(c,{to:"/admin",className:"block px-3 py-2 rounded-md text-sm font-medium text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors",children:"üõ°Ô∏è System Admin"},"admin"))),e.jsxs(T,{navItems:i,children:[a===!1&&h().error&&e.jsxs("div",{className:"bg-red-50 text-red-700 p-4 border-b border-red-200 text-sm text-center",children:["Warning: Profile load failed. Admin features may be hidden. ",e.jsx("br",{}),e.jsx("span",{className:"font-mono text-xs opacity-75",children:h().error})]}),e.jsx(S,{})]})});export{D as default};
