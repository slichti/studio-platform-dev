import{p as y,q as j,a as c,V as k,j as e,aS as N,an as w,bu as S,aa as m,aD as u,aT as E,a7 as v,Z as M}from"./vendor-react-D59Q0YKK.js";import{a as _}from"./api-D1U4i9fn.js";import"./vendor-puck-RN2Ey-av.js";import"./vendor-charts-Dp-zC2wb.js";const b=[{key:"feature_mobile_app",label:"White-Label Mobile App",description:"Enable Mobile App settings and promotion across all studios. Keep disabled until apps are approved.",icon:N},{key:"feature_website_builder",label:"Website Builder",description:"Enable drag-and-drop website creation for tenants using Puck editor.",icon:w},{key:"feature_chat",label:"Chat System",description:"Enable real-time chat for support and community using Durable Objects.",icon:S},{key:"feature_financials",label:"Financials & Payouts",description:"Global master switch for Financial reporting and Stripe payouts.",icon:m},{key:"feature_vod",label:"Video on Demand (VOD)",description:"Global master switch for VOD functionality.",icon:u},{key:"feature_zoom",label:"Zoom Integration",description:"Enable Zoom meeting creation and sync.",icon:u},{key:"feature_pos",label:"POS & Retail",description:"Enable Point of Sale and Product management.",icon:m},{key:"feature_sms",label:"SMS Messaging",description:"Enable Twilio SMS features and quotas.",icon:E},{key:"feature_marketing",label:"Marketing & CRM",description:"Enable Email Marketing and CRM tools.",icon:v},{key:"feature_payroll",label:"Payroll & Compensation",description:"Enable Instructor Payroll and Commission tracking.",icon:M}],F=y(function(){const{configs:l,error:o}=j(),[p,r]=c.useState(l||[]),{getToken:g}=k(),[f,d]=c.useState(null),x=s=>p.find(i=>i.key===s)||{enabled:!1},h=async(s,i)=>{d(s),r(a=>a.find(t=>t.key===s)?a.map(t=>t.key===s?{...t,enabled:!i}:t):[...a,{key:s,enabled:!i}]);try{const a=await g();await _(`/admin/platform/config/${s}`,a,{method:"PUT",body:JSON.stringify({enabled:!i,description:b.find(n=>n.key===s)?.description})})}catch(a){console.error(a),alert("Failed to update feature flag"),r(l)}finally{d(null)}};return o?e.jsxs("div",{className:"p-8 text-red-600",children:["Error loading config: ",o]}):e.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-zinc-900",children:"Platform Features"}),e.jsx("p",{className:"text-zinc-500 mt-2",children:"Manage global feature flags. Disabling a feature here hides it from all tenants."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:b.map(s=>{const i=x(s.key),a=i.enabled,n=s.icon;return e.jsx("div",{className:"bg-white rounded-lg border border-zinc-200 p-3 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-md flex-shrink-0 ${a?"bg-blue-50 text-blue-600":"bg-zinc-100 text-zinc-400"}`,children:e.jsx(n,{size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-zinc-900 leading-tight",children:s.label}),e.jsx("button",{onClick:()=>h(s.key,a),disabled:f===s.key,className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-1 ${a?"bg-blue-600":"bg-zinc-200"}`,children:e.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${a?"translate-x-4":"translate-x-0"}`})})]}),e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[e.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium ${a?"bg-green-100 text-green-800":"bg-zinc-100 text-zinc-600"}`,children:a?"Enabled":"Disabled (Hidden)"}),i.updatedAt&&e.jsxs("span",{className:"text-[10px] text-zinc-400",children:["Updated ",new Date(i.updatedAt).toLocaleDateString()]})]})]})]})},s.key)})}),e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-100 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How this works"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Enabled:"})," Feature is visible to tenants (subject to their subscription tier)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Disabled:"})," Feature is completely hidden from the entire platform. Useful for testing or incomplete features (e.g. Mobile App)."]})]})]})]})});export{F as default};
