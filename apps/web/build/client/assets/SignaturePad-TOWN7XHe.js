import{j as a}from"./vendor-puck-D_CB0wXL.js";import{a as x}from"./vendor-sentry-DugYw-Ne.js";function w({onChange:u,width:g=500,height:h=200}){const o=x.useRef(null),[l,i]=x.useState(!1),[m,f]=x.useState(!1);x.useEffect(()=>{const t=o.current;if(!t)return;const e=t.getContext("2d");e&&(e.lineWidth=2,e.lineCap="round",e.strokeStyle="#000000")},[]);const d=t=>{if(!l)return;const e=o.current;if(!e)return;const n=e.getContext("2d");if(!n)return;const c=e.getBoundingClientRect();let s,r;"touches"in t?(s=t.touches[0].clientX-c.left,r=t.touches[0].clientY-c.top):(s=t.clientX-c.left,r=t.clientY-c.top),n.lineTo(s,r),n.stroke(),n.beginPath(),n.moveTo(s,r)},v=t=>{i(!0);const e=o.current;if(!e)return;const n=e.getContext("2d");if(!n)return;const c=e.getBoundingClientRect(),s=t.clientX-c.left,r=t.clientY-c.top;n.beginPath(),n.moveTo(s,r)},b=t=>{t.preventDefault();const e=o.current;if(!e)return;const n=e.getContext("2d");n&&(n.clearRect(0,0,e.width,e.height),f(!1),u(null))};return a.jsxs("div",{className:"border border-zinc-300 rounded-lg overflow-hidden bg-white inline-block",children:[a.jsx("canvas",{ref:o,width:g,height:h,className:"touch-none cursor-crosshair bg-white",style:{touchAction:"none"},onMouseDown:v,onMouseMove:t=>{l&&d(t)},onMouseUp:()=>{i(!1);const t=o.current;t&&(t.getContext("2d")?.beginPath(),u(t.toDataURL()),f(!0))},onMouseLeave:()=>{i(!1);const t=o.current;t&&l&&(t.getContext("2d")?.beginPath(),u(t.toDataURL()),f(!0))},onTouchStart:t=>{const e=o.current;if(!e)return;const n=e.getContext("2d");if(!n)return;const c=e.getBoundingClientRect(),s=t.touches[0].clientX-c.left,r=t.touches[0].clientY-c.top;n.beginPath(),n.moveTo(s,r),i(!0)},onTouchMove:t=>{l&&d(t)},onTouchEnd:()=>{i(!1);const t=o.current;t&&(t.getContext("2d")?.beginPath(),u(t.toDataURL()),f(!0))}}),a.jsxs("div",{className:"bg-zinc-50 border-t border-zinc-200 p-2 flex justify-between items-center px-4",children:[a.jsx("span",{className:"text-xs text-zinc-500",children:"Sign above"}),a.jsx("button",{type:"button",onClick:b,className:"text-xs text-red-600 hover:text-red-800 font-medium",children:"Clear Signature"})]})]})}export{w as S};
