import{w as f,u as v,c as k}from"./chunk-JZWAC4HX-Cg_gv2PJ.js";import{j as e}from"./vendor-puck-D_CB0wXL.js";import{R as c,P as z,a as N,T as l,B as w,C as y,X as C,Y as A,L as R,b as x}from"./vendor-charts-BaZHU4KA.js";import"./vendor-sentry-DugYw-Ne.js";const L=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],B=f(function(){const m=v(),{utilization:o,retention:h,ltv:a}=m||{utilization:[],retention:[],ltv:{averageLtv:0,sources:{packs:0,pos:0}}},{tenant:u}=k(),r=u?.currency?.toUpperCase()||"USD",g=(t,s)=>{const d=o.find(i=>parseInt(i.day)===t&&parseInt(i.hour)===s);return d?d.bookingCount:0},p=Math.max(...o.map(t=>t.bookingCount)||[0],1),b=t=>{if(t===0)return"bg-zinc-50 dark:bg-zinc-900";const s=t/p;return s<.25?"bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300":s<.5?"bg-indigo-300 dark:bg-indigo-700/60 text-indigo-900 dark:text-indigo-100":s<.75?"bg-indigo-500 text-white":"bg-indigo-700 text-white"},j=[{name:"Class Packs",value:a?.sources?.packs||0,fill:"#4F46E5"},{name:"Retail / POS",value:a?.sources?.pos||0,fill:"#10B981"}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8 animate-in fade-in duration-500",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100",children:"Advanced Analytics"}),e.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:"Deep dive into studio performance and retention."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-2xl border border-zinc-200 dark:border-zinc-800 shadow-sm col-span-1",children:[e.jsx("h3",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Average Lifetime Value"}),e.jsx("div",{className:"text-4xl font-bold text-zinc-900 dark:text-zinc-100",children:new Intl.NumberFormat(void 0,{style:"currency",currency:r}).format(a.averageLtv)})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-2xl border border-zinc-200 dark:border-zinc-800 shadow-sm col-span-2 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Revenue Sources"}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Class Packs"}),e.jsx("p",{className:"text-xl font-bold text-indigo-600",children:new Intl.NumberFormat(void 0,{style:"currency",currency:r}).format(a.sources?.packs||0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Retail / POS"}),e.jsx("p",{className:"text-xl font-bold text-emerald-500",children:new Intl.NumberFormat(void 0,{style:"currency",currency:r}).format(a.sources?.pos||0)})]})]})]}),e.jsx("div",{className:"h-24 w-24",children:e.jsx(c,{width:"100%",height:"100%",children:e.jsxs(z,{children:[e.jsx(N,{data:j,dataKey:"value",innerRadius:25,outerRadius:40,paddingAngle:5}),e.jsx(l,{})]})})})]})]}),e.jsxs("section",{className:"bg-white dark:bg-zinc-900 p-6 rounded-2xl border border-zinc-200 dark:border-zinc-800 shadow-sm",children:[e.jsx("h3",{className:"font-bold text-lg text-zinc-900 dark:text-zinc-100 mb-6",children:"Member Retention by Cohort"}),e.jsx("div",{className:"h-80 w-full",children:e.jsx(c,{width:"100%",height:"100%",children:e.jsxs(w,{data:h,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(y,{strokeDasharray:"3 3",vertical:!1,stroke:"#E4E4E5"}),e.jsx(C,{dataKey:"month",stroke:"#71717A",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(A,{stroke:"#71717A",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(l,{cursor:{fill:"#F4F4F5"},contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),e.jsx(R,{}),e.jsx(x,{dataKey:"total",name:"New Members",fill:"#E4E4E7",radius:[4,4,0,0]}),e.jsx(x,{dataKey:"retained",name:"Retained Active",fill:"#4F46E5",radius:[4,4,0,0]})]})})})]}),e.jsxs("section",{className:"bg-white dark:bg-zinc-900 p-6 rounded-2xl border border-zinc-200 dark:border-zinc-800 shadow-sm overflow-x-auto",children:[e.jsx("h3",{className:"font-bold text-lg text-zinc-900 dark:text-zinc-100 mb-6",children:"Class Utilization Heatmap"}),e.jsx("div",{className:"min-w-[800px]",children:e.jsxs("div",{className:"grid grid-cols-[auto_repeat(24,1fr)] gap-1",children:[e.jsx("div",{className:"h-8 w-16"})," ",Array.from({length:24}).map((t,s)=>e.jsx("div",{className:"h-8 flex items-center justify-center text-[10px] text-zinc-400 font-medium",children:s},`h-${s}`)),L.map((t,s)=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-10 flex items-center pr-4 text-xs font-bold text-zinc-500 uppercase tracking-wider",children:t},`d-${s}`),Array.from({length:24}).map((d,i)=>{const n=g(s,i);return e.jsx("div",{title:`${t} @ ${i}:00 - ${n} bookings`,className:`h-10 rounded-md flex items-center justify-center text-xs font-medium transition-all hover:scale-110 ${b(n)}`,children:n>0?n:""},`${s}-${i}`)})]}))]})}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2 text-xs text-zinc-500",children:[e.jsx("span",{children:"Less Busy"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-indigo-100 dark:bg-indigo-900/40"}),e.jsx("div",{className:"w-4 h-4 rounded bg-indigo-300 dark:bg-indigo-700/60"}),e.jsx("div",{className:"w-4 h-4 rounded bg-indigo-500"}),e.jsx("div",{className:"w-4 h-4 rounded bg-indigo-700"})]}),e.jsx("span",{children:"More Busy"})]})]})]})});export{B as default};
