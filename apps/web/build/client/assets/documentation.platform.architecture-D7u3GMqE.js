import{w as c,f as l,n as o}from"./chunk-JMJ3UQ3L-Dw7tS_gO.js";import{j as e}from"./vendor-puck-By1A5E5K.js";import{a as d}from"./vendor-sentry-BD1MTpLq.js";import{m as s}from"./mermaid.core-BKNcSV1B.js";import{c as r}from"./createLucideIcon-DgXJrNmH.js";import{G as x}from"./globe-DV22Xz5a.js";import{D as t}from"./database-YmXT_lcr.js";import{S as m}from"./shield-BH971nBf.js";import{S as h}from"./server-CkQ6kFga.js";import"./vendor-charts-nrSmOgTy.js";const p=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],g=r("cloud",p);const u=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],j=r("lock",u),w=c(function(){d.useEffect(()=>{s.initialize({startOnLoad:!0,theme:"neutral"}),s.contentLoaded()},[]);const{isPlatformAdmin:i}=l();return i?e.jsxs("div",{className:"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-zinc-900 dark:text-zinc-50 mb-4 font-serif",children:"Platform Architecture"}),e.jsx("p",{className:"text-xl text-zinc-600 dark:text-zinc-400 leading-relaxed max-w-3xl",children:"High-level overview of the Studio Platform infrastructure, built on Cloudflare's edge network for performance and scalability."})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-3",children:[e.jsx(g,{className:"text-blue-500"})," Core Infrastructure"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(x,{size:20,className:"text-orange-500"}),e.jsx("h3",{className:"font-bold text-lg",children:"Cloudflare Workers & Pages"})]}),e.jsxs("ul",{className:"space-y-2 text-zinc-600 dark:text-zinc-400 text-sm",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Web App:"})," Deployed to Cloudflare Pages (Remix/React Router)."]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"API Layer:"})," Cloudflare Workers (Hono framework)."]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Edge Runtime:"})," Code runs within milliseconds of users globally."]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("pre",{className:"mermaid",children:`
                                graph TD
                                    User[User Browser] -->|HTTPS| CF[Cloudflare Network]
                                    CF -->|Asset Request| Pages[Pages (Static Assets)]
                                    CF -->|API Request| Worker[Worker (Hono API)]
                                    Worker -->|Query| D1[(D1 Database)]
                                    Worker -->|Upload| R2[(R2 Storage)]
                                    Worker -.->|Payment| Stripe[Stripe Connect]
                                    Worker -.->|Email| Resend[Resend / SMTP]
                                    Worker -.->|SMS| Twilio[Twilio]
                                    
                                    subgraph "New Capabilities"
                                    Worker -->|Aggregations| Analytics[Analytics Engine (SQLite)]
                                    Worker -.->|Push| Expo[Expo Push Notifications]
                                    end
                                `})})]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(t,{size:20,className:"text-green-500"}),e.jsx("h3",{className:"font-bold text-lg",children:"Data & Storage"})]}),e.jsxs("ul",{className:"space-y-2 text-zinc-600 dark:text-zinc-400 text-sm",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Database:"})," Cloudflare D1 (SQLite at the edge)."]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Object Storage:"})," Cloudflare R2 (Images, Videos, Assets)."]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"ORM:"})," Drizzle ORM for type-safe database queries."]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Analytics:"})," Optimized group-by queries for Reporting."]})]})]})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-3",children:[e.jsx(m,{className:"text-purple-500"})," Security & Identity"]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800",children:[e.jsx("p",{className:"text-zinc-600 dark:text-zinc-400 mb-6",children:"We use a hybrid approach for authentication and multi-tenancy to ensure data isolation and secure access."}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[e.jsx(j,{size:16})," Identity Provider"]}),e.jsxs("p",{className:"text-sm text-zinc-500",children:[e.jsx("strong",{children:"Clerk"})," handles user identity, MFA, and session management."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[e.jsx(h,{size:16})," API Security"]}),e.jsx("p",{className:"text-sm text-zinc-500",children:"Validates JWTs using RS256 (Clerk) and HS256 (Impersonation) algorithms."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[e.jsx(t,{size:16})," Data Isolation"]}),e.jsxs("p",{className:"text-sm text-zinc-500",children:["Logical isolation using ",e.jsx("code",{children:"tenantId"})," column on all major tables."]})]})]})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Key Services"}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:["Billing (Stripe Connect)","Realtime Chat (Durable Objects)","Video Processing (R2 + Workers)","Email (Resend/System)","SMS (Twilio)","Marketing Automations (Crons)","Inventory Management (Retail)"].map((a,n)=>e.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-sm font-medium text-zinc-700 dark:text-zinc-300",children:a},n))})]})]}):e.jsx(o,{to:"/documentation",replace:!0})});export{w as default};
