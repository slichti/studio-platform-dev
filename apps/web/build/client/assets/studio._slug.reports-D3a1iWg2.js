import{w as Q,e as Z,L as ee}from"./chunk-JMJ3UQ3L-DIHTCPR9.js";import{j as e}from"./vendor-puck-EFhZVjRu.js";import{a as o}from"./vendor-sentry-BD1MTpLq.js";import{c as Y}from"./createLucideIcon-DgXJrNmH.js";import{T as te}from"./trash-2-DU-4PZMS.js";import{S as se}from"./save-f-wzAblY.js";import{U as H}from"./users-DTyswlyE.js";import{T as E}from"./trending-up-WhR0C78Z.js";import{D as O}from"./dollar-sign-Br6sogR3.js";import{C as ae}from"./calendar-CHyLPk-n.js";import{A as ne}from"./arrow-right-TLLbqErj.js";import{R as B,f as ie,X as P,Y as S,C as R,T as M,L as re,g as A,A as T,b as C,c as oe}from"./vendor-charts-4N5lwHtV.js";import{a as W}from"./api-OnQO3erh.js";import{P as L}from"./PrivacyBlur-Vp26brL3.js";import{L as le}from"./loader-circle-CaGZsKjo.js";import{D as ce}from"./download-nknHt9WM.js";import{C as de}from"./circle-check-4euu8Iav.js";const xe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],me=Y("calculator",xe);const he=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],pe=Y("folder-open",he);function ue(){const[x,m]=o.useState("growth"),[i,p]=o.useState([]),[k,z]=o.useState(""),[c,D]=o.useState(!1);o.useEffect(()=>{const s=localStorage.getItem("studio_projection_scenarios");if(s)try{p(JSON.parse(s))}catch(n){console.error("Failed to load scenarios",n)}},[]);const[t,y]=o.useState({studentCount:50,avgMembershipPrice:120,avgDropInPrice:25,membershipSplit:60,classesPerDropIn:4.5,rent:2e3,payrollPerClass:40,classesPerMonth:60,otherExpenses:500,churnRate:5,growthRate:8,seasonalityResult:15,seasonalityEnabled:!1}),b=o.useMemo(()=>{const s=Math.round(t.studentCount*(t.membershipSplit/100)),n=t.studentCount-s,u=s*t.avgMembershipPrice,a=n*t.classesPerDropIn*t.avgDropInPrice,r=u+a,d=t.classesPerMonth*t.payrollPerClass,l=t.rent+d+t.otherExpenses,g=r-l,j=r>0?g/r*100:0;return{totalRevenue:r,totalExpenses:l,profit:g,margin:j,breakdown:{membershipRevenue:u,dropInRevenue:a}}},[t]),_=o.useMemo(()=>{const s=[],n=Math.max(t.studentCount*3,200),u=Math.ceil(n/20);for(let a=0;a<=n;a+=u){const r=Math.round(a*(t.membershipSplit/100)),d=a-r,l=r*t.avgMembershipPrice+d*t.classesPerDropIn*t.avgDropInPrice,g=t.classesPerMonth*t.payrollPerClass,j=t.rent+g+t.otherExpenses;s.push({students:a,revenue:l,expenses:j,profit:l-j})}return s},[t]),f=o.useMemo(()=>{const s=[];let n=t.studentCount;const u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=new Date().getMonth();for(let r=0;r<24;r++){const d=(a+r)%12,l=u[d];let g=1;t.seasonalityEnabled&&(d===5||d===6||d===7)&&(g=1-t.seasonalityResult/100);const j=n*(t.churnRate/100),N=t.growthRate*g;n=Math.max(0,n-j+N);const K=Math.round(n*(t.membershipSplit/100)),X=n-K,U=K*t.avgMembershipPrice+X*t.classesPerDropIn*t.avgDropInPrice,q=t.classesPerMonth*t.payrollPerClass,J=t.rent+q+t.otherExpenses;s.push({month:r===0?"Now":r<=11?l:`${l} '25`,students:Math.round(n),revenue:U,expenses:J,profit:U-J})}return s},[t]),h=(s,n)=>{if(typeof n=="boolean"){y(a=>({...a,[s]:n}));return}const u=typeof n=="string"?parseFloat(n)||0:n;y(a=>({...a,[s]:u}))},$=()=>{if(!k)return;const s=[...i,{name:k,data:t}];p(s),localStorage.setItem("studio_projection_scenarios",JSON.stringify(s)),z(""),D(!1)},F=s=>{y(i[s].data)},I=s=>{const n=i.filter((u,a)=>a!==s);p(n),localStorage.setItem("studio_projection_scenarios",JSON.stringify(n))};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 animate-in fade-in slide-in-from-bottom-4",children:[e.jsx("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm h-fit space-y-8",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-zinc-900 dark:text-zinc-100 font-bold text-lg",children:[e.jsx(me,{className:"text-blue-600"}),e.jsx("h3",{children:"Simulator Inputs"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg text-zinc-500",children:e.jsx(pe,{size:18})}),e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-xl p-2 hidden group-hover:block z-50",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-400 px-2 py-1 mb-1",children:"LOAD SCENARIO"}),i.length===0&&e.jsx("div",{className:"px-2 py-1 text-xs text-zinc-500 italic",children:"No saved scenarios"}),i.map((s,n)=>e.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5 hover:bg-zinc-50 dark:hover:bg-zinc-800 rounded cursor-pointer group/item",children:[e.jsx("span",{onClick:()=>F(n),className:"text-sm truncate flex-1",children:s.name}),e.jsx(te,{size:12,className:"text-red-400 opacity-0 group-hover/item:opacity-100 hover:text-red-600",onClick:u=>{u.stopPropagation(),I(n)}})]},n))]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>D(!c),className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg text-blue-600",children:e.jsx(se,{size:18})}),c&&e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-64 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-xl p-3 z-50",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-400 mb-2",children:"SAVE CURRENT SCENARIO"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 min-w-0 bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded px-2 py-1 text-sm",placeholder:"Scenario Name...",value:k,onChange:s=>z(s.target.value)}),e.jsx("button",{onClick:$,disabled:!k,className:"bg-blue-600 text-white px-3 py-1 rounded text-xs font-bold disabled:opacity-50",children:"Save"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-xs font-bold text-zinc-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(H,{size:14})," Current Status"]}),e.jsx(v,{label:"Total Active Students",value:t.studentCount,onChange:s=>h("studentCount",s)}),e.jsx(v,{label:"Avg. Membership Price ($)",value:t.avgMembershipPrice,onChange:s=>h("avgMembershipPrice",s)}),e.jsx(v,{label:"Avg. Drop-In Price ($)",value:t.avgDropInPrice,onChange:s=>h("avgDropInPrice",s)}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300 flex justify-between",children:[e.jsx("span",{children:"Membership Split"}),e.jsxs("span",{className:"text-zinc-500",children:[t.membershipSplit,"% Members"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",value:t.membershipSplit,onChange:s=>h("membershipSplit",s.target.value),className:"w-full accent-blue-600"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-800 space-y-4",children:[e.jsxs("h4",{className:"text-xs font-bold text-purple-500 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(E,{size:14})," Growth & Churn"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(v,{label:"New Students / Mo",value:t.growthRate,onChange:s=>h("growthRate",s)}),e.jsx(v,{label:"Churn Rate (%)",value:t.churnRate,onChange:s=>h("churnRate",s)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-50 dark:bg-zinc-800 rounded-lg border border-zinc-100 dark:border-zinc-700",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("label",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Seasonality"}),e.jsx("div",{className:"text-xs text-zinc-500",children:"Summer slump simulation"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[t.seasonalityEnabled&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-amber-600 bg-amber-50 px-2 py-0.5 rounded-full border border-amber-100",children:["-",t.seasonalityResult,"%"]}),e.jsx("button",{onClick:()=>h("seasonalityEnabled",!t.seasonalityEnabled),className:`w-10 h-6 rounded-full transition-colors relative ${t.seasonalityEnabled?"bg-blue-600":"bg-zinc-200 dark:bg-zinc-700"}`,children:e.jsx("div",{className:`w-4 h-4 rounded-full bg-white absolute top-1 transition-transform ${t.seasonalityEnabled?"left-5":"left-1"}`})})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-800 space-y-4",children:[e.jsxs("h4",{className:"text-xs font-bold text-red-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(O,{size:14})," Expenses (Monthly)"]}),e.jsx(v,{label:"Rent & Utilities",value:t.rent,onChange:s=>h("rent",s)}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(v,{label:"Pay / Class",value:t.payrollPerClass,onChange:s=>h("payrollPerClass",s)}),e.jsx(v,{label:"Classes / Mo",value:t.classesPerMonth,onChange:s=>h("classesPerMonth",s)})]}),e.jsx(v,{label:"Other Expenses",value:t.otherExpenses,onChange:s=>h("otherExpenses",s)})]})]})]})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"flex bg-zinc-100 dark:bg-zinc-800 p-1 rounded-lg w-fit",children:[e.jsxs("button",{onClick:()=>m("growth"),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all flex items-center gap-2 ${x==="growth"?"bg-white dark:bg-zinc-700 shadow text-zinc-900 dark:text-zinc-100":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700"}`,children:[e.jsx(ae,{size:16}),"24-Month Forecast"]}),e.jsxs("button",{onClick:()=>m("static"),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all flex items-center gap-2 ${x==="static"?"bg-white dark:bg-zinc-700 shadow text-zinc-900 dark:text-zinc-100":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700"}`,children:[e.jsx(E,{size:16}),"Profitability Curve"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm",children:[e.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:"Current Revenue"}),e.jsxs("div",{className:"text-3xl font-black text-zinc-900 dark:text-zinc-100",children:["$",b.totalRevenue.toLocaleString(void 0,{maximumFractionDigits:0}),e.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"/mo"})]}),e.jsxs("div",{className:"text-xs text-zinc-500 mt-2 flex gap-2",children:["Margins: ",e.jsxs("span",{className:b.margin>20?"text-green-600":"text-zinc-600",children:[b.margin.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm",children:[e.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:"12-Month Outlook"}),e.jsxs("div",{className:"text-3xl font-black text-blue-600 flex items-center gap-2",children:["$",f[11].revenue.toLocaleString(void 0,{maximumFractionDigits:0}),f[11].revenue>b.totalRevenue?e.jsx(E,{size:20}):e.jsx(ne,{size:20})]}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-2",children:[f[11].students," Active Students (+",f[11].students-t.studentCount,")"]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm",children:[e.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:"Net Income (12mo)"}),e.jsxs("div",{className:`text-3xl font-black ${f[11].profit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[f[11].profit>=0?"+":"","$",f[11].profit.toLocaleString(void 0,{maximumFractionDigits:0})]}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-2",children:["Projected for ",f[11].month]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm h-[450px]",children:[e.jsx("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:x==="growth"?"24-Month Growth Forecast":"Profitability Analysis"}),e.jsx(B,{width:"100%",height:"100%",minHeight:300,children:x==="growth"?e.jsxs(ie,{data:f,margin:{top:10,right:30,left:10,bottom:0},children:[e.jsx(P,{dataKey:"month",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#71717A"}}),e.jsx(S,{yAxisId:"left",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#71717A"},tickFormatter:s=>`$${s/1e3}k`}),e.jsx(S,{yAxisId:"right",orientation:"right",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#71717A"}}),e.jsx(R,{vertical:!1,strokeDasharray:"3 3",stroke:"#E4E4E7"}),e.jsx(M,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)"},formatter:(s,n)=>[n==="Students"?s:`$${Number(s).toLocaleString()}`,n]}),e.jsx(re,{}),e.jsx(A,{yAxisId:"left",type:"monotone",dataKey:"revenue",name:"Revenue",stroke:"#3B82F6",strokeWidth:3,dot:!1}),e.jsx(A,{yAxisId:"left",type:"monotone",dataKey:"expenses",name:"Expenses",stroke:"#EF4444",strokeWidth:2,strokeDasharray:"5 5",dot:!1}),e.jsx(A,{yAxisId:"right",type:"monotone",dataKey:"students",name:"Students",stroke:"#8B5CF6",strokeWidth:2,dot:!1})]}):e.jsxs(T,{data:_,margin:{top:10,right:30,left:10,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorProfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})]}),e.jsx(P,{dataKey:"students",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#71717A"},label:{value:"Number of Students",position:"insideBottomRight",offset:-10,fontSize:12,fill:"#71717A"}}),e.jsx(S,{tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#71717A"},tickFormatter:s=>`$${s/1e3}k`}),e.jsx(R,{vertical:!1,strokeDasharray:"3 3",stroke:"#E4E4E7"}),e.jsx(M,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)"},formatter:s=>[`$${Number(s).toLocaleString()}`,""]}),e.jsx(C,{type:"monotone",dataKey:"revenue",name:"Revenue",stroke:"#3B82F6",fillOpacity:1,fill:"url(#colorRevenue)",strokeWidth:2}),e.jsx(C,{type:"monotone",dataKey:"expenses",name:"Expenses",stroke:"#EF4444",fill:"none",strokeWidth:2,strokeDasharray:"5 5"}),e.jsx(C,{type:"monotone",dataKey:"profit",name:"Net Profit",stroke:"#10B981",fillOpacity:1,fill:"url(#colorProfit)",strokeWidth:2}),e.jsx(oe,{x:t.studentCount,stroke:"#F59E0B",strokeDasharray:"3 3",label:{position:"top",value:"Current",fill:"#F59E0B",fontSize:12}})]})})]})]})]})}function v({label:x,value:m,onChange:i}){return e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:x}),e.jsx("input",{type:"number",value:m,onChange:p=>i(p.target.value),className:"w-full px-3 py-2 bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all"})]})}function be(x=!1){const[m,i]=o.useState(!1);return o.useEffect(()=>{if(typeof window<"u"){const p=localStorage.getItem("admin_show_financials")==="true";i(!p)}},[]),{isPrivacyMode:m}}const Fe=Q(function(){const{tenant:m}=Z(),[i,p]=o.useState("financials"),[k,z]=o.useState(!0),[c,D]=o.useState(null),[t,y]=o.useState(null),[b,_]=o.useState("30d"),[f,h]=o.useState(!1),[$,F]=o.useState(!1);o.useEffect(()=>{F(!!localStorage.getItem("impersonation_token"))},[]);const{isPrivacyMode:I}=be(),s=$&&I;o.useEffect(()=>{n()},[i,b]);const n=async()=>{z(!0);const a=new Date,r=new Date;b==="30d"&&r.setDate(a.getDate()-30),b==="90d"&&r.setDate(a.getDate()-90),b==="1y"&&r.setFullYear(a.getFullYear()-1);const d=await window.Clerk?.session?.getToken();try{if(i==="financials"){const l=await W(`/reports/revenue?startDate=${r.toISOString()}&endDate=${a.toISOString()}`,d);D(l)}else{const l=await W(`/reports/attendance?startDate=${r.toISOString()}&endDate=${a.toISOString()}`,d);y(l)}}catch(l){console.error("Failed to fetch report data",l)}finally{z(!1)}},u=async()=>{h(!0);const a=new Date,r=new Date;b==="30d"&&r.setDate(a.getDate()-30),b==="90d"&&r.setDate(a.getDate()-90),b==="1y"&&r.setFullYear(a.getFullYear()-1);const d=await window.Clerk?.session?.getToken();try{const g=await(await fetch(`https://studio-platform-api.slichti.workers.dev/reports/accounting/journal?format=csv&startDate=${r.toISOString()}&endDate=${a.toISOString()}`,{headers:{Authorization:`Bearer ${d}`,"X-Tenant-Slug":m.slug}})).blob(),j=window.URL.createObjectURL(g),N=document.createElement("a");N.href=j,N.download=`journal_${r.toISOString().split("T")[0]}_${a.toISOString().split("T")[0]}.csv`,N.click(),window.URL.revokeObjectURL(j)}catch(l){console.error("Failed to export journal",l)}finally{h(!1)}};return k&&!c&&!t?e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx(le,{className:"animate-spin text-zinc-400"})}):e.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Analytics"}),e.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:"Performance metrics and insights."})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:u,disabled:f,className:"px-4 py-2 text-sm font-medium rounded-md bg-emerald-600 text-white shadow hover:bg-emerald-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(ce,{size:16}),f?"Exporting...":"Export Journal"]}),e.jsx(ee,{to:"custom",className:"px-4 py-2 text-sm font-medium rounded-md bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 shadow hover:opacity-90 transition-opacity",children:"Custom Query"}),e.jsxs("div",{className:"flex bg-zinc-100 dark:bg-zinc-800 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>p("financials"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${i==="financials"?"bg-white dark:bg-zinc-700 shadow text-zinc-900 dark:text-zinc-100":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700"}`,children:"Financials"}),e.jsx("button",{onClick:()=>p("attendance"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${i==="attendance"?"bg-white dark:bg-zinc-700 shadow text-zinc-900 dark:text-zinc-100":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700"}`,children:"Attendance"}),e.jsx("button",{onClick:()=>p("projections"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${i==="projections"?"bg-white dark:bg-zinc-700 shadow text-zinc-900 dark:text-zinc-100":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700"}`,children:"Projections"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i==="financials"&&c&&e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Gross Volume (Period)",value:e.jsx(L,{revealed:!s,placeholder:"***",children:`$${(c.grossVolume/100).toFixed(2)}`}),icon:e.jsx(O,{size:20,className:"text-green-500"})}),e.jsx(w,{title:"Monthly Recurring Revenue",value:e.jsx(L,{revealed:!s,placeholder:"***",children:`$${(c.mrr/100).toFixed(2)}`}),subtext:"Active subscriptions snapshot",icon:e.jsx(E,{size:20,className:"text-blue-500"})}),e.jsx(w,{title:"Sales Breakdown",value:e.jsx(L,{revealed:!s,placeholder:"***",children:`${(c.breakdown.retail/(c.grossVolume||1)*100).toFixed(0)}% Retail`}),subtext:`$${(c.breakdown.packs/100).toFixed(0)} Packs`,icon:e.jsx(O,{size:20,className:"text-purple-500"})})]}),i==="attendance"&&t&&e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Total Bookings",value:t.totalBookings,icon:e.jsx(H,{size:20,className:"text-blue-500"})}),e.jsx(w,{title:"Check-in Rate",value:`${(t.totalCheckins/(t.totalBookings||1)*100).toFixed(0)}%`,subtext:`${t.totalCheckins} Checked-in`,icon:e.jsx(de,{size:20,className:"text-green-500"})})]})]}),i==="projections"?e.jsx(ue,{}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm relative",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:i==="financials"?"Revenue Trends":"Attendance Trends"}),s&&i==="financials"&&e.jsx("div",{className:"absolute inset-0 z-10 backdrop-blur-md bg-white/30 dark:bg-black/30 flex items-center justify-center rounded-xl",children:e.jsx("div",{className:"bg-white dark:bg-zinc-800 px-4 py-2 rounded-lg shadow lg text-sm font-medium",children:"Privacy Mode Enabled"})}),e.jsxs("div",{className:"h-80 w-full flex items-center justify-center text-zinc-400 text-sm",children:[i==="financials"&&c?.chartData?G(c.chartData)?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-2",children:"No revenue data for this period"}),e.jsx("div",{className:"text-xs text-zinc-500",children:"Record sales in POS to see trends"})]}):e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(T,{data:c.chartData,children:[e.jsx(R,{strokeDasharray:"3 3",vertical:!1,stroke:"#E4E4E7"}),e.jsx(P,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#71717A",fontSize:12},dy:10,tickFormatter:a=>V(a)}),e.jsx(S,{axisLine:!1,tickLine:!1,tick:{fill:"#71717A",fontSize:12}}),e.jsx(M,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:a=>[`$${Number(a).toFixed(2)}`,"Revenue"],labelFormatter:a=>new Date(a).toLocaleDateString()}),e.jsx(C,{type:"monotone",dataKey:"value",stroke:"#3B82F6",fill:"#EFF6FF",strokeWidth:2})]})}):null,i==="attendance"&&t?.chartData?G(t.chartData)?e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"mb-2",children:"No attendance data for this period"})}):e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(T,{data:t.chartData,children:[e.jsx(R,{strokeDasharray:"3 3",vertical:!1,stroke:"#E4E4E7"}),e.jsx(P,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#71717A",fontSize:12},dy:10,tickFormatter:a=>V(a)}),e.jsx(S,{axisLine:!1,tickLine:!1,tick:{fill:"#71717A",fontSize:12}}),e.jsx(M,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:a=>[a,"Attendees"],labelFormatter:a=>new Date(a).toLocaleDateString()}),e.jsx(C,{type:"monotone",dataKey:"value",stroke:"#10B981",fill:"#ECFDF5",strokeWidth:2})]})}):null]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm relative",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:i==="financials"?"Top Selling":"Top Classes"}),s&&i==="financials"&&e.jsx("div",{className:"absolute inset-0 z-10 backdrop-blur-md bg-white/30 dark:bg-black/30 flex items-center justify-center rounded-xl"}),i==="attendance"&&t?.topClasses&&e.jsxs("div",{className:"space-y-4",children:[t.topClasses.map((a,r)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium truncate max-w-[180px]",children:a.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-zinc-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500",style:{width:`${Math.min(a.attendees/50*100,100)}%`}})}),e.jsx("span",{className:"text-xs text-zinc-500 w-6 text-right",children:a.attendees})]})]},r)),t.topClasses.length===0&&e.jsx("div",{className:"text-center text-sm text-zinc-500 py-8",children:"No data available"})]}),i==="financials"&&c?.breakdown&&e.jsxs("div",{className:"space-y-4",children:[Object.entries(c.breakdown).map(([a,r])=>{const d=Number(r);if(d===0)return null;const l=c.grossVolume||1,g=d/l*100;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium capitalize text-zinc-700 dark:text-zinc-300",children:a}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-24 h-2 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${g}%`}})}),e.jsxs("span",{className:"text-xs font-mono text-zinc-500 w-16 text-right",children:["$",(d/100).toFixed(2)]})]})]},a)}),Object.values(c.breakdown).every(a=>a===0)&&e.jsx("div",{className:"text-center text-sm text-zinc-500 py-8",children:"No specific sales data recorded."})]})]})]})]})});function w({title:x,value:m,subtext:i,icon:p}){return e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-2 bg-zinc-50 dark:bg-zinc-800 rounded-lg",children:p})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:x}),e.jsx("div",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:m}),i&&e.jsx("p",{className:"text-xs text-zinc-500 mt-2",children:i})]})]})}function G(x){return!x||x.length===0?!0:x.every(m=>m.value===0)}function V(x){const m=new Date(x);return`${m.getMonth()+1}/${m.getDate()}`}export{Fe as default};
