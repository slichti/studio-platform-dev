import{d as N,N as p,w as y,u as f,O as C}from"./chunk-JZWAC4HX-Cg_gv2PJ.js";import{j as e}from"./vendor-puck-D_CB0wXL.js";import{a as n}from"./vendor-sentry-DugYw-Ne.js";import{T as O}from"./ThemeToggle-zBjmj0Ob.js";import{X as S}from"./x-Bbpoc0N5.js";import{K as I,h as L,O as v,z as M}from"./dialog-D_UahLgr.js";import{M as F}from"./menu-B8PscFfw.js";import{u as _,a as T}from"./index-BNXeXtNe.js";import"./ThemeProvider-DgwJ_08f.js";import"./createLucideIcon-BOpDDQ2B.js";import"./portal-B9V3iLbl.js";import"./vendor-charts-BaZHU4KA.js";const b=n.createContext(null);function P({children:l,open:o,onOpenChange:i,side:s="left"}){const[r,t]=n.useState(!1),d=o!==void 0,x=d?o:r,c=d?i:t;return e.jsx(b.Provider,{value:{isOpen:x,setIsOpen:c,side:s},children:l})}function U({children:l,className:o=""}){const{isOpen:i,setIsOpen:s,side:r}=n.useContext(b),t=r==="left"?"-translate-x-full":"translate-x-full",d="translate-x-0",x="translate-x-0",c=r==="left"?"-translate-x-full":"translate-x-full",a=r==="left"?"left-0":"right-0",m=r==="left"?"border-r":"border-l";return e.jsx(I,{appear:!0,show:i,as:n.Fragment,children:e.jsxs(L,{as:"div",className:"relative z-50",onClose:()=>s(!1),children:[e.jsx(v,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80"})}),e.jsx("div",{className:"fixed inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx("div",{className:`pointer-events-none fixed inset-y-0 ${a} flex max-w-full`,children:e.jsx(v,{as:n.Fragment,enter:"transform transition ease-in-out duration-300 sm:duration-300",enterFrom:t,enterTo:d,leave:"transform transition ease-in-out duration-300 sm:duration-300",leaveFrom:x,leaveTo:c,children:e.jsx(M,{className:`pointer-events-auto w-screen max-w-md ${o}`,children:e.jsx("div",{className:`flex h-full flex-col overflow-y-auto bg-white dark:bg-zinc-950 shadow-xl border-zinc-200 dark:border-zinc-800 ${m}`,children:e.jsxs("div",{className:"px-4 sm:px-6 py-6 flex-1 relative",children:[e.jsxs("button",{type:"button",className:"absolute right-4 top-4 rounded-md text-zinc-400 hover:text-zinc-500 focus:outline-none",onClick:()=>s(!1),children:[e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx(S,{className:"h-6 w-6","aria-hidden":"true"})]}),l]})})})})})})})]})})}function E({children:l,tenantName:o="Studio Platform",role:i,navItems:s,title:r="Overview"}){const{user:t,isLoaded:d}=_(),{signOut:x}=T(),[c,a]=n.useState(!1),[m,h]=n.useState(null),j=N(),[w,u]=n.useState(!1);n.useEffect(()=>{h(localStorage.getItem("impersonation_token"))},[]),n.useEffect(()=>{u(!1)},[j.pathname]);const k=()=>{typeof window<"u"&&(localStorage.removeItem("impersonation_token"),h(null)),x({redirectUrl:"/"})},g=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 flex items-center gap-4 border-b border-zinc-200 dark:border-zinc-800",children:[e.jsx("div",{className:"text-3xl",children:"üßò‚Äç‚ôÄÔ∏è"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400 leading-tight",children:o})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-2",children:s||e.jsx(e.Fragment,{children:e.jsx(p,{to:"/dashboard",className:({isActive:z})=>`block px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 ${z?"bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-800/50 hover:text-zinc-900 dark:hover:text-zinc-200"}`,children:"Overview"})})})]});return e.jsxs("div",{className:"flex h-screen bg-zinc-50 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100 font-sans transition-colors duration-300",children:[e.jsx("aside",{className:"hidden md:flex w-64 bg-white dark:bg-zinc-900 border-r border-zinc-200 dark:border-zinc-800 flex-col transition-colors duration-300 flex-shrink-0",children:e.jsx(g,{})}),e.jsx(P,{open:w,onOpenChange:u,side:"left",children:e.jsx(U,{className:"p-0 w-[80%] max-w-[300px]",children:e.jsx("div",{className:"h-full flex flex-col bg-white dark:bg-zinc-900",children:e.jsx(g,{})})})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-w-0",children:[m&&e.jsxs("div",{className:"bg-red-500 text-white px-4 py-2 flex items-center justify-center gap-3 text-sm font-medium",children:[e.jsxs("span",{children:["‚ö†Ô∏è Impersonating ",typeof window<"u"?localStorage.getItem("impersonation_target_email"):"User"]}),e.jsx("button",{onClick:()=>{localStorage.removeItem("impersonation_token"),localStorage.removeItem("impersonation_target_email"),h(null),window.location.href="/"},className:"bg-white text-red-500 px-2 py-0.5 rounded text-xs font-bold hover:bg-red-50",children:"Exit"})]}),e.jsxs("header",{className:"h-[70px] bg-white dark:bg-zinc-900 border-b border-zinc-200 dark:border-zinc-800 flex items-center justify-between px-4 md:px-8 transition-colors duration-300 flex-shrink-0 z-20",children:[e.jsxs("div",{className:"flex items-center gap-3 md:gap-0",children:[e.jsx("div",{className:"md:hidden",children:e.jsx("button",{onClick:()=>u(!0),className:"p-2 rounded-md text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800",children:e.jsx(F,{className:"w-6 h-6"})})}),e.jsx("div",{className:"text-lg font-medium text-zinc-900 dark:text-zinc-100 truncate",children:r})]}),e.jsxs("div",{className:"flex items-center gap-3 md:gap-5",children:[e.jsx(O,{}),d&&t&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{className:"flex items-center gap-3 p-1 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",onClick:()=>a(!c),children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-indigo-600 flex items-center justify-center text-white font-bold text-lg flex-shrink-0",children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.fullName||"User",className:"w-full h-full object-cover"}):e.jsx("span",{children:t.firstName?t.firstName[0]:"U"})}),e.jsxs("div",{className:"text-left hidden md:block",children:[e.jsx("div",{className:"font-semibold text-sm text-zinc-900 dark:text-zinc-100 max-w-[120px] truncate",children:t.fullName}),e.jsx("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 capitalize",children:i||"admin"})]}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-zinc-400 hidden md:block",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-56 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl shadow-lg p-2 z-50 animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs(p,{to:"/dashboard/profile",onClick:()=>a(!1),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-zinc-700 dark:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"My Profile"]}),m&&e.jsxs("button",{onClick:()=>{a(!1),localStorage.removeItem("impersonation_token"),localStorage.removeItem("impersonation_target_email"),h(null),window.location.href="/admin"},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 2a10 10 0 0 0-10 10v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6a10 10 0 0 0-10-10Z"}),e.jsx("path",{d:"M12 12v6"}),e.jsx("circle",{cx:"12",cy:"7",r:"1"})]}),"Return to Admin"]}),e.jsx("div",{className:"h-px bg-zinc-100 dark:bg-zinc-800 my-1"}),e.jsxs("button",{onClick:()=>{a(!1),k()},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Sign Out"]})]})]})]})]})]}),e.jsx("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto bg-zinc-50 dark:bg-zinc-950 transition-colors duration-300 w-full",children:l})]})]})}const G=y(function(){const{isPlatformAdmin:o,userProfile:i}=f();let s=[e.jsx(p,{to:"/dashboard",end:!0,className:({isActive:r})=>`block px-3 py-2 rounded-md text-sm font-medium transition-colors ${r?"bg-zinc-800 text-white":"text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800 dark:hover:text-white"}`,children:"Overview"},"overview")];return o&&(s.push(e.jsx("div",{className:"my-2 border-t border-zinc-200 dark:border-zinc-800"},"separator")),s.push(e.jsx(p,{to:"/admin",className:"block px-3 py-2 rounded-md text-sm font-medium text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors",children:"üõ°Ô∏è Platform Admin"},"admin"))),e.jsxs(E,{navItems:s,role:i?.role,children:[o===!1&&f().error&&e.jsxs("div",{className:"bg-red-50 text-red-700 p-4 border-b border-red-200 text-sm text-center",children:["Warning: Profile load failed. Admin features may be hidden. ",e.jsx("br",{}),e.jsx("span",{className:"font-mono text-xs opacity-75",children:f().error})]}),e.jsx(C,{})]})});export{G as default};
