import{w as k,d as w,e as S,l as C,r as a}from"./chunk-JMJ3UQ3L-C0Hu5JKs.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{P as y}from"./package-xPSd8iWr.js";import{P}from"./plus-CvcafwRV.js";import{S as A}from"./search-DkCXim1A.js";import{S as I}from"./square-pen-DI7aopXX.js";import{T as U}from"./trash-2-D-WZnS1m.js";import{c as D}from"./createLucideIcon-gSJn62ry.js";import{X as F}from"./x-Gn1snBvL.js";import{S as Q}from"./save-CsVKLC5l.js";const E=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],L=D("box",E),Z=k(function(){const{products:l}=w(),x=S();C();const[r,b]=a.useState(""),[c,j]=a.useState(""),[i,m]=a.useState(null),[u,o]=a.useState(!1),h=[...new Set(l.map(s=>s.category).filter(Boolean))],g=l.filter(s=>!(r&&!s.name.toLowerCase().includes(r.toLowerCase())||c&&s.category!==c)),p=s=>{confirm("Are you sure you want to delete this product?")&&x({intent:"delete",id:s},{method:"post"})},v=s=>`$${(s/100).toFixed(2)}`;return e.jsxs("div",{className:"flex flex-col h-full bg-zinc-50",children:[e.jsxs("header",{className:"bg-white border-b border-zinc-200 px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-zinc-900 rounded-lg text-white",children:e.jsx(y,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-zinc-900",children:"Retail"}),e.jsxs("p",{className:"text-sm text-zinc-500",children:[l.length," products"]})]})]}),e.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-zinc-900 text-white rounded-lg text-sm font-medium hover:bg-zinc-800 flex items-center gap-2",children:[e.jsx(P,{size:16})," Add Product"]})]}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(A,{className:"absolute left-3 top-2.5 h-4 w-4 text-zinc-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",className:"w-full pl-9 pr-4 py-2 border border-zinc-200 rounded-lg text-sm outline-none focus:ring-2 focus:ring-black/5",value:r,onChange:s=>b(s.target.value)})]}),e.jsxs("select",{value:c,onChange:s=>j(s.target.value),className:"px-4 py-2 border border-zinc-200 rounded-lg text-sm outline-none focus:ring-2 focus:ring-black/5",children:[e.jsx("option",{value:"",children:"All Categories"}),h.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:g.length===0?e.jsxs("div",{className:"text-center py-20 text-zinc-500",children:[e.jsx(y,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No products found"}),e.jsx("button",{onClick:()=>o(!0),className:"mt-4 text-sm text-zinc-900 underline",children:"Add your first product"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:g.map(s=>e.jsxs("div",{className:"bg-white rounded-lg border border-zinc-200 overflow-hidden group hover:border-zinc-300 transition",children:[e.jsxs("div",{className:"aspect-square bg-zinc-100 relative",children:[s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(y,{size:48,className:"text-zinc-300"})}),!s.isActive&&e.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-red-100 text-red-600 text-xs font-medium rounded",children:"Inactive"}),e.jsxs("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition flex gap-1",children:[e.jsx("button",{onClick:()=>m(s),className:"p-1.5 bg-white rounded shadow hover:bg-zinc-50",children:e.jsx(I,{size:14})}),e.jsx("button",{onClick:()=>p(s.id),className:"p-1.5 bg-white rounded shadow hover:bg-red-50 text-red-500",children:e.jsx(U,{size:14})})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-zinc-900",children:s.name}),e.jsx("p",{className:"text-sm text-zinc-500",children:s.category||"Uncategorized"})]}),e.jsx("span",{className:"text-lg font-bold text-zinc-900",children:v(s.price)})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-zinc-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(L,{size:12})," ",s.stockQuantity," in stock"]}),s.sku&&e.jsx("span",{className:"font-mono",children:s.sku})]})]})]},s.id))})}),(i||u)&&e.jsx(M,{product:i,onClose:()=>{m(null),o(!1)},onSave:s=>{const d=new FormData;d.append("intent",i?"update":"create"),i&&d.append("id",i.id),Object.entries(s).forEach(([f,N])=>{d.append(f,String(N))}),x(d,{method:"post"}),m(null),o(!1)}})]})});function M({product:n,onClose:l,onSave:x}){const[r,b]=a.useState(n?.name||""),[c,j]=a.useState(n?.description||""),[i,m]=a.useState(n?.category||""),[u,o]=a.useState(n?.sku||""),[h,g]=a.useState(n?.price?(n.price/100).toFixed(2):""),[p,v]=a.useState(n?.stockQuantity?.toString()||"0"),[s,d]=a.useState(n?.imageUrl||""),[f,N]=a.useState(n?.isActive!==!1),z=t=>{t.preventDefault(),x({name:r,description:c,category:i,sku:u,price:Math.round(parseFloat(h||"0")*100),stockQuantity:parseInt(p||"0"),imageUrl:s,isActive:f})};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"p-4 border-b border-zinc-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-bold",children:n?"Edit Product":"New Product"}),e.jsx("button",{onClick:l,children:e.jsx(F,{size:20,className:"text-zinc-400 hover:text-zinc-600"})})]}),e.jsxs("form",{onSubmit:z,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:r,onChange:t=>b(t.target.value),className:"w-full px-3 py-2 border border-zinc-200 rounded-lg outline-none focus:ring-2 focus:ring-black/5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Price ($)"}),e.jsx("input",{type:"number",step:"0.01",value:h,onChange:t=>g(t.target.value),className:"w-full px-3 py-2 border border-zinc-200 rounded-lg outline-none focus:ring-2 focus:ring-black/5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Stock"}),e.jsx("input",{type:"number",value:p,onChange:t=>v(t.target.value),className:"w-full px-3 py-2 border border-zinc-200 rounded-lg outline-none focus:ring-2 focus:ring-black/5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Category"}),e.jsx("input",{type:"text",value:i,onChange:t=>m(t.target.value),placeholder:"e.g. Apparel",className:"w-full px-3 py-2 border border-zinc-200 rounded-lg outline-none focus:ring-2 focus:ring-black/5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"SKU"}),e.jsx("input",{type:"text",value:u,onChange:t=>o(t.target.value),className:"w-full px-3 py-2 border border-zinc-200 rounded-lg outline-none focus:ring-2 focus:ring-black/5 font-mono"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Description"}),e.jsx("textarea",{value:c,onChange:t=>j(t.target.value),rows:3,className:"w-full px-3 py-2 border border-zinc-200 rounded-lg outline-none focus:ring-2 focus:ring-black/5 resize-none"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Image URL"}),e.jsx("input",{type:"url",value:s,onChange:t=>d(t.target.value),placeholder:"https://...",className:"w-full px-3 py-2 border border-zinc-200 rounded-lg outline-none focus:ring-2 focus:ring-black/5"})]}),e.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:f,onChange:t=>N(t.target.checked),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm text-zinc-700",children:"Active (visible to customers)"})]})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-3 border-t border-zinc-100",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-zinc-500 hover:text-zinc-700",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 text-sm font-medium bg-zinc-900 text-white rounded-lg hover:bg-zinc-800 flex items-center gap-2",children:[e.jsx(Q,{size:16})," ",n?"Save Changes":"Create Product"]})]})]})]})})}export{Z as default};
