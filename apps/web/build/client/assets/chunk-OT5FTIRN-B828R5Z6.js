import{c as M,b as w,e as C,d as A,C as U}from"./index-B5GN05BP.js";import{a as h,R as x}from"./vendor-sentry-D-95zPX-.js";var S=class k extends Error{static kind="ClerkError";clerkError=!0;code;longMessage;docsUrl;cause;get name(){return this.constructor.name}constructor(t){super(new.target.formatMessage(new.target.kind,t.message,t.code,t.docsUrl),{cause:t.cause}),Object.setPrototypeOf(this,k.prototype),this.code=t.code,this.docsUrl=t.docsUrl,this.longMessage=t.longMessage,this.cause=t.cause}toString(){return`[${this.name}]
Message:${this.message}`}static formatMessage(t,r,n,s){const o="Clerk:",a=new RegExp(o.replace(" ","\\s*"),"i");return r=r.replace(a,""),r=`${o} ${r.trim()}

(code="${n}")

`,s&&(r+=`

Docs: ${s}`),r}};const B=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function I({packageName:e,customMessages:t}){let r=e;function n(o,a){if(!a)return`${r}: ${o}`;let i=o;const l=o.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const c of l){const u=(a[c[1]]||"").toString();i=i.replace(`{{${c[1]}}}`,u)}return`${r}: ${i}`}const s={...B,...t};return{setPackageName({packageName:o}){return typeof o=="string"&&(r=o),this},setMessages({customMessages:o}){return Object.assign(s,o||{}),this},throwInvalidPublishableKeyError(o){throw new Error(n(s.InvalidPublishableKeyErrorMessage,o))},throwInvalidProxyUrl(o){throw new Error(n(s.InvalidProxyUrlErrorMessage,o))},throwMissingPublishableKeyError(){throw new Error(n(s.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(n(s.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(o){throw new Error(n(s.MissingClerkProvider,o))},throw(o){throw new Error(n(o))}}}var Q=class y extends S{static kind="ClerkRuntimeError";clerkRuntimeError=!0;constructor(t,r){super({...r,message:t}),Object.setPrototypeOf(this,y.prototype)}};const L={strict_mfa:{afterMinutes:10,level:"multi_factor"},strict:{afterMinutes:10,level:"second_factor"},moderate:{afterMinutes:60,level:"second_factor"},lax:{afterMinutes:1440,level:"second_factor"}},R=new Set(["first_factor","second_factor","multi_factor"]),$=new Set(["strict_mfa","strict","moderate","lax"]),z=e=>typeof e=="number"&&e>0,_=e=>R.has(e),T=e=>$.has(e),p=e=>e.replace(/^(org:)*/,"org:"),O=(e,t)=>{const{orgId:r,orgRole:n,orgPermissions:s}=t;return!e.role&&!e.permission||!r||!n||!s?null:e.permission?s.includes(p(e.permission)):e.role?p(n)===p(e.role):null},m=(e,t)=>{const{org:r,user:n}=K(e),[s,o]=t.split(":"),a=o||s;return s==="org"?r.includes(a):s==="user"?n.includes(a):[...r,...n].includes(a)},W=(e,t)=>{const{features:r,plans:n}=t;return e.feature&&r?m(r,e.feature):e.plan&&n?m(n,e.plan):null},K=e=>{const t=e?e.split(",").map(r=>r.trim()):[];return{org:t.filter(r=>r.split(":")[0].includes("o")).map(r=>r.split(":")[1]),user:t.filter(r=>r.split(":")[0].includes("u")).map(r=>r.split(":")[1])}},V=e=>{if(!e)return!1;const t=s=>typeof s=="string"?L[s]:s,r=typeof e=="string"&&T(e),n=typeof e=="object"&&_(e.level)&&z(e.afterMinutes);return r||n?t.bind(null,e):!1},F=(e,{factorVerificationAge:t})=>{if(!e.reverification||!t)return null;const r=V(e.reverification);if(!r)return null;const{level:n,afterMinutes:s}=r(),[o,a]=t,i=o!==-1?s>o:null,l=a!==-1?s>a:null;switch(n){case"first_factor":return i;case"second_factor":return a!==-1?l:i;case"multi_factor":return a===-1?i:i&&l}},j=e=>t=>{if(!e.userId)return!1;const r=W(t,e),n=O(t,e),s=F(t,e);return[r||n,s].some(o=>o===null)?[r||n,s].some(o=>o===!0):[r||n,s].every(o=>o===!0)},D=({authObject:{sessionId:e,sessionStatus:t,userId:r,actor:n,orgId:s,orgRole:o,orgSlug:a,signOut:i,getToken:l,has:c,sessionClaims:u},options:{treatPendingAsSignedOut:d=!0}})=>{if(e===void 0&&r===void 0)return{isLoaded:!1,isSignedIn:void 0,sessionId:e,sessionClaims:void 0,userId:r,actor:void 0,orgId:void 0,orgRole:void 0,orgSlug:void 0,has:void 0,signOut:i,getToken:l};if(e===null&&r===null)return{isLoaded:!0,isSignedIn:!1,sessionId:e,userId:r,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:i,getToken:l};if(d&&t==="pending")return{isLoaded:!0,isSignedIn:!1,sessionId:null,userId:null,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:i,getToken:l};if(e&&u&&r&&s&&o)return{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:u,userId:r,actor:n||null,orgId:s,orgRole:o,orgSlug:a||null,has:c,signOut:i,getToken:l};if(e&&u&&r&&!s)return{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:u,userId:r,actor:n||null,orgId:null,orgRole:null,orgSlug:null,has:c,signOut:i,getToken:l}};var g=I({packageName:"@clerk/clerk-react"});function X(e){g.setMessages(e).setPackageName(e)}var[ee,Y]=M("AuthContext"),re=U,b=w,te="You've added multiple <ClerkProvider> components in your React component tree. Wrap your components in a single <ClerkProvider>.",oe=e=>`You've passed multiple children components to <${e}/>. You can only pass a single child component or text.`,q="Invalid state. Feel free to submit a bug or reach out to support here: https://clerk.com/support",ne="Unsupported usage of isSatellite, domain or proxyUrl. The usage of isSatellite, domain or proxyUrl as function is not supported in non-browser environments.",se="<UserProfile.Page /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",ie="<UserProfile.Link /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",ae="<OrganizationProfile.Page /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",le="<OrganizationProfile.Link /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",ue=e=>`<${e} /> can only accept <${e}.Page /> and <${e}.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.`,ce=e=>`Missing props. <${e}.Page /> component requires the following props: url, label, labelIcon, alongside with children to be rendered inside the page.`,de=e=>`Missing props. <${e}.Link /> component requires the following props: url, label and labelIcon.`,pe=e=>`The <${e}/> component uses path-based routing by default unless a different routing strategy is provided using the \`routing\` prop. When path-based routing is used, you need to provide the path where the component is mounted on by using the \`path\` prop. Example: <${e} path={'/my-path'} />`,he=e=>`The \`path\` prop will only be respected when the Clerk component uses path-based routing. To resolve this error, pass \`routing='path'\` to the <${e}/> component, or drop the \`path\` prop to switch to hash-based routing. For more details please refer to our docs: https://clerk.com/docs`,ge="<UserButton /> can only accept <UserButton.UserProfilePage />, <UserButton.UserProfileLink /> and <UserButton.MenuItems /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.",fe="<UserButton.MenuItems /> component can only accept <UserButton.Action /> and <UserButton.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.",ve="<UserButton.MenuItems /> component needs to be a direct child of `<UserButton />`.",me="<UserButton.Action /> component needs to be a direct child of `<UserButton.MenuItems />`.",ke="<UserButton.Link /> component needs to be a direct child of `<UserButton.MenuItems />`.",ye="Missing props. <UserButton.Link /> component requires the following props: href, label and labelIcon.",be="Missing props. <UserButton.Action /> component requires the following props: label.",P=e=>{A(()=>{g.throwMissingClerkProviderError({source:e})})},E=e=>new Promise(t=>{const r=n=>{["ready","degraded"].includes(n)&&(t(),e.off("status",r))};e.on("status",r,{notify:!0})}),H=e=>async t=>(await E(e),e.session?e.session.getToken(t):null),N=e=>async(...t)=>(await E(e),e.signOut(...t)),Pe=(e={})=>{var t;P("useAuth");const{treatPendingAsSignedOut:r,...n}=e??{},s=n;let a=Y();a.sessionId===void 0&&a.userId===void 0&&(a=s??{});const i=b(),l=h.useCallback(H(i),[i]),c=h.useCallback(N(i),[i]);return(t=i.telemetry)==null||t.record(C("useAuth",{treatPendingAsSignedOut:r})),G({...a,getToken:l,signOut:c},{treatPendingAsSignedOut:r})};function G(e,{treatPendingAsSignedOut:t=!0}={}){const{userId:r,orgId:n,orgRole:s,has:o,signOut:a,getToken:i,orgPermissions:l,factorVerificationAge:c,sessionClaims:u}=e??{},d=h.useCallback(v=>o?o(v):j({userId:r,orgId:n,orgRole:s,orgPermissions:l,factorVerificationAge:c,features:u?.fea||"",plans:u?.pla||""})(v),[o,r,n,s,l,c,u]),f=D({authObject:{...e,getToken:i,signOut:a,has:d},options:{treatPendingAsSignedOut:t}});return f||g.throw(q)}var Ee=(e,t)=>{const n=(typeof t=="string"?t:t?.component)||e.displayName||e.name||"Component";e.displayName=n;const s=typeof t=="string"?void 0:t,o=a=>{P(n);const i=b();return!i.loaded&&!s?.renderWhileLoading?null:x.createElement(e,{...a,component:n,clerk:i})};return o.displayName=`withClerk(${n})`,o};export{ee as A,Q as C,re as I,P as a,ce as b,ue as c,de as d,ge as e,fe as f,be as g,ye as h,ae as i,se as j,ie as k,ve as l,me as m,ke as n,le as o,g as p,oe as q,pe as r,he as s,I as t,Pe as u,X as v,Ee as w,ne as x,te as y};
