import{r as p,p as e,w as g,x as y,Q as f,B as b,K as j}from"./chunk-JMJ3UQ3L-Bmktta78.js";import{a as w}from"./api-piI5qlNr.js";import{u as v}from"./chunk-OT5FTIRN-BGHl3_fX.js";import"./index-CCnl-c2s.js";function S({onUploadComplete:c}){const{getToken:r}=v(),[i,a]=p.useState(!1),[s,o]=p.useState(null),n=async t=>{const l=t.target.files?.[0];if(l){a(!0);try{const d=await r(),{uploadURL:u}=await w("/uploads/image",d,{method:"POST"}),x=new FormData;x.append("file",l);const m=await fetch(u,{method:"POST",body:x});if(!m.ok)throw new Error("Failed to upload image to Cloudflare");const h=(await m.json()).result.id;c(h),o(URL.createObjectURL(l))}catch(d){console.error(d),alert("Upload failed")}finally{a(!1)}}};return e.jsxs("div",{style:{marginTop:"10px"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",marginBottom:"5px"},children:"Thumbnail"}),e.jsx("input",{type:"file",accept:"image/*",onChange:n,disabled:i,style:{fontSize:"0.875rem"}}),i&&e.jsx("span",{style:{fontSize:"0.875rem",color:"#71717a",marginLeft:"10px"},children:"Uploading..."}),s&&e.jsx("div",{style:{marginTop:"10px"},children:e.jsx("img",{src:s,alt:"Preview",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"6px"}})})]})}const D=g(function(){const{classes:r}=y(),i=f(),s=b().state==="submitting",[o,n]=p.useState(null);return e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:e.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"bold"},children:"Classes"})}),e.jsxs("div",{style:{background:"white",padding:"20px",borderRadius:"8px",border:"1px solid #e4e4e7",marginBottom:"40px"},children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"semibold",marginBottom:"15px"},children:"Create New Class"}),e.jsxs(j,{method:"post",style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:"20px",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",marginBottom:"5px"},children:"Title"}),e.jsx("input",{name:"title",required:!0,type:"text",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #d4d4d8"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",marginBottom:"5px"},children:"Start Time"}),e.jsx("input",{name:"startTime",required:!0,type:"datetime-local",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #d4d4d8"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",marginBottom:"5px"},children:"Duration (min)"}),e.jsx("input",{name:"duration",required:!0,type:"number",defaultValue:"60",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #d4d4d8"}})]}),e.jsx("input",{type:"hidden",name:"thumbnailId",value:o||""}),e.jsx("div",{style:{marginBottom:"10px"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"0.875rem"},children:[e.jsx("input",{name:"createZoom",type:"checkbox"}),"Auto-create Zoom?"]})}),e.jsx("button",{disabled:s,type:"submit",style:{padding:"10px 20px",background:"#18181b",color:"white",borderRadius:"6px",border:"none",cursor:"pointer"},children:s?"Creating...":"Create Class"})]}),e.jsx("div",{style:{marginTop:"10px"},children:e.jsx(S,{onUploadComplete:t=>n(t)})}),i?.error&&e.jsx("p",{style:{color:"red",marginTop:"10px"},children:i.error})]}),e.jsxs("div",{style:{display:"grid",gap:"15px"},children:[r.map(t=>e.jsxs("div",{style:{background:"white",padding:"20px",borderRadius:"8px",border:"1px solid #e4e4e7",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{fontWeight:"bold"},children:t.title}),e.jsx("p",{style:{color:"#71717a",fontSize:"0.875rem"},children:new Date(t.startTime).toLocaleString()})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[t.zoomMeetingUrl&&e.jsx("a",{href:t.zoomMeetingUrl,target:"_blank",rel:"noreferrer",style:{fontSize:"0.875rem",color:"#2563eb"},children:"Zoom Link"}),e.jsx("a",{href:`/dashboard/classes/${t.id}/roster`,style:{fontSize:"0.875rem",textDecoration:"underline"},children:"View Roster"})]})]},t.id)),r.length===0&&e.jsx("p",{style:{color:"#71717a"},children:"No classes found."})]})]})});export{D as default};
