import{p as j,q as g,G as v,I as N,a as l,j as e,L as z,J as w,K as y,N as k,O as d,T as C,X as S,Q as V}from"./vendor-react-D59Q0YKK.js";import{f as o}from"./format-CAsSOgDD.js";import"./vendor-puck-RN2Ey-av.js";import"./vendor-charts-Dp-zC2wb.js";const E=j(function(){const{collection:t,allVideos:x}=g(),a=v();N();const[m,r]=l.useState(!1),[n,u]=l.useState(""),[h,i]=l.useState(!1),p=new Set(t.items.map(s=>s.videoId)),c=x.filter(s=>!p.has(s.id)&&s.title.toLowerCase().includes(n.toLowerCase())),b=()=>{confirm("Are you sure you want to delete this collection?")&&a({intent:"delete_collection"},{method:"post"})},f=s=>{a({intent:"add_item",videoId:s},{method:"post",preventScrollReset:!0})};return e.jsxs("div",{className:"flex flex-col h-full bg-white",children:[e.jsxs("header",{className:"border-b border-zinc-200 px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(z,{to:"../?tab=collections",className:"p-2 hover:bg-zinc-100 rounded-full text-zinc-500 transition",children:e.jsx(w,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-zinc-900",children:t.title}),e.jsxs("div",{className:"text-sm text-zinc-500 font-mono",children:["/",t.slug]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 text-sm font-medium text-zinc-700 bg-white border border-zinc-300 rounded-lg hover:bg-zinc-50",children:"Edit Details"}),e.jsx("button",{onClick:b,className:"px-4 py-2 text-sm font-medium text-red-600 bg-red-50 border border-transparent rounded-lg hover:bg-red-100",children:"Delete"}),e.jsxs("button",{onClick:()=>r(!0),className:"px-4 py-2 text-sm font-medium text-white bg-zinc-900 rounded-lg hover:bg-zinc-800 flex items-center gap-2",children:[e.jsx(y,{size:16})," Add Video"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 max-w-5xl mx-auto w-full space-y-8",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:["Videos ",e.jsxs("span",{className:"text-zinc-400 font-normal text-sm",children:["(",t.items.length,")"]})]}),e.jsxs("div",{className:"bg-white border border-zinc-200 rounded-lg divide-y divide-zinc-100",children:[t.items.map((s,_)=>e.jsxs("div",{className:"p-4 flex items-center gap-4 group hover:bg-zinc-50 transition",children:[e.jsx("div",{className:"text-zinc-400 cursor-move hover:text-zinc-600",children:e.jsx(k,{size:20})}),e.jsx("div",{className:"w-16 h-10 bg-zinc-100 rounded overflow-hidden border border-zinc-200 shrink-0",children:s.video?.posterUrl?e.jsx("img",{src:s.video.posterUrl,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-300 bg-zinc-50",children:e.jsx("span",{className:"text-[10px]",children:"No Img"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-zinc-900 truncate",children:s.video?.title||"Unknown Video"}),e.jsxs("div",{className:"text-xs text-zinc-500 flex gap-3",children:[e.jsx("span",{children:o(s.video?.duration||0)}),e.jsx("span",{className:"capitalize",children:s.video?.status})]})]}),e.jsxs(d,{method:"post",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("input",{type:"hidden",name:"intent",value:"remove_item"}),e.jsx("input",{type:"hidden",name:"itemId",value:s.id}),e.jsx("button",{className:"p-2 text-zinc-400 hover:text-red-600 hover:bg-red-50 rounded transition",children:e.jsx(C,{size:16})})]})]},s.id)),t.items.length===0&&e.jsx("div",{className:"p-12 text-center text-zinc-500",children:"This collection is empty."})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full h-[600px] flex flex-col animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"p-4 border-b border-zinc-200 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Add Video to Collection"}),e.jsx("button",{onClick:()=>r(!1),children:e.jsx(S,{size:20,className:"text-zinc-400 hover:text-zinc-600"})})]}),e.jsx("div",{className:"p-4 border-b border-zinc-200 bg-zinc-50",children:e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-2.5 h-4 w-4 text-zinc-400"}),e.jsx("input",{type:"text",placeholder:"Search library...",className:"w-full pl-9 pr-4 py-2 border border-zinc-200 rounded-lg text-sm bg-white outline-none focus:ring-2 focus:ring-black/5",value:n,onChange:s=>u(s.target.value)})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[c.map(s=>e.jsxs("div",{className:"p-3 hover:bg-zinc-50 rounded-lg flex items-center justify-between group transition",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-8 bg-zinc-100 rounded flex-shrink-0 border border-zinc-200",children:s.posterUrl&&e.jsx("img",{src:s.posterUrl,className:"w-full h-full object-cover rounded"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm text-zinc-900",children:s.title}),e.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:o(s.duration)})]})]}),e.jsx("button",{onClick:()=>f(s.id),className:"px-3 py-1.5 text-xs font-semibold bg-zinc-900 text-white rounded hover:bg-zinc-800 transition",children:"Add"})]},s.id)),c.length===0&&e.jsx("div",{className:"p-8 text-center text-sm text-zinc-500",children:n?"No videos found matching search.":"No video available to add."})]})]})}),h&&e.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:()=>i(!1)}),e.jsxs("div",{className:"relative w-full max-w-md bg-white shadow-2xl h-full p-6 animate-in slide-in-from-right duration-200",children:[e.jsx("h3",{className:"text-xl font-bold mb-6",children:"Edit Collection"}),e.jsxs(d,{method:"post",onSubmit:()=>i(!1),className:"space-y-4",children:[e.jsx("input",{type:"hidden",name:"intent",value:"update_details"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",name:"title",defaultValue:t.title,className:"w-full px-3 py-2 border border-zinc-200 rounded-lg outline-none focus:ring-2 focus:ring-black/5",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Slug (URL)"}),e.jsx("input",{type:"text",name:"slug",defaultValue:t.slug,className:"w-full px-3 py-2 border border-zinc-200 rounded-lg outline-none focus:ring-2 focus:ring-black/5 font-mono text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:t.description,rows:4,className:"w-full px-3 py-2 border border-zinc-200 rounded-lg outline-none focus:ring-2 focus:ring-black/5 resize-none"})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-sm font-medium text-zinc-500 hover:text-zinc-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium bg-zinc-900 text-white rounded-lg hover:bg-zinc-800",children:"Save Changes"})]})]})]})]})]})});export{E as default};
