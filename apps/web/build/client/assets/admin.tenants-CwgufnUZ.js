import{w as We,d as Ye,r,a as Qe,L as Xe}from"./chunk-EPOLDU6W-CCdTpUCB.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{a as c,A as Ke}from"./api-LAgipKeK.js";import{M as Z}from"./Modal-6r1z3B2o.js";import{E as es,C as ss}from"./Dialogs-CavmjmhQ.js";import{P as ts}from"./PrivacyBlur-DCeFAFUq.js";import{C as ns}from"./chevron-down-DwXs6Zew.js";import{C as as}from"./chevron-right-C8udvsAQ.js";import{S as is}from"./smartphone-CPdGIUQo.js";import{G as rs}from"./globe-BsZwy-Xw.js";import{M as ls}from"./messages-square-nq2-2EZI.js";import{C as oe}from"./credit-card-YeKafXcX.js";import{V as cs}from"./video-BOhSxDUd.js";import{c as os}from"./createLucideIcon-BL8SG8hg.js";import{S as ds}from"./shopping-cart-etxA_YeF.js";import{M as ms}from"./message-square-6cQesQbm.js";import{M as xs}from"./mail-pT8-objO.js";import{S as us}from"./settings-DSuN3ssj.js";import{T as ps}from"./triangle-alert--mIInp-H.js";import{A as bs}from"./activity-B5UhKxHF.js";import{u as hs}from"./chunk-OT5FTIRN-ZNG8QEaZ.js";import"./index-DnWvPTQO.js";import"./index-CTNgJJrB.js";const gs=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],fs=os("monitor",gs),Vs=We(function(){const{tenants:de,platformConfig:me}=Ye(),[m,g]=r.useState(de),[xe,P]=r.useState(!1),[p,u]=r.useState(!1),[L,H]=r.useState(null),[ue,U]=r.useState({}),[vs,pe]=r.useState({}),[W,F]=r.useState({}),[Y,be]=r.useState({}),[he,Q]=r.useState(!1),[z,X]=r.useState(null),[K,N]=r.useState(!1),[ee,se]=r.useState(null),[O,A]=r.useState(""),[M,te]=r.useState("requested_by_customer"),[ne,I]=r.useState(""),[ge,_]=r.useState(!1),[T,fe]=r.useState(null),[je,G]=r.useState(!1),[y,ve]=r.useState(null),Ne=[{key:"mobile_app",label:"White-Label Mobile App",icon:is},{key:"website_builder",label:"Website Builder",icon:rs},{key:"chat",label:"Chat System",icon:ls},{key:"financials",label:"Financials & Payouts",icon:oe},{key:"vod",label:"Video on Demand",icon:cs},{key:"zoom",label:"Zoom Integration",icon:fs},{key:"pos",label:"POS & Retail",icon:ds},{key:"sms",label:"SMS Messaging",icon:ms},{key:"marketing",label:"Marketing & CRM",icon:xs},{key:"payroll",label:"Payroll & Compensation",icon:oe}],[q,x]=r.useState({isOpen:!1,message:""}),[$,b]=r.useState({isOpen:!1,message:""}),{getToken:d}=hs();Qe();const[h,w]=r.useState({name:"",slug:"",ownerEmail:"",plan:"basic"}),[f,ye]=r.useState("createdAt"),[j,ae]=r.useState("desc"),[V,ze]=r.useState("all"),[J,we]=r.useState("all"),[S,Se]=r.useState(()=>typeof window<"u"?localStorage.getItem("admin_show_financials")==="true":!1),[Ce,D]=r.useState(!1),[ie,ke]=r.useState(null),[v,E]=r.useState({accountId:"",clientId:"",clientSecret:""}),Pe=s=>{ke(s),E({accountId:"",clientId:"",clientSecret:""}),D(!0)},Oe=async s=>{if(s.preventDefault(),!!ie){u(!0);try{const t=await d(),n=await c(`/admin/tenants/${ie}/credentials/zoom`,t,{method:"PUT",body:JSON.stringify(v)});if(n.error)throw new Error(n.error);b({isOpen:!0,message:"Zoom credentials updated successfully."}),D(!1)}catch(t){x({isOpen:!0,message:t.message})}finally{u(!1)}}},Ae=()=>{const s=!S;Se(s),localStorage.setItem("admin_show_financials",String(s))},C=s=>{f===s?ae(j==="asc"?"desc":"asc"):(ye(s),ae("asc"))},Te=()=>{if(!Array.isArray(m))return[];let s=[...m];return V!=="all"&&(s=s.filter(t=>(t.status||"active")===V)),J!=="all"&&(s=s.filter(t=>(t.tier||"basic")===J)),s.sort((t,n)=>{const a=(Be,Ze)=>Ze.split(".").reduce((ce,He)=>ce&&ce[He],Be),i=a(t,f),l=a(n,f);if(i===l)return 0;const o=i>l?1:-1;return j==="asc"?o:-o})},$e=async s=>{s.preventDefault(),u(!0);try{const t=await d(),n=await c("/admin/tenants",t,{method:"POST",body:JSON.stringify({name:h.name,slug:h.slug,tier:h.plan,trialDays:h.trialDays})});n.error?x({isOpen:!0,message:n.error}):(g([...m,n]),P(!1),w({name:"",slug:"",ownerEmail:"",plan:"basic"}),b({isOpen:!0,message:`Tenant ${n.name} (${n.slug}) has been provisioned successfully.`}))}catch(t){console.error(t),x({isOpen:!0,message:t.message||"Failed to create tenant. Please try again."})}finally{u(!1)}},R=async(s,t)=>{try{const n=await d(),a=await c(`/admin/tenants/${s}/status`,n,{method:"PATCH",body:JSON.stringify({status:t})});a.error?x({isOpen:!0,message:a.error}):(g(m.map(i=>i.id===s?{...i,status:t}:i)),b({isOpen:!0,message:`Tenant status updated to ${t}.`}))}catch(n){x({isOpen:!0,message:n.message||"Failed to update status."})}},De=async(s,t)=>{if(confirm(`Are you sure you want to change this tenant to ${t}?`))try{const n=await d(),a=await c(`/admin/tenants/${s}/tier`,n,{method:"PATCH",body:JSON.stringify({tier:t})});a.error?x({isOpen:!0,message:a.error}):(g(m.map(i=>i.id===s?{...i,tier:t}:i)),b({isOpen:!0,message:`Tenant tier updated to ${t}.`}))}catch(n){x({isOpen:!0,message:n.message||"Failed to update tier."})}},Ee=async(s,t)=>{if(confirm(`Switch billing interval to ${t}? This will update the Stripe Subscription immediately.`)){u(!0);try{const n=await d(),a=await c(`/admin/tenants/${s}/subscription`,n,{method:"PATCH",body:JSON.stringify({interval:t})});if(a.error)throw new Error(a.error);b({isOpen:!0,message:"Subscription interval updated."});const i=await c(`/admin/tenants/${s}/billing/details`,n);F(l=>({...l,[s]:i}))}catch(n){x({isOpen:!0,message:n.message})}finally{u(!1)}}},Re=s=>{fe(s),_(!0)},Le=async()=>{if(!T)return;u(!0);const s=!1;try{const t=await d(),n=await c(`/admin/tenants/${T}/subscription/cancel`,t,{method:"POST",body:JSON.stringify({immediate:s})});if(n.error)throw new Error(n.error);b({isOpen:!0,message:"Subscription set to cancel at end of period."});const a=await c(`/admin/tenants/${T}/billing/details`,t);F(i=>({...i,[T]:a})),_(!1)}catch(t){x({isOpen:!0,message:t.message})}finally{u(!1)}},re=async s=>{if(s.preventDefault(),!!ee){u(!0);try{const t=await d(),n=await c(`/admin/tenants/${ee}/billing/refund`,t,{method:"POST",body:JSON.stringify({paymentIntentId:ne,amount:O?Math.round(parseFloat(O)*100):void 0,reason:M})});if(n.error)throw new Error(n.error);b({isOpen:!0,message:"Refund processed successfully."}),N(!1)}catch(t){x({isOpen:!0,message:t.message})}finally{u(!1)}}},Ue=s=>{se(s),A(""),I(""),N(!0)},le=async(s,t)=>{try{const n=await d(),a=await c(`/admin/tenants/${s}/subscription`,n,{method:"PATCH",body:JSON.stringify({trialDays:t})});if(a.error)throw new Error(a.error);const i=await c("/admin/tenants",n);g(i)}catch(n){x({isOpen:!0,message:n.message})}},Fe=async(s,t)=>{if(t)try{const n=await d(),a=await c(`/admin/tenants/${s}/subscription`,n,{method:"PATCH",body:JSON.stringify({currentPeriodEnd:t})});if(a.error)throw new Error(a.error);const i=await c("/admin/tenants",n);g(i)}catch(n){x({isOpen:!0,message:n.message})}},B=async(s,t,n)=>{try{const a=await d(),i=await c(`/admin/tenants/${s}/quotas`,a,{method:"PATCH",body:JSON.stringify({[t]:n})});if(i.error)throw new Error(i.error);g(m.map(l=>l.id===s?{...l,[t]:n}:l))}catch(a){x({isOpen:!0,message:a.message})}},Me=async s=>{if(confirm("Are you sure you want to WAIVE all current usage for this tenant? This resets counters to 0.")){u(!0);try{const t=await d(),n=await c(`/admin/tenants/${s}/billing/waive`,t,{method:"POST"});if(n.error)throw new Error(n.error);b({isOpen:!0,message:"Usage waived and counters reset to 0."}),g(m.map(a=>a.id===s?{...a,smsUsage:0,emailUsage:0,streamingUsage:0}:a))}catch(t){x({isOpen:!0,message:t.message})}finally{u(!1)}}},k=async(s,t)=>{X(t);try{const n=await d(),a=await fetch(`${Ke}/admin/tenants/${s}/export?type=${t}`,{headers:{Authorization:`Bearer ${n}`}});if(!a.ok)throw new Error("Export failed");const i=await a.blob(),l=window.URL.createObjectURL(i),o=document.createElement("a");o.href=l,o.download=`export_${t}_${s}.csv`,document.body.appendChild(o),o.click(),o.remove()}catch{alert("Export failed")}finally{X(null)}},Ie=(s,t)=>{ve({id:s,enabled:t}),G(!0)},_e=async()=>{if(!y)return;const{id:s,enabled:t}=y;u(!0);try{const n=await d(),a=await c(`/admin/tenants/${s}/lifecycle/grace-period`,n,{method:"POST",body:JSON.stringify({enabled:t})});if(a.error)throw new Error(a.error);g(m.map(i=>i.id===s?{...i,studentAccessDisabled:t}:i)),b({isOpen:!0,message:`Student access ${t?"disabled (Grace Period started)":"re-enabled"}.`}),G(!1)}catch(n){x({isOpen:!0,message:n.message})}finally{u(!1)}},Ge=async s=>{if(prompt(`ARCHIVE TENANT?

This will disable all access and mark the studio as archived.
Data will be retained.`+`

Type 'ARCHIVE' to confirm:`)==="ARCHIVE")try{const n=await d(),a=await c(`/admin/tenants/${s}/lifecycle/archive`,n,{method:"POST"});if(a.error)throw new Error(a.error);g(m.map(i=>i.id===s?{...i,status:"archived",studentAccessDisabled:!0}:i))}catch(n){alert(n.message)}},qe=async s=>{if(confirm("Restore this tenant to active status?"))try{const t=await d(),n=await c(`/admin/tenants/${s}/lifecycle/restore`,t,{method:"POST"});if(n.error)throw new Error(n.error);g(m.map(a=>a.id===s?{...a,status:"active",studentAccessDisabled:!1}:a))}catch(t){alert(t.message)}},Ve=async s=>{if(L===s){H(null);return}H(s),Q(!0);try{const t=await d(),[n,a,i,l]=await Promise.all([c(`/admin/tenants/${s}/features`,t),c(`/admin/tenants/${s}/stats`,t),c(`/admin/tenants/${s}/billing/details`,t).catch(()=>({})),c(`/admin/tenants/${s}/billing/history`,t).catch(()=>({invoices:[]}))]);U(n.features||{}),pe(a||{}),F(o=>({...o,[s]:i})),be(o=>({...o,[s]:l.invoices||[]}))}catch(t){console.error(t)}finally{Q(!1)}},Je=async(s,t,n)=>{U(a=>({...a,[t]:{...a[t],enabled:!n,source:"manual"}}));try{const a=await d();await c(`/admin/tenants/${s}/features`,a,{method:"POST",body:JSON.stringify({featureKey:t,enabled:!n,source:"manual"})})}catch(a){console.error(a),U(i=>({...i,[t]:{...i[t],enabled:n}}))}};return e.jsxs("div",{children:[e.jsx(es,{isOpen:q.isOpen,onClose:()=>x({...q,isOpen:!1}),title:"Error",message:q.message}),e.jsx(ss,{isOpen:$.isOpen,onClose:()=>b({...$,isOpen:!1}),onConfirm:()=>b({...$,isOpen:!1}),title:"Success",message:$.message,confirmText:"Done",cancelText:"Close"}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Tenant Management"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("select",{className:"text-sm border border-zinc-300 rounded-md px-2 py-1 bg-white outline-none focus:ring-2 focus:ring-blue-500",value:V,onChange:s=>ze(s.target.value),children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"suspended",children:"Suspended"})]}),e.jsxs("select",{className:"text-sm border border-zinc-300 rounded-md px-2 py-1 bg-white outline-none focus:ring-2 focus:ring-blue-500",value:J,onChange:s=>we(s.target.value),children:[e.jsx("option",{value:"all",children:"All Tiers"}),e.jsx("option",{value:"basic",children:"Launch"}),e.jsx("option",{value:"growth",children:"Growth"}),e.jsx("option",{value:"scale",children:"Scale"})]}),e.jsx("div",{className:"h-6 w-px bg-zinc-300 mx-2"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:Ae,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 ${S?"bg-indigo-600":"bg-zinc-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${S?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:"text-sm text-zinc-600 font-medium",children:S?"Financials Visible":"Privacy Mode"})]})]})]}),e.jsxs("button",{onClick:()=>P(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 font-medium text-sm flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"+"})," Spin Up Tenant"]})]}),e.jsxs("div",{className:"bg-white border border-zinc-200 rounded-lg overflow-hidden shadow-sm",children:[m?.error&&e.jsxs("div",{className:"p-4 bg-red-50 text-red-700 border-b border-red-100 mb-4",children:[e.jsxs("div",{className:"font-bold",children:["Access Denied: ",m.error]}),m.debug&&e.jsx("pre",{className:"mt-2 text-xs bg-red-100 p-2 rounded overflow-auto",children:JSON.stringify(m.debug,null,2)}),e.jsx("p",{className:"text-xs mt-2",children:"Try refreshing to re-trigger admin bootstrapping."})]}),e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-zinc-50 border-b border-zinc-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-8"}),e.jsxs("th",{className:"px-6 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider cursor-pointer hover:bg-zinc-100",onClick:()=>C("name"),children:["Tenant ",f==="name"&&(j==="asc"?"↑":"↓")]}),e.jsxs("th",{className:"px-6 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider cursor-pointer hover:bg-zinc-100",onClick:()=>C("tier"),children:["Tier ",f==="tier"&&(j==="asc"?"↑":"↓")]}),e.jsxs("th",{className:"px-6 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider text-center cursor-pointer hover:bg-zinc-100",onClick:()=>C("stats.owners"),children:["People ",f==="stats.owners"&&(j==="asc"?"↑":"↓")]}),e.jsxs("th",{className:"px-6 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider text-center cursor-pointer hover:bg-zinc-100",onClick:()=>C("storageUsage"),children:["Usage ",f==="storageUsage"&&(j==="asc"?"↑":"↓")]}),e.jsxs("th",{className:"px-6 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider cursor-pointer hover:bg-zinc-100",onClick:()=>C("status"),children:["Status ",f==="status"&&(j==="asc"?"↑":"↓")]}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-100",children:Te().map(s=>e.jsxs(r.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-zinc-50 transition-colors cursor-pointer",onClick:()=>Ve(s.id),children:[e.jsx("td",{className:"pl-4",children:L===s.id?e.jsx(ns,{size:16,className:"text-zinc-400"}):e.jsx(as,{size:16,className:"text-zinc-400"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-medium text-zinc-900",children:s.name}),e.jsx("div",{className:"text-zinc-500 text-xs font-mono mt-0.5 bg-zinc-100 inline-block px-1 rounded",children:s.slug})]}),e.jsx("td",{className:"px-6 py-4",onClick:t=>t.stopPropagation(),children:e.jsx("div",{className:"relative",children:e.jsxs("select",{value:s.tier||"basic",onChange:t=>De(s.id,t.target.value),className:`appearance-none cursor-pointer inline-flex items-center pl-2 pr-6 py-0.5 rounded text-xs font-medium uppercase tracking-wide border outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 ${s.tier==="scale"?"bg-purple-100 text-purple-800 border-purple-200":s.tier==="growth"?"bg-blue-100 text-blue-800 border-blue-200":"bg-zinc-100 text-zinc-600 border-zinc-200"}`,children:[e.jsx("option",{value:"basic",children:"Launch"}),e.jsx("option",{value:"growth",children:"Growth"}),e.jsx("option",{value:"scale",children:"Scale"})]})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("div",{className:"flex flex-col items-center",title:"Owners",children:[e.jsx("span",{className:"text-[10px] text-zinc-400 font-bold uppercase tracking-tighter",children:"Own"}),e.jsx("span",{className:"text-sm font-bold text-zinc-700",children:s.stats?.owners||0})]}),e.jsxs("div",{className:"flex flex-col items-center",title:"Instructors",children:[e.jsx("span",{className:"text-[10px] text-zinc-400 font-bold uppercase tracking-tighter",children:"Inst"}),e.jsx("span",{className:"text-sm font-bold text-zinc-700",children:s.stats?.instructors||0})]}),e.jsxs("div",{className:"flex flex-col items-center",title:"Subscribers",children:[e.jsx("span",{className:"text-[10px] text-zinc-400 font-bold uppercase tracking-tighter",children:"Subs"}),e.jsx(ts,{revealed:S,placeholder:"***",children:e.jsx("span",{className:"text-sm font-bold text-blue-600",children:s.stats?.subscribers||0})})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("div",{className:"flex flex-col items-center",title:"Storage GB",children:[e.jsx("span",{className:"text-[10px] text-zinc-400 font-bold uppercase tracking-tighter",children:"Storage"}),e.jsxs("span",{className:"text-xs font-bold text-zinc-700",children:[(s.storageUsage/(1024*1024*1024)).toFixed(1),"G"]})]}),e.jsxs("div",{className:"flex flex-col items-center",title:"VOD Minutes",children:[e.jsx("span",{className:"text-[10px] text-zinc-400 font-bold uppercase tracking-tighter",children:"VOD"}),e.jsxs("span",{className:"text-xs font-bold text-zinc-700",children:[s.streamingUsage||0,"m"]})]}),e.jsxs("div",{className:"flex flex-col items-center",title:"Emails",children:[e.jsx("span",{className:"text-[10px] text-zinc-400 font-bold uppercase tracking-tighter",children:"Email"}),e.jsx("span",{className:"text-xs font-bold text-zinc-700",children:s.emailUsage||0})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${s.status==="suspended"?"bg-red-100 text-red-800":s.status==="paused"?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"}`,children:s.status||"Active"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xe,{to:`/studio/${s.slug}`,className:"text-blue-600 hover:text-blue-800 text-xs font-semibold uppercase tracking-wide border border-blue-200 bg-blue-50 px-3 py-1 rounded-full hover:bg-blue-100 transition-colors",onClick:t=>t.stopPropagation(),children:"Enter"}),e.jsx("div",{className:"h-4 w-px bg-zinc-200"}),s.status==="paused"?e.jsx("button",{className:"text-emerald-600 hover:text-emerald-700 text-xs font-medium transition-colors",onClick:t=>{t.stopPropagation(),R(s.id,"active")},children:"Resume"}):e.jsx("button",{className:"text-zinc-500 hover:text-amber-600 text-xs font-medium transition-colors",onClick:t=>{t.stopPropagation(),R(s.id,"paused")},children:"Pause"}),s.status==="suspended"?e.jsx("button",{className:"text-emerald-600 hover:text-emerald-700 text-xs font-medium transition-colors",onClick:t=>{t.stopPropagation(),R(s.id,"active")},children:"Activate"}):e.jsx("button",{className:"text-zinc-500 hover:text-red-600 text-xs font-medium transition-colors",onClick:t=>{t.stopPropagation(),R(s.id,"suspended")},children:"Suspend"})]})})]}),L===s.id&&e.jsx("tr",{className:"bg-zinc-50/50",children:e.jsx("td",{colSpan:7,className:"px-6 pb-6 pt-2",children:e.jsxs("div",{className:"bg-white border border-zinc-200 rounded-lg p-6 shadow-inner space-y-6",children:[e.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 rounded-lg p-4 flex flex-col md:flex-row gap-6 justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase text-zinc-500 font-bold mb-1",children:"Subscription Information"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize ${s.subscriptionStatus==="active"?"bg-green-100 text-green-800":s.subscriptionStatus==="past_due"?"bg-orange-100 text-orange-800":s.subscriptionStatus==="canceled"?"bg-red-100 text-red-800":"bg-zinc-200 text-zinc-800"}`,children:s.subscriptionStatus==="past_due"?"Past Due":s.subscriptionStatus||"trialing"}),e.jsxs("select",{className:"text-xs bg-white border border-zinc-300 rounded px-2 py-1 outline-none focus:border-blue-500",value:W[s.id]?.interval||"monthly",onChange:t=>Ee(s.id,t.target.value),children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"annual",children:"Annual"})]})]}),W[s.id]?.cancelAtPeriodEnd&&e.jsx("div",{className:"text-[10px] text-red-600 font-medium mt-1",children:"Cancels at end of period"})]}),e.jsx("div",{className:"h-8 w-px bg-zinc-200 hidden md:block"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase text-zinc-500 font-bold mb-1",children:"Period Ends"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",className:"text-xs border border-zinc-300 rounded px-2 py-1 bg-white hover:border-zinc-400 transition-colors",defaultValue:s.currentPeriodEnd?new Date(s.currentPeriodEnd).toISOString().split("T")[0]:"",onBlur:t=>{t.target.value&&window.confirm(`Update renewal date to ${t.target.value}?`)&&Fe(s.id,t.target.value)}}),e.jsxs("div",{className:"flex text-[10px] gap-1",children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),le(s.id,30)},className:"px-1.5 py-0.5 bg-blue-50 text-blue-600 rounded hover:bg-blue-100",children:"+30d"}),e.jsx("button",{onClick:t=>{t.stopPropagation(),le(s.id,9999)},className:"px-1.5 py-0.5 bg-zinc-100 text-zinc-600 rounded hover:bg-zinc-200",children:"∞"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),Re(s.id)},className:"text-[10px] text-red-600 hover:underline",children:"Cancel Subs"}),e.jsx("button",{onClick:t=>{t.stopPropagation(),Ue(s.id)},className:"text-[10px] text-zinc-500 hover:text-zinc-800 hover:underline",children:"Refund"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6 border-l border-zinc-200 pl-6 border-l-0 md:border-l",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase text-zinc-400 font-bold block mb-1",children:"SMS Limit"}),e.jsx("input",{type:"number",className:`w-20 text-xs border rounded px-2 py-1 ${s.billingExempt?"bg-zinc-100 text-zinc-400":""}`,defaultValue:s.smsLimit||0,onBlur:t=>B(s.id,"smsLimit",parseInt(t.target.value))}),e.jsx("div",{className:"mt-2 w-full",children:s.billingExempt?e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"text-[10px] uppercase font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"Unlimited"})}):e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-zinc-500",children:[e.jsxs("span",{children:[s.smsUsage||0," sent"]}),e.jsxs("span",{children:[Math.round((s.smsUsage||0)/(s.smsLimit||1)*100),"%"]})]}),e.jsx("div",{className:"h-1.5 w-24 bg-zinc-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${(s.smsUsage||0)>=(s.smsLimit||0)?"bg-red-500":(s.smsUsage||0)/(s.smsLimit||1)>.8?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${Math.min(100,(s.smsUsage||0)/(s.smsLimit||1)*100)}%`}})}),e.jsxs("div",{className:"text-[10px] text-zinc-400 text-right",children:[s.smsLimit||0," limit"]})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase text-zinc-400 font-bold block mb-1",children:"Email Limit"}),e.jsx("input",{type:"number",className:`w-20 text-xs border rounded px-2 py-1 ${s.billingExempt?"bg-zinc-100 text-zinc-400":""}`,defaultValue:s.emailLimit||0,onBlur:t=>B(s.id,"emailLimit",parseInt(t.target.value))}),e.jsx("div",{className:"mt-2 w-full",children:s.billingExempt?e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"text-[10px] uppercase font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"Unlimited"})}):e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-zinc-500",children:[e.jsxs("span",{children:[s.emailUsage||0," sent"]}),e.jsxs("span",{children:[Math.round((s.emailUsage||0)/(s.emailLimit||1)*100),"%"]})]}),e.jsx("div",{className:"h-1.5 w-24 bg-zinc-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${(s.emailUsage||0)>=(s.emailLimit||0)?"bg-red-500":(s.emailUsage||0)/(s.emailLimit||1)>.8?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${Math.min(100,(s.emailUsage||0)/(s.emailLimit||1)*100)}%`}})}),e.jsxs("div",{className:"text-[10px] text-zinc-400 text-right",children:[s.emailLimit||0," limit"]})]})})]}),e.jsxs("div",{className:"flex flex-col gap-1 pt-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`exempt-${s.id}`,className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",defaultChecked:!!s.billingExempt,onChange:t=>B(s.id,"billingExempt",t.target.checked)}),e.jsx("label",{className:"text-xs text-zinc-700 cursor-pointer select-none font-medium",htmlFor:`exempt-${s.id}`,children:"Billing Exempt"})]}),s.billingExempt&&e.jsx("span",{className:"text-[10px] text-zinc-400 pl-5",children:"Limits ignored"}),!s.billingExempt&&e.jsx("button",{onClick:t=>{t.stopPropagation(),Me(s.id)},className:"mt-2 text-[10px] text-zinc-400 hover:text-blue-600 hover:underline text-left pl-5",children:"Waive Usage (Reset)"})]})]})]}),e.jsxs("div",{className:"bg-white border border-zinc-200 rounded-lg p-4 mt-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-[10px] uppercase text-zinc-500 font-bold",children:"Lifecycle & Data"}),e.jsx("div",{className:"flex gap-2",children:s.status==="archived"?e.jsx("button",{onClick:t=>{t.stopPropagation(),qe(s.id)},className:"text-xs bg-emerald-100 text-emerald-800 px-2 py-1 rounded hover:bg-emerald-200",children:"Restore Tenant"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),Ie(s.id,!s.studentAccessDisabled)},className:`text-xs px-3 py-1.5 rounded-md border font-medium transition-colors ${s.studentAccessDisabled?"bg-amber-100 border-amber-200 text-amber-800 hover:bg-amber-200":"bg-white border-zinc-300 text-zinc-700 hover:bg-zinc-50"}`,children:s.studentAccessDisabled?"Enable Student Access":"Start Grace Period"}),e.jsx("button",{onClick:t=>{t.stopPropagation(),Ge(s.id)},className:"text-xs bg-red-50 text-red-600 border border-red-100 px-2 py-1 rounded hover:bg-red-100",children:"Archive"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),k(s.id,"subscribers")},disabled:!!z,className:"text-left bg-zinc-50 border border-zinc-200 rounded p-2 hover:bg-zinc-100 disabled:opacity-50 group transition-all",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx("span",{className:"bg-white p-0.5 rounded border border-zinc-200 text-zinc-500 group-hover:text-blue-600 text-[10px]",children:"⬇"}),e.jsx("span",{className:"text-xs font-bold text-zinc-700",children:"Subscribers"})]}),e.jsx("div",{className:"text-[10px] text-zinc-500 truncate",children:"CSV of all members"})]}),e.jsxs("button",{onClick:t=>{t.stopPropagation(),k(s.id,"financials")},disabled:!!z,className:"text-left bg-zinc-50 border border-zinc-200 rounded p-2 hover:bg-zinc-100 disabled:opacity-50 group transition-all",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx("span",{className:"bg-white p-0.5 rounded border border-zinc-200 text-zinc-500 group-hover:text-green-600 text-[10px]",children:"⬇"}),e.jsx("span",{className:"text-xs font-bold text-zinc-700",children:"Financials"})]}),e.jsx("div",{className:"text-[10px] text-zinc-500 truncate",children:"Transactions & Subs"})]}),e.jsxs("button",{onClick:t=>{t.stopPropagation(),k(s.id,"products")},disabled:!!z,className:"text-left bg-zinc-50 border border-zinc-200 rounded p-2 hover:bg-zinc-100 disabled:opacity-50 group transition-all",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx("span",{className:"bg-white p-0.5 rounded border border-zinc-200 text-zinc-500 group-hover:text-purple-600 text-[10px]",children:"⬇"}),e.jsx("span",{className:"text-xs font-bold text-zinc-700",children:"Products"})]}),e.jsx("div",{className:"text-[10px] text-zinc-500 truncate",children:"Plans & Prices"})]}),e.jsxs("button",{onClick:t=>{t.stopPropagation(),k(s.id,"classes")},disabled:!!z,className:"text-left bg-zinc-50 border border-zinc-200 rounded p-2 hover:bg-zinc-100 disabled:opacity-50 group transition-all",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx("span",{className:"bg-white p-0.5 rounded border border-zinc-200 text-zinc-500 group-hover:text-amber-600 text-[10px]",children:"⬇"}),e.jsx("span",{className:"text-xs font-bold text-zinc-700",children:"Classes"})]}),e.jsx("div",{className:"text-[10px] text-zinc-500 truncate",children:"Schedule & Attendance"})]}),e.jsxs("button",{onClick:t=>{t.stopPropagation(),k(s.id,"vod")},disabled:!!z,className:"text-left bg-zinc-50 border border-zinc-200 rounded p-2 hover:bg-zinc-100 disabled:opacity-50 group transition-all",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx("span",{className:"bg-white p-0.5 rounded border border-zinc-200 text-zinc-500 group-hover:text-red-500 text-[10px]",children:"⬇"}),e.jsx("span",{className:"text-xs font-bold text-zinc-700",children:"VOD Usage"})]}),e.jsx("div",{className:"text-[10px] text-zinc-500 truncate",children:"Storage & Streaming"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-3",children:"Recent Payments"}),e.jsx("div",{className:"bg-white border border-zinc-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-left text-xs",children:[e.jsx("thead",{className:"bg-zinc-50 border-b border-zinc-200 text-zinc-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 font-medium",children:"Date"}),e.jsx("th",{className:"px-4 py-2 font-medium",children:"Amount"}),e.jsx("th",{className:"px-4 py-2 font-medium",children:"Status"}),e.jsx("th",{className:"px-4 py-2 font-medium text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-100",children:Y[s.id]?.length?Y[s.id].map(t=>e.jsxs("tr",{className:"hover:bg-zinc-50",children:[e.jsx("td",{className:"px-4 py-2 text-zinc-600",children:new Date(t.date).toLocaleDateString()}),e.jsxs("td",{className:"px-4 py-2 font-medium text-zinc-900",children:["$",(t.amount/100).toFixed(2)]}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded text-[10px] font-medium capitalize ${t.status==="paid"?"bg-emerald-100 text-emerald-800":t.status==="open"?"bg-blue-100 text-blue-800":"bg-zinc-100 text-zinc-600"}`,children:t.status})}),e.jsxs("td",{className:"px-4 py-2 text-right flex justify-end gap-3",children:[t.hostedUrl&&e.jsx("a",{href:t.hostedUrl,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline",children:"Invoice"}),t.paymentIntentId&&t.amount>0&&t.status==="paid"&&e.jsx("button",{onClick:()=>{se(s.id),I(t.paymentIntentId),A(""),N(!0)},className:"text-zinc-500 hover:text-red-600",children:"Refund"})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-4 text-center text-zinc-400 italic",children:"No payment history available"})})})]})})]}),he?e.jsx("div",{className:"text-sm text-zinc-500 py-2",children:"Loading capabilities..."}):e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ne.map(t=>{const n=ue[t.key]||{enabled:!1,source:"manual"},a=`feature_${t.key}`,i=me?.find(o=>o.key===a),l=!i||!i.enabled;return e.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-md ${l?"bg-zinc-100 opacity-60":"bg-zinc-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t.icon,{size:18,className:l?"text-zinc-400":"text-zinc-500"}),e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${l?"text-zinc-500":"text-zinc-900"}`,children:t.label}),e.jsx("div",{className:"text-xs text-zinc-500",children:l?"Disabled by Platform":`Source: ${n.source}`})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.key==="zoom"&&n.enabled&&!l&&e.jsx("button",{onClick:o=>{o.stopPropagation(),Pe(s.id)},className:"p-1 text-zinc-500 hover:text-blue-600 hover:bg-zinc-200 rounded",title:"Configure Zoom Credentials",children:e.jsx(us,{size:16})}),e.jsx("button",{onClick:o=>{o.stopPropagation(),!l&&Je(s.id,t.key,n.enabled)},disabled:l,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 ${l?"bg-zinc-300 cursor-not-allowed":n.enabled?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n.enabled?"translate-x-6":"translate-x-1"}`})})]})]},t.key)})})})]})})})]},s.id))})]}),(!Array.isArray(m)||m.length===0)&&e.jsx("div",{className:"p-8 text-center text-zinc-500",children:"No tenants found. Create one to get started."})]}),e.jsxs(Z,{isOpen:Ce,onClose:()=>D(!1),title:"Configure Zoom Integration",children:[e.jsx("div",{className:"mb-4 text-sm text-zinc-500",children:"Provide the Server-to-Server OAuth credentials from the Zoom App Marketplace. This allows the platform to create meetings on behalf of this tenant."}),e.jsxs("form",{onSubmit:Oe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Account ID"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-zinc-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none",value:v.accountId,onChange:s=>E({...v,accountId:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Client ID"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-zinc-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none",value:v.clientId,onChange:s=>E({...v,clientId:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Client Secret"}),e.jsx("input",{type:"password",required:!0,className:"w-full px-3 py-2 border border-zinc-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none",value:v.clientSecret,onChange:s=>E({...v,clientSecret:s.target.value})})]}),e.jsxs("div",{className:"pt-4 flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>D(!1),className:"flex-1 px-4 py-2 border border-zinc-300 text-zinc-700 rounded-md hover:bg-zinc-50 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium disabled:opacity-50",children:p?"Saving...":"Save Credentials"})]})]})]}),e.jsxs(Z,{isOpen:K,onClose:()=>N(!1),title:"Issue Refund",children:[e.jsx("div",{className:"mb-4 text-sm text-zinc-500",children:"Refund a payment for this tenant. You need the Stripe Payment Intent ID (from Stripe Dashboard)."}),e.jsxs("form",{onSubmit:re,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Payment Intent ID"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-zinc-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"pi_...",value:ne,onChange:s=>I(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Amount (Optional - leave empty for full)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-zinc-500",children:"$"}),e.jsx("input",{type:"number",step:"0.01",className:"w-full pl-8 pr-3 py-2 border border-zinc-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"0.00",value:O,onChange:s=>A(s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Reason"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-zinc-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none",value:M,onChange:s=>te(s.target.value),children:[e.jsx("option",{value:"requested_by_customer",children:"Requested by Customer"}),e.jsx("option",{value:"duplicate",children:"Duplicate"}),e.jsx("option",{value:"fraudulent",children:"Fraudulent"})]})]}),e.jsxs("div",{className:"pt-4 flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"flex-1 px-4 py-2 border border-zinc-300 text-zinc-700 rounded-md hover:bg-zinc-50 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 font-medium disabled:opacity-50",children:p?"Processing...":"Issue Refund"})]})]})]}),e.jsxs(Z,{isOpen:xe,onClose:()=>P(!1),title:"Spin Up New Tenant",children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-zinc-500 text-sm",children:"Automated provisioning: This will create a database record, set up initial owner permissions, and allocate resources."})}),e.jsxs("form",{onSubmit:$e,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Studio Name"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-zinc-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. Zen Garden Yoga",value:h.name,onChange:s=>{const t=s.target.value;w(n=>{const a=o=>o.toLowerCase().replace(/[^a-z0-9]/g,"-"),i=a(n.name),l=!n.slug||n.slug===i;return{...n,name:t,slug:l?a(t):n.slug}})}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"URL Slug"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-zinc-300 bg-zinc-50 text-zinc-500 text-sm",children:"/studio/"}),e.jsx("input",{type:"text",required:!0,className:"flex-1 px-3 py-2 border border-zinc-300 rounded-r-md focus:ring-2 focus:ring-blue-500 outline-none font-mono text-sm",placeholder:"zen-garden",value:h.slug,onChange:s=>w({...h,slug:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Plan Tier"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-zinc-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none bg-white",value:h.plan,onChange:s=>w({...h,plan:s.target.value}),children:[e.jsx("option",{value:"basic",children:"Launch (Basic)"}),e.jsx("option",{value:"growth",children:"Growth"}),e.jsx("option",{value:"scale",children:"Scale"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Trial Period (Days)"}),e.jsx("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-zinc-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"14",value:h.trialDays||"",onChange:s=>w({...h,trialDays:parseInt(s.target.value)})}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Leave empty for no trial"})]})]}),e.jsx("p",{className:"text-xs text-zinc-500",children:"This studio will be created under your admin account with billing bypassed."}),e.jsxs("div",{className:"pt-4 flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>P(!1),className:"flex-1 px-4 py-2 border border-zinc-300 text-zinc-700 rounded-md hover:bg-zinc-50 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium disabled:opacity-50",children:p?"Provisioning...":"Launch Studio"})]})]})]}),K&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full shadow-xl",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Process Refund"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-700 mb-1",children:"Amount (Leave empty for full refund)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-zinc-500",children:"$"}),e.jsx("input",{type:"number",step:"0.01",className:"w-full pl-6 border border-zinc-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"0.00",value:O,onChange:s=>A(s.target.value)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-700 mb-1",children:"Reason"}),e.jsxs("select",{className:"w-full border border-zinc-300 rounded px-3 py-2 text-sm",value:M,onChange:s=>te(s.target.value),children:[e.jsx("option",{value:"requested_by_customer",children:"Requested by Customer"}),e.jsx("option",{value:"duplicate",children:"Duplicate"}),e.jsx("option",{value:"fraudulent",children:"Fraudulent"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 text-sm text-zinc-600 hover:bg-zinc-100 rounded",children:"Cancel"}),e.jsx("button",{onClick:re,disabled:p,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:p?"Processing...":"Confirm Refund"})]})]})}),ge&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full shadow-xl border border-red-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-red-600",children:[e.jsx(ps,{className:"h-6 w-6"}),e.jsx("h3",{className:"text-lg font-bold",children:"Cancel Subscription?"})]}),e.jsx("p",{className:"text-sm text-zinc-600 mb-6",children:"Are you sure you want to cancel the subscription for this tenant? This action will disable billing at the end of the current period."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 text-sm text-zinc-600 hover:bg-zinc-100 rounded",children:"No, Keep It"}),e.jsx("button",{onClick:Le,disabled:p,className:"px-4 py-2 text-sm bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 font-medium",children:p?"Cancelling...":"Yes, Cancel Subscription"})]})]})}),je&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl border border-amber-100",children:[e.jsxs("div",{className:"flex items-center gap-3 text-amber-600 mb-4 bg-amber-50 p-3 rounded-lg",children:[e.jsx(bs,{className:"h-6 w-6"}),e.jsx("span",{className:"font-bold",children:y?.enabled?"Start Grace Period":"End Grace Period"})]}),y?.enabled?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-zinc-600 text-sm mb-4",children:["Enabling ",e.jsx("strong",{children:"Grace Period"})," will disable access to the Student Portal and Mobile App immediately."]}),e.jsxs("p",{className:"text-zinc-600 text-sm mb-6",children:["- Admins will retain access.",e.jsx("br",{}),"- Public schedules will be hidden.",e.jsx("br",{}),'- Tenant status remains "Active" for billing purposes unless changed.']})]}):e.jsx("p",{className:"text-zinc-600 text-sm mb-6",children:"Re-enabling access will restore Student Portal and Mobile App functionality immediately."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 text-sm text-zinc-600 hover:bg-zinc-100 rounded",children:"Cancel"}),e.jsx("button",{onClick:_e,disabled:p,className:`px-4 py-2 text-sm font-medium text-white rounded-md disabled:opacity-50 ${y?.enabled?"bg-amber-600 hover:bg-amber-700":"bg-green-600 hover:bg-green-700"}`,children:p?"Processing...":y?.enabled?"Disable Access":"Restore Access"})]})]})})]})});export{Vs as default};
