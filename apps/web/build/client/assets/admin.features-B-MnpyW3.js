import{w as j,c as k,r as c}from"./chunk-EPOLDU6W-Bmjd2nDt.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{a as N}from"./api-LAgipKeK.js";import{S as w}from"./smartphone-CnbABlpY.js";import{G as E}from"./globe-CpnZY87A.js";import{M as m}from"./mail-CRJFo2YB.js";import{M as S}from"./messages-square-Drfmyvgv.js";import{C as p}from"./credit-card-BNZofwev.js";import{V as u}from"./video-CuPLt0PQ.js";import{M}from"./message-square-Bse2vxgU.js";import{S as v}from"./save-BdTRlHdj.js";import{u as _}from"./chunk-OT5FTIRN-DzsNM_wn.js";import"./createLucideIcon-C8A4MfPF.js";import"./index-D46eEimh.js";import"./index-DkbWjt3e.js";const b=[{key:"feature_mobile_app",label:"White-Label Mobile App",description:"Enable Mobile App settings and promotion across all studios. Keep disabled until apps are approved.",icon:w},{key:"feature_website_builder",label:"Website Builder",description:"Enable drag-and-drop website creation for tenants using Puck editor.",icon:E},{key:"feature_email_marketing",label:"Email Marketing",description:"Enable rich visual email editor and campaign management.",icon:m},{key:"feature_chat",label:"Chat System",description:"Enable real-time chat for support and community using Durable Objects.",icon:S},{key:"feature_financials",label:"Financials & Payouts",description:"Global master switch for Financial reporting and Stripe payouts.",icon:p},{key:"feature_vod",label:"Video on Demand (VOD)",description:"Global master switch for VOD functionality.",icon:u},{key:"feature_zoom",label:"Zoom Integration",description:"Enable Zoom meeting creation and sync.",icon:u},{key:"feature_pos",label:"POS & Retail",description:"Enable Point of Sale and Product management.",icon:p},{key:"feature_sms",label:"SMS Messaging",description:"Enable Twilio SMS features and quotas.",icon:M},{key:"feature_marketing",label:"Marketing & CRM",description:"Enable Email Marketing and CRM tools.",icon:m},{key:"feature_payroll",label:"Payroll & Compensation",description:"Enable Instructor Payroll and Commission tracking.",icon:v}],W=j(function(){const{configs:o,error:r}=k(),[f,l]=c.useState(o||[]),{getToken:g}=_(),[x,d]=c.useState(null),h=i=>f.find(a=>a.key===i)||{enabled:!1},y=async(i,a)=>{d(i),l(t=>t.find(n=>n.key===i)?t.map(n=>n.key===i?{...n,enabled:!a}:n):[...t,{key:i,enabled:!a}]);try{const t=await g();await N(`/admin/platform/config/${i}`,t,{method:"PUT",body:JSON.stringify({enabled:!a,description:b.find(s=>s.key===i)?.description})})}catch(t){console.error(t),alert("Failed to update feature flag"),l(o)}finally{d(null)}};return r?e.jsxs("div",{className:"p-8 text-red-600",children:["Error loading config: ",r]}):e.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-zinc-900",children:"Platform Features"}),e.jsx("p",{className:"text-zinc-500 mt-2",children:"Manage global feature flags. Disabling a feature here hides it from all tenants."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:b.map(i=>{const a=h(i.key),t=a.enabled,s=i.icon;return e.jsx("div",{className:"bg-white rounded-lg border border-zinc-200 p-3 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-md flex-shrink-0 ${t?"bg-blue-50 text-blue-600":"bg-zinc-100 text-zinc-400"}`,children:e.jsx(s,{size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-zinc-900 leading-tight",children:i.label}),e.jsx("button",{onClick:()=>y(i.key,t),disabled:x===i.key,className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-1 ${t?"bg-blue-600":"bg-zinc-200"}`,children:e.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${t?"translate-x-4":"translate-x-0"}`})})]}),e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5 line-clamp-2",children:i.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[e.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium ${t?"bg-green-100 text-green-800":"bg-zinc-100 text-zinc-600"}`,children:t?"Enabled":"Disabled (Hidden)"}),a.updatedAt&&e.jsxs("span",{className:"text-[10px] text-zinc-400",children:["Updated ",new Date(a.updatedAt).toLocaleDateString()]})]})]})]})},i.key)})}),e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-100 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How this works"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Enabled:"})," Feature is visible to tenants (subject to their subscription tier)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Disabled:"})," Feature is completely hidden from the entire platform. Useful for testing or incomplete features (e.g. Mobile App)."]})]})]})]})});export{W as default};
