import{p as x,q as u,j as e,y as d}from"./vendor-react-D59Q0YKK.js";import{a as h}from"./api-D1U4i9fn.js";import"./vendor-puck-RN2Ey-av.js";import"./vendor-charts-Dp-zC2wb.js";const c={basic:{name:"Basic",students:50,storage:1,price:"Free"},growth:{name:"Growth",students:500,storage:50,price:"$49/mo"},scale:{name:"Scale",students:"Unlimited",storage:1e3,price:"$199/mo"}},N=x(function(){const{tenant:l,usage:s,slug:m,token:o}=u(),i=c[l.features?.includes("white_label")?"scale":l.tier||"basic"]||c.basic,a=async()=>{try{const t=await h("/tenant/portal",o,{method:"POST",body:JSON.stringify({returnUrl:window.location.href}),headers:{"X-Tenant-Slug":m}});t.url?window.location.href=t.url:alert("Could not load billing portal. Please contact support.")}catch(t){console.error(t),alert("Failed to redirect to billing portal.")}},n=(t,r)=>r==="Unlimited"?0:Math.min(100,t/r*100);return e.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Billing & Subscription"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"md:col-span-2 bg-white border border-zinc-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-zinc-500 uppercase font-semibold tracking-wide",children:"Current Plan"}),e.jsx("h2",{className:"text-3xl font-bold text-zinc-900 mt-1",children:i.name}),e.jsx("p",{className:"text-zinc-500",children:i.price})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${l.subscriptionStatus==="active"?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"}`,children:l.subscriptionStatus||"Active"})]}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"font-medium text-zinc-700",children:"Students"}),e.jsxs("span",{className:"text-zinc-500",children:[s.students," / ",i.students]})]}),e.jsx("div",{className:"h-2 bg-zinc-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 rounded-full",style:{width:`${n(s.students,i.students)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"font-medium text-zinc-700",children:"Storage (GB)"}),e.jsxs("span",{className:"text-zinc-500",children:[s.storageGB.toFixed(1)," / ",i.storage," GB"]})]}),e.jsx("div",{className:"h-2 bg-zinc-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-600 rounded-full",style:{width:`${n(s.storageGB,i.storage)}%`}})})]}),(s.streamingLimit===-1||s.streamingLimit>0)&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"font-medium text-zinc-700",children:"VOD Minutes (Stored)"}),e.jsxs("span",{className:"text-zinc-500",children:[s.streamingUsage||0," / ",s.streamingLimit===-1?"Unlimited":s.streamingLimit]})]}),e.jsx("div",{className:"h-2 bg-zinc-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${s.streamingLimit!==-1&&s.streamingUsage>s.streamingLimit?"bg-red-500":"bg-pink-500"}`,style:{width:`${n(s.streamingUsage,s.streamingLimit)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"font-medium text-zinc-700",children:"Emails Sent (Monthly)"}),e.jsxs("span",{className:"text-zinc-500",children:[s.emailUsage||0," / ",s.emailLimit===-1?"Unlimited":s.emailLimit]})]}),e.jsx("div",{className:"h-2 bg-zinc-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${s.emailLimit!==-1&&s.emailUsage>s.emailLimit?"bg-red-500":"bg-indigo-500"}`,style:{width:`${n(s.emailUsage,s.emailLimit)}%`}})})]}),(s.smsLimit===-1||s.smsLimit>0)&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"font-medium text-zinc-700",children:"SMS Sent (Monthly)"}),e.jsxs("span",{className:"text-zinc-500",children:[s.smsUsage||0," / ",s.smsLimit===-1?"Unlimited":s.smsLimit]})]}),e.jsx("div",{className:"h-2 bg-zinc-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${s.smsLimit!==-1&&s.smsUsage>s.smsLimit?"bg-red-500":"bg-blue-500"}`,style:{width:`${n(s.smsUsage,s.smsLimit)}%`}})})]})]})]}),e.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-zinc-900 mb-4",children:"Manage Subscription"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:a,className:"w-full py-2 bg-white border border-zinc-300 text-zinc-700 rounded-lg hover:bg-zinc-50 font-medium text-sm transition-colors cursor-pointer",children:"Update Payment Method"}),e.jsx("button",{onClick:a,className:"w-full py-2 bg-white border border-zinc-300 text-zinc-700 rounded-lg hover:bg-zinc-50 font-medium text-sm transition-colors cursor-pointer",children:"View Invoices"}),e.jsx("div",{className:"pt-4 border-t border-zinc-200",children:e.jsx("button",{onClick:a,className:"w-full py-2 bg-zinc-900 text-white rounded-lg hover:bg-zinc-800 font-medium text-sm transition-colors cursor-pointer",children:"Upgrade Plan"})})]})]})]}),e.jsxs("div",{className:"bg-white border border-zinc-200 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-zinc-200 bg-zinc-50",children:e.jsx("h3",{className:"font-semibold text-zinc-900",children:"Plan Features"})}),e.jsxs("div",{className:"p-6 grid gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"text-green-600",size:18}),e.jsxs("span",{className:"text-zinc-700",children:["Zoom Integration: ",e.jsx("span",{className:"font-medium",children:i.name==="Basic"?"Not Included":"Included"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"text-green-600",size:18}),e.jsxs("span",{className:"text-zinc-700",children:["Locations: ",e.jsx("span",{className:"font-medium",children:i.name==="Basic"?"1":i.name==="Growth"?"3":"Unlimited"})]})]})]})]})]})});export{N as default};
