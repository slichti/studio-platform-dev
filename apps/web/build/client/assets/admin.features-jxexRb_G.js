import{w as k,u as y}from"./chunk-JMJ3UQ3L-DsmOvVYk.js";import{j as e}from"./vendor-puck-Ox9nZAW8.js";import{a as j}from"./api-OnQO3erh.js";import{a as c}from"./vendor-sentry-JepEA2vj.js";import{t as z}from"./index-Cb5OqxoU.js";import{S as N}from"./smartphone-Vpdbd-ww.js";import{G as w}from"./globe-B4XmurjP.js";import{M as S}from"./messages-square-1feWufr4.js";import{C as m}from"./credit-card-DxGxPhTX.js";import{V as b}from"./video-D71_KYqj.js";import{M as E}from"./message-square-w1u1RI-5.js";import{M}from"./mail-BspoxSMS.js";import{S as v}from"./save-DQQgas6i.js";import{u as _}from"./chunk-OT5FTIRN-b3porSVB.js";import"./createLucideIcon-CZ3UnH4h.js";import"./index-tijl61gk.js";import"./vendor-charts-CBCVHb7z.js";const u=[{key:"feature_mobile_app",label:"White-Label Mobile App",description:"Enable Mobile App settings and promotion across all studios. Keep disabled until apps are approved.",icon:N},{key:"feature_website_builder",label:"Website Builder",description:"Enable drag-and-drop website creation for tenants using Puck editor.",icon:w},{key:"feature_chat",label:"Chat System",description:"Enable real-time chat for support and community using Durable Objects.",icon:S},{key:"feature_financials",label:"Financials & Payouts",description:"Global master switch for Financial reporting and Stripe payouts.",icon:m},{key:"feature_vod",label:"Video on Demand (VOD)",description:"Global master switch for VOD functionality.",icon:b},{key:"feature_zoom",label:"Zoom Integration",description:"Enable Zoom meeting creation and sync.",icon:b},{key:"feature_pos",label:"POS & Retail",description:"Enable Point of Sale and Product management.",icon:m},{key:"feature_sms",label:"SMS Messaging",description:"Enable Twilio SMS features and quotas.",icon:E},{key:"feature_marketing",label:"Marketing & CRM",description:"Enable Email Marketing and CRM tools.",icon:M},{key:"feature_payroll",label:"Payroll & Compensation",description:"Enable Instructor Payroll and Commission tracking.",icon:v}],Z=k(function(){const{configs:r,error:o}=y(),[p,l]=c.useState(r||[]),{getToken:f}=_(),[g,d]=c.useState(null),x=t=>p.find(a=>a.key===t)||{enabled:!1},h=async(t,a)=>{d(t),l(i=>i.find(n=>n.key===t)?i.map(n=>n.key===t?{...n,enabled:!a}:n):[...i,{key:t,enabled:!a}]);try{const i=await f();await j(`/admin/platform/config/${t}`,i,{method:"PUT",body:JSON.stringify({enabled:!a,description:u.find(s=>s.key===t)?.description})})}catch(i){console.error(i),console.error(i),z.error("Failed to update feature flag"),l(r)}finally{d(null)}};return o?e.jsxs("div",{className:"p-8 text-red-600",children:["Error loading config: ",o]}):e.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Platform Features"}),e.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mt-2",children:"Manage global feature flags. Disabling a feature here hides it from all tenants."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:u.map(t=>{const a=x(t.key),i=a.enabled,s=t.icon;return e.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg border border-zinc-200 dark:border-zinc-800 p-3 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-md flex-shrink-0 ${i?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500"}`,children:e.jsx(s,{size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100 leading-tight",children:t.label}),e.jsx("button",{onClick:()=>h(t.key,i),disabled:g===t.key,className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-1 dark:focus:ring-offset-zinc-900 ${i?"bg-blue-600":"bg-zinc-200 dark:bg-zinc-700"}`,children:e.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${i?"translate-x-4":"translate-x-0"}`})})]}),e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-0.5 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[e.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium ${i?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400"}`,children:i?"Enabled":"Disabled (Hidden)"}),a.updatedAt&&e.jsxs("span",{className:"text-[10px] text-zinc-400 dark:text-zinc-500",children:["Updated ",new Date(a.updatedAt).toLocaleDateString()]})]})]})]})},t.key)})}),e.jsxs("div",{className:"mt-8 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-300 mb-2",children:"How this works"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-800 dark:text-blue-300 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Enabled:"})," Feature is visible to tenants (subject to their subscription tier)."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Disabled:"})," Feature is completely hidden from the entire platform. Useful for testing or incomplete features (e.g. Mobile App)."]})]})]})]})});export{Z as default};
