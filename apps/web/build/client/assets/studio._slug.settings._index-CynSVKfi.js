import{w as H,u as J,d as X,f as _,L as T,F as D}from"./chunk-JMJ3UQ3L-D5-P_Fux.js";import{j as e}from"./vendor-puck-Ox9nZAW8.js";import{a}from"./api-OnQO3erh.js";import{a as r}from"./vendor-sentry-JepEA2vj.js";import{t as c}from"./index-Cb5OqxoU.js";import{C as R}from"./Dialogs-Atowov_t.js";import{G as A}from"./globe-B4XmurjP.js";import{C as z}from"./credit-card-DxGxPhTX.js";import{P as B}from"./plus-CWTELB5_.js";import{M as I}from"./map-pin-BMDRpB-a.js";import{T as K}from"./trash-2-BcHoghLw.js";import{S as $}from"./shopping-bag-CK_HfsHN.js";import"./Modal-C2ODX5rl.js";import"./createLucideIcon-CZ3UnH4h.js";const U=typeof window<"u"?window.ENV?.API_URL:"",oe=H(function(){const{locations:u}=J(),{tenant:f}=X(),[t,p]=r.useState(f),[h,x]=r.useState(t.name),[l,o]=r.useState(!1),[g,d]=r.useState(null),[v,k]=r.useState(null),[P,w]=r.useState(!1),O=_(),[j,N]=r.useState(null),[E,S]=r.useState(!1),M=async()=>{c.success("Your request for a Stripe Terminal Reader (WisePOS E) has been received. Our team will contact you shortly to confirm shipping details."),S(!1)},F=s=>{N(s)},L=()=>{j&&(O({intent:"delete_location",id:j},{method:"post"}),N(null))};return e.jsxs("div",{className:"max-w-4xl pb-10",children:[e.jsx("div",{className:"mb-8",children:e.jsx("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Studio Settings"})}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 mb-4",children:"General Information"}),g&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded mb-4 text-sm",children:g}),v&&e.jsx("div",{className:"bg-green-50 text-green-600 p-3 rounded mb-4 text-sm",children:v}),e.jsxs("form",{onSubmit:async s=>{s.preventDefault(),o(!0),d(null),k(null);try{const n=await window.Clerk?.session?.getToken();await a("/tenant/settings",n,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({name:h})}),k("Settings saved successfully")}catch(n){d(n.message||"Failed to save settings"),c.error(n.message||"Failed to save settings")}finally{o(!1)}},children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-zinc-500 uppercase tracking-wide mb-2",children:"Studio Name"}),e.jsx("input",{type:"text",value:h,onChange:s=>x(s.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Enter studio name"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",disabled:l,className:"bg-zinc-900 text-white px-4 py-2 rounded-md font-medium text-sm hover:bg-zinc-800 disabled:opacity-70",children:l?"Saving...":"Save Changes"})})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-zinc-100 dark:border-zinc-800",children:[e.jsx("label",{className:"block text-xs font-semibold text-zinc-500 uppercase tracking-wide mb-2",children:"Studio Logo"}),e.jsx("p",{className:"text-xs text-zinc-400 mb-3",children:"Upload a logo that will appear in the sidebar header. Recommended: 200x200px or larger."}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg border border-zinc-200 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-800 flex items-center justify-center overflow-hidden",children:t.branding?.logoUrl?e.jsx("img",{src:t.branding.logoUrl,alt:"Studio logo",className:"w-full h-full object-contain"}):e.jsx("span",{className:"text-zinc-400 text-xs text-center px-2",children:"No logo"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",id:"logo-upload",accept:"image/*",className:"hidden",onChange:async s=>{const n=s.target.files?.[0];if(n)try{o(!0);const i=await window.Clerk?.session?.getToken(),b=new FormData;b.append("file",n);const C=await(await fetch(`${U}/uploads/logo`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"X-Tenant-Slug":t.slug},body:b})).json();if(C.error)throw new Error(C.error);k("Logo uploaded successfully"),window.location.reload()}catch(i){d(i.message||"Failed to upload logo")}finally{o(!1)}}}),e.jsx("label",{htmlFor:"logo-upload",className:"inline-flex items-center gap-2 px-4 py-2 border border-zinc-300 dark:border-zinc-600 rounded-md text-sm font-medium text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-800 cursor-pointer transition-colors",children:l?"Uploading...":"Upload Logo"}),e.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:"PNG, JPG or WebP. Max 5MB."})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm mb-8",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-blue-500"}),"Marketplace Discovery"]}),e.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1",children:"Allow new students to find your studio in the global app."})]})}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg border border-zinc-200 dark:border-zinc-700",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Public Marketplace Listing"}),e.jsx("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:t.isPublic?"Your studio is visible in search results.":"Your studio is hidden from search."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.isPublic||!1,onChange:async s=>{const n=s.target.checked;try{const i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({isPublic:n})}),window.location.reload()}catch{c.error("Failed to update marketplace setting")}}}),e.jsx("div",{className:"w-11 h-6 bg-zinc-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-zinc-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm mb-8",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5 text-purple-500"}),"Kiosk Mode"]}),e.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1",children:"Enable self-service check-in for your front desk."})]})}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg border border-zinc-200 dark:border-zinc-700 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Enable Kiosk App"}),e.jsx("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:t.features?.includes("kiosk")?"Kiosk is active. Access it at /kiosk/your-slug.":"Kiosk is currently disabled."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.features?.includes("kiosk")||!1,onChange:async s=>{const n=s.target.checked;try{const i=await window.Clerk?.session?.getToken();await a(`/studios/${t.id}/features`,i,{method:"POST",body:JSON.stringify({featureKey:"kiosk",enabled:n})}),window.location.reload()}catch{c.error("Failed to toggle Kiosk mode")}}}),e.jsx("div",{className:"w-11 h-6 bg-zinc-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-zinc-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),t.features?.includes("kiosk")&&e.jsxs("div",{className:"ml-1 p-4 border border-zinc-100 dark:border-zinc-700 rounded-lg",children:[e.jsx("label",{className:"block text-xs font-semibold text-zinc-500 uppercase tracking-wide mb-2",children:"Kiosk PIN"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("input",{type:"text",maxLength:6,defaultValue:t.settings?.kioskPin||"",placeholder:"123456",className:"w-40 bg-zinc-50 dark:bg-zinc-800 border-zinc-300 dark:border-zinc-700 rounded text-sm px-3 py-2 text-center tracking-widest font-mono",onBlur:async s=>{const n=s.target.value;if(!(n.length<4))try{const i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({kioskPin:n})}),c.success("Kiosk PIN updated")}catch{c.error("Failed to save PIN")}}}),e.jsx("a",{href:`/kiosk/${t.slug}/login`,target:"_blank",rel:"noreferrer",className:"text-sm text-purple-600 hover:text-purple-700 font-medium",children:"Open Kiosk App →"})]}),e.jsx("p",{className:"text-xs text-zinc-400 mt-2",children:"This PIN is required to unlock the Kiosk on your tablet. Keep it secret from students."})]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm mb-8",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"Registration"}),e.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1",children:"Control how new students sign up for your studio."})]})}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg border border-zinc-200 dark:border-zinc-700",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Public Student Registration"}),e.jsx("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:t.settings?.enableStudentRegistration?"Students can create accounts on your public site.":"Only you can add students manually."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.settings?.enableStudentRegistration||!1,onChange:async s=>{const n=s.target.checked;try{const i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{enableStudentRegistration:n}})}),window.location.reload()}catch{c.error("Failed to update setting")}}}),e.jsx("div",{className:"w-11 h-6 bg-zinc-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-zinc-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm mb-8",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"Notifications & Automation"}),e.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1",children:"Manage email alerts and studio automation settings."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Admin Notification Email"}),e.jsx("input",{type:"email",className:"w-full border-zinc-300 dark:border-zinc-700 rounded text-sm px-3 py-2 bg-white dark:bg-zinc-800",placeholder:"admin@studio.com",defaultValue:t.settings?.notifications?.adminEmail||"",onBlur:async s=>{const n=s.target.value,i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{notifications:{...t.settings?.notifications,adminEmail:n}}})})}}),e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:"Where should we send system alerts?"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-50 dark:bg-zinc-800/50 rounded border border-zinc-200 dark:border-zinc-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"New Student Alerts"}),e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Email on registration."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.settings?.notifications?.newStudentAlert||!1,onChange:async s=>{const n=s.target.checked,i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{notifications:{...t.settings?.notifications,newStudentAlert:n}}})}),window.location.reload()}}),e.jsx("div",{className:"w-9 h-5 bg-zinc-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-zinc-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-50 dark:bg-zinc-800/50 rounded border border-zinc-200 dark:border-zinc-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"BCC on User Emails"}),e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Copy of booking emails."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.settings?.notifications?.enableBcc||!1,onChange:async s=>{const n=s.target.checked,i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{notifications:{...t.settings?.notifications,enableBcc:n}}})}),window.location.reload()}}),e.jsx("div",{className:"w-9 h-5 bg-zinc-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-zinc-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Enable No-Show Fee Automation"}),e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Automatically charge fees for missed classes."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.settings?.noShowFeeEnabled||!1,onChange:async s=>{const n=s.target.checked;try{const i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{noShowFeeEnabled:n}})}),window.location.reload()}catch{c.error("Failed to save")}}}),e.jsx("div",{className:"w-11 h-6 bg-zinc-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-zinc-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),t.settings?.noShowFeeEnabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Fee Amount ($)"}),e.jsx("input",{type:"number",step:"0.01",className:"w-full border-zinc-300 dark:border-zinc-700 rounded text-sm px-3 py-2 bg-white dark:bg-zinc-800",placeholder:"10.00",defaultValue:t.settings?.noShowFeeAmount?(t.settings.noShowFeeAmount/100).toFixed(2):"10.00",onBlur:async s=>{const n=parseFloat(s.target.value);if(n>0){const i=Math.round(n*100),b=await window.Clerk?.session?.getToken();await a("/tenant/settings",b,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{noShowFeeAmount:i}})})}}}),e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:'Fee will be charged automatically when marking "No Show".'})]}),e.jsxs("div",{className:"mb-4 ml-1",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:t.settings?.notificationSettings?.noShowSms!==!1,onChange:async s=>{const n=s.target.checked,i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{notificationSettings:{...t.settings?.notificationSettings,noShowSms:n}}})}),window.location.reload()}}),e.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Send SMS Alert"})]}),e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 ml-6 mt-1",children:"Notify student via SMS when charged/marked."})]})]}),e.jsxs("div",{className:"flex items-center justify-between pb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Auto-Mark No Shows"}),e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Automatically mark expected students as No Show."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.settings?.noShowAutoMarkEnabled||!1,onChange:async s=>{const n=s.target.checked;try{const i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{noShowAutoMarkEnabled:n}})}),window.location.reload()}catch{c.error("Failed to save")}}}),e.jsx("div",{className:"w-11 h-6 bg-zinc-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-zinc-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),t.settings?.noShowAutoMarkEnabled&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"When to Mark?"}),e.jsxs("select",{className:"w-full border-zinc-300 dark:border-zinc-700 rounded text-sm px-3 py-2 bg-white dark:bg-zinc-800",defaultValue:t.settings?.noShowAutoMarkTime||"end_of_class",onChange:async s=>{const n=s.target.value,i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{noShowAutoMarkTime:n}})})},children:[e.jsx("option",{value:"start_of_class",children:"Start of Class"}),e.jsx("option",{value:"15_mins_after_start",children:"15 Minutes After Start"}),e.jsx("option",{value:"end_of_class",children:"End of Class"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm mb-8",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"Class Management"}),e.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1",children:"Configure booking windows and cancellation policies."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Attendance Switch Cutoff"}),e.jsx(y,{value:t.settings?.classSettings?.attendanceSwitchCutoffMinutes||15,min:0,step:5,suffix:"min",onChange:async s=>{const n=await window.Clerk?.session?.getToken();await a("/tenant/settings",n,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{classSettings:{...t.settings?.classSettings,attendanceSwitchCutoffMinutes:s}}})})}}),e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-2",children:"When students can last switch between In-Person and Zoom."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Cancellation Cutoff"}),e.jsx(y,{value:t.settings?.classSettings?.cancellationCutoffMinutes||60,min:0,step:15,suffix:"min",onChange:async s=>{const n=await window.Clerk?.session?.getToken();await a("/tenant/settings",n,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{classSettings:{...t.settings?.classSettings,cancellationCutoffMinutes:s}}})})}}),e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-2",children:"Latest time a student can cancel without penalty."})]}),e.jsx("div",{className:"md:col-span-2 border-t border-zinc-100 dark:border-zinc-800 pt-4 mt-2",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Auto-Cancel Low Enrollment"}),e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Automatically cancel classes that don't meet minimum enrollment."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:t.settings?.classSettings?.defaultAutoCancelEnabled!==!1,onChange:async s=>{const n=s.target.checked,i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{classSettings:{...t.settings?.classSettings,defaultAutoCancelEnabled:n}}})}),window.location.reload()}}),e.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Enable by Default"})]}),t.settings?.classSettings?.defaultAutoCancelEnabled!==!1&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(y,{value:t.settings?.classSettings?.defaultAutoCancelThresholdHours||2,min:1,step:1,suffix:"hours pre-class",onChange:async s=>{const n=await window.Clerk?.session?.getToken();await a("/tenant/settings",n,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{classSettings:{...t.settings?.classSettings,defaultAutoCancelThresholdHours:s}}})})}})})]})]})}),e.jsxs("div",{className:"md:col-span-2 border-t border-zinc-100 dark:border-zinc-800 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-zinc-100 dark:border-zinc-800 mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Booking Confirmations"}),e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Notify students when they book a class."})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:t.settings?.notificationSettings?.bookingEmail!==!1,onChange:async s=>{const n=s.target.checked,i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{notificationSettings:{...t.settings?.notificationSettings,bookingEmail:n}}})}),window.location.reload()}}),e.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Email"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:t.settings?.notificationSettings?.bookingSms!==!1,onChange:async s=>{const n=s.target.checked,i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{notificationSettings:{...t.settings?.notificationSettings,bookingSms:n}}})}),window.location.reload()}}),e.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"SMS"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-zinc-100 dark:border-zinc-800 mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Waitlist Promotions"}),e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Notify students when they come off the waitlist."})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:t.settings?.notificationSettings?.waitlistEmail!==!1,onChange:async s=>{const n=s.target.checked,i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{notificationSettings:{...t.settings?.notificationSettings,waitlistEmail:n}}})}),window.location.reload()}}),e.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Email"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:t.settings?.notificationSettings?.waitlistSms!==!1,onChange:async s=>{const n=s.target.checked,i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{notificationSettings:{...t.settings?.notificationSettings,waitlistSms:n}}})}),window.location.reload()}}),e.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"SMS"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Cancellation Notifications"}),e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Notify students when you cancel a class."})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:t.settings?.notificationSettings?.cancellationEmail!==!1,onChange:async s=>{const n=s.target.checked,i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{notificationSettings:{...t.settings?.notificationSettings,cancellationEmail:n}}})}),window.location.reload()}}),e.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Email"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-zinc-300 text-blue-600 focus:ring-blue-500",checked:t.settings?.notificationSettings?.cancellationSms||!1,onChange:async s=>{const n=s.target.checked,i=await window.Clerk?.session?.getToken();await a("/tenant/settings",i,{method:"PATCH",headers:{"X-Tenant-Slug":t.slug},body:JSON.stringify({settings:{notificationSettings:{...t.settings?.notificationSettings,cancellationSms:n}}})}),window.location.reload()}}),e.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"SMS"})]})]})]})]})]})]}),e.jsx(T,{to:`/studio/${t.slug}/settings/billing`,className:"block bg-white border border-zinc-200 rounded-lg p-6 shadow-sm mb-8 hover:border-blue-300 transition-colors group",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold group-hover:text-blue-600 transition-colors",children:"Billing & Subscription"}),e.jsx("p",{className:"text-sm text-zinc-500",children:"Manage your plan, payment methods, and view usage."})]}),e.jsx("div",{className:"bg-zinc-100 p-2 rounded-full group-hover:bg-blue-50 group-hover:text-blue-600 transition-colors",children:e.jsx(z,{className:"h-5 w-5"})})]})}),e.jsxs("div",{className:"bg-white border border-zinc-200 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Locations"}),e.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 text-sm font-medium text-blue-600 hover:text-blue-800",children:[e.jsx(B,{className:"h-4 w-4"}),"Add Location"]})]}),P&&e.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 rounded p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold mb-3",children:"New Location"}),e.jsxs(D,{method:"post",onSubmit:()=>w(!1),children:[e.jsx("input",{type:"hidden",name:"intent",value:"create_location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-zinc-500 mb-1",children:"Name"}),e.jsx("input",{name:"name",required:!0,placeholder:"e.g. Main Studio",className:"w-full text-sm border-zinc-300 rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-zinc-500 mb-1",children:"Address (Optional)"}),e.jsx("input",{name:"address",placeholder:"123 Yoga St",className:"w-full text-sm border-zinc-300 rounded px-3 py-2"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-3 py-1.5 text-xs border border-zinc-300 rounded hover:bg-zinc-100",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save Location"})]})]})]}),e.jsx("div",{className:"space-y-3",children:u.length===0?e.jsx("div",{className:"text-center py-8 text-zinc-500 text-sm italic",children:"No locations added yet."}):u.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-zinc-100 rounded hover:bg-zinc-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 p-2 bg-blue-50 text-blue-600 rounded",children:e.jsx(I,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-zinc-900",children:s.name}),s.address&&e.jsx("div",{className:"text-sm text-zinc-500",children:s.address})]})]}),e.jsx("button",{onClick:()=>F(s.id),className:"text-zinc-400 hover:text-red-600 p-2 rounded hover:bg-zinc-100",children:e.jsx(K,{className:"h-4 w-4"})})]},s.id))}),e.jsx(R,{isOpen:!!j,onClose:()=>N(null),onConfirm:L,title:"Delete Location",message:"Are you sure you want to delete this location? This action cannot be undone.",confirmText:"Delete",isDestructive:!0}),e.jsx(T,{to:`/studio/${t.slug}/settings/domain`,className:"block bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 shadow-sm mb-8 hover:border-purple-300 transition-colors group",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold dark:text-zinc-100 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:"Custom Domain"}),e.jsxs("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:["Connect your own website domain (e.g. studio.com). ",e.jsx("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 text-[10px] px-1.5 py-0.5 rounded ml-2 uppercase font-bold tracking-wider",children:"Scale"})]})]}),e.jsx("div",{className:"bg-zinc-100 dark:bg-zinc-800 p-2 rounded-full group-hover:bg-purple-50 dark:group-hover:bg-purple-900/30 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:e.jsx(A,{className:"h-5 w-5"})})]})}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 shadow-2xl",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Order BBPOS WisePOS E"}),e.jsx("p",{className:"text-sm text-zinc-500 mb-6",children:"Connect your Stripe account to the physical world with a pre-certified card reader. $249/unit."}),e.jsx("div",{className:"bg-zinc-50 p-4 rounded-xl mb-6 flex justify-center",children:e.jsx(z,{size:48,className:"text-zinc-300"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>S(!1),className:"flex-1 py-3 font-bold text-zinc-500 hover:bg-zinc-100 rounded-xl",children:"Cancel"}),e.jsxs("button",{onClick:M,className:"flex-1 py-3 bg-blue-600 text-white font-bold rounded-xl shadow-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[e.jsx($,{size:16})," Place Order"]})]})]})})]})]})});function y({value:m,onChange:u,min:f=0,max:t=1e3,step:p=1,suffix:h=""}){const[x,l]=r.useState(m);r.useEffect(()=>{l(m)},[m]);const o=g=>{const d=Math.max(f,Math.min(t,g));l(d),u(d)};return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>o(x-p),className:"w-8 h-8 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center hover:bg-blue-100 transition-colors border border-blue-200",children:e.jsx("span",{className:"text-lg font-bold leading-none mb-0.5",children:"−"})}),e.jsxs("div",{className:"min-w-[80px] text-center font-mono font-medium text-lg text-zinc-700 dark:text-zinc-200",children:[x," ",e.jsx("span",{className:"text-xs text-zinc-400 font-sans",children:h})]}),e.jsx("button",{type:"button",onClick:()=>o(x+p),className:"w-8 h-8 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center hover:bg-blue-100 transition-colors border border-blue-200",children:e.jsx("span",{className:"text-lg font-bold leading-none mb-0.5",children:"+"})})]})}export{oe as default};
