import{w as N,e as v}from"./chunk-JMJ3UQ3L-BFmd18Yu.js";import{j as e}from"./vendor-puck-aUaaDwmz.js";import{a as o}from"./vendor-livekit-D3VpklN2.js";import{a as g}from"./api-D1U4i9fn.js";import{S as y}from"./smartphone-DkVZBGRt.js";import{C as k}from"./circle-check-Biuc9NB0.js";import{C as w}from"./circle-alert-BrO62f5x.js";import{U as f}from"./upload-DoKnH7Yo.js";import{L as C}from"./loader-circle-BQZLkmRD.js";import{I as U}from"./image-B4UGPaq8.js";import"./createLucideIcon-CcD9UNCP.js";const D=N(function(){const{tenant:d,token:x}=v(),[p,m]=o.useState(!1),[r,b]=o.useState(null),[a,t]=o.useState(d.mobileAppConfig||{appName:d.name,iconUrl:"",splashUrl:"",primaryColor:d.branding?.primaryColor||"#000000"}),[n,l]=o.useState(null),u=async(s,c)=>{b(c),l(null);try{const i=new FormData;i.append("file",s),i.append("title",`Mobile App ${c==="icon"?"Icon":"Splash"} - ${s.name}`);const h=await g("/uploads/r2-image",x,{method:"POST",body:i});if(h.url)t(j=>({...j,[c+"Url"]:h.url})),l({type:"success",text:`${c==="icon"?"Icon":"Splash Screen"} uploaded successfully.`});else throw new Error("Upload failed, no URL returned.")}catch(i){console.error(i),l({type:"error",text:`Upload failed: ${i.message}`})}finally{b(null)}},z=async()=>{m(!0),l(null);try{if((await g("/tenant/settings",x,{method:"PATCH",body:JSON.stringify({mobileAppConfig:a})})).success)l({type:"success",text:"Mobile app settings saved successfully."});else throw new Error("Failed to save.")}catch(s){l({type:"error",text:s.message})}finally{m(!1)}};return e.jsxs("div",{className:"p-8 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl",children:e.jsx(y,{className:"text-blue-600 dark:text-blue-400",size:32})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Mobile App Builder"}),e.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:"Customize your white-label mobile application."})]})]}),n&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center gap-2 ${n.type==="success"?"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-300":"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-300"}`,children:[n.type==="success"?e.jsx(k,{size:18}):e.jsx(w,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:n.text})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm",children:[e.jsx("h3",{className:"font-semibold mb-4 text-zinc-900 dark:text-zinc-100",children:"App Identity"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-zinc-500 uppercase mb-1",children:"App Name"}),e.jsx("input",{type:"text",value:a.appName,onChange:s=>t({...a,appName:s.target.value}),className:"w-full text-sm p-2 rounded border border-zinc-200 dark:border-zinc-700 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"My Studio App"}),e.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:"This name will appear on the user's home screen."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-zinc-500 uppercase mb-1",children:"Primary Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:a.primaryColor,onChange:s=>t({...a,primaryColor:s.target.value}),className:"h-9 w-16 p-0 rounded border border-zinc-200 dark:border-zinc-700 cursor-pointer"}),e.jsx("input",{type:"text",value:a.primaryColor,onChange:s=>t({...a,primaryColor:s.target.value}),className:"flex-1 text-sm p-2 rounded border border-zinc-200 dark:border-zinc-700 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 uppercase font-mono focus:ring-2 focus:ring-blue-500 outline-none"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm",children:[e.jsx("h3",{className:"font-semibold mb-4 text-zinc-900 dark:text-zinc-100",children:"Assets"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-zinc-500 uppercase mb-1",children:"App Icon"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:a.iconUrl,onChange:s=>t({...a,iconUrl:s.target.value}),className:"flex-1 text-sm p-2 rounded border border-zinc-200 dark:border-zinc-700 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://..."}),e.jsxs("label",{className:`cursor-pointer bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 text-zinc-700 dark:text-zinc-300 px-3 py-2 rounded-md transition-colors border border-zinc-200 dark:border-zinc-700 flex items-center gap-2 ${r==="icon"?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(f,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:r==="icon"?"...":"Upload"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",disabled:!!r,onChange:s=>s.target.files?.[0]&&u(s.target.files[0],"icon")})]})]}),e.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:"Recommended: 1024x1024 PNG (No transparency)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-zinc-500 uppercase mb-1",children:"Splash Screen"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:a.splashUrl,onChange:s=>t({...a,splashUrl:s.target.value}),className:"flex-1 text-sm p-2 rounded border border-zinc-200 dark:border-zinc-700 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://..."}),e.jsxs("label",{className:`cursor-pointer bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 text-zinc-700 dark:text-zinc-300 px-3 py-2 rounded-md transition-colors border border-zinc-200 dark:border-zinc-700 flex items-center gap-2 ${r==="splash"?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(f,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:r==="splash"?"...":"Upload"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",disabled:!!r,onChange:s=>s.target.files?.[0]&&u(s.target.files[0],"splash")})]})]})]})]})]}),e.jsxs("button",{onClick:z,disabled:p,className:"w-full py-2.5 bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 rounded-lg font-bold hover:opacity-90 transition-opacity flex justify-center items-center gap-2",children:[p&&e.jsx(C,{size:16,className:"animate-spin"}),"Save Configuration"]})]}),e.jsx("div",{className:"flex justify-center pt-8",children:e.jsxs("div",{className:"relative border-4 border-zinc-800 bg-zinc-900 rounded-[3rem] h-[600px] w-[300px] shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"absolute top-0 w-full h-8 bg-black/20 z-20 flex justify-between px-4 items-center text-[10px] text-white font-bold",children:[e.jsx("span",{children:"9:41"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full opacity-50"}),e.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})]})]}),e.jsxs("div",{className:"h-full w-full bg-white flex flex-col pt-12",children:[e.jsxs("div",{className:"px-4 pb-4 border-b border-zinc-100 flex items-center justify-between",children:[e.jsx("h2",{className:"font-bold text-lg",style:{color:a.primaryColor},children:a.appName||"Studio App"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-zinc-100"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"aspect-video rounded-xl bg-zinc-100 mb-4 flex items-center justify-center text-zinc-300 relative overflow-hidden",children:a.splashUrl?e.jsx("img",{src:a.splashUrl,alt:"Splash",className:"w-full h-full object-cover"}):e.jsx(U,{size:24})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 w-2/3 bg-zinc-100 rounded"}),e.jsx("div",{className:"h-4 w-1/2 bg-zinc-100 rounded"})]})]}),a.iconUrl&&e.jsxs("div",{className:"absolute bottom-12 left-1/2 -translate-x-1/2 flex flex-col items-center",children:[e.jsx("img",{src:a.iconUrl,alt:"Icon",className:"w-16 h-16 rounded-2xl shadow-lg mb-2 bg-white"}),e.jsx("span",{className:"text-xs text-white bg-black/50 px-2 py-0.5 rounded",children:"App Icon"})]})]}),e.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 w-32 h-1 bg-white/50 rounded-full"})]})})]})]})});export{D as default};
