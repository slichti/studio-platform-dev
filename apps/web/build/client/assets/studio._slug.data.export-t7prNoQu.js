import{w as u,e as b}from"./chunk-JMJ3UQ3L-BFmd18Yu.js";import{j as e}from"./vendor-puck-DM_I7lvc.js";import{a as x}from"./vendor-livekit-D3VpklN2.js";import{A as h}from"./api-D1U4i9fn.js";import{E as g}from"./Dialogs-B0egr1AH.js";import{D as f}from"./download-CGJDfS43.js";import{C as z}from"./chart-column-De5NC5nN.js";import{C as k}from"./credit-card-D_mH7uwz.js";import{S as j}from"./shopping-bag-mWqifofs.js";import"./Modal-BwVo3caz.js";import"./createLucideIcon-CcD9UNCP.js";const P=u(function(){const{tenant:o}=b(),[r,i]=x.useState(null),[s,l]=x.useState({isOpen:!1,message:""}),a=async n=>{i(n);try{const c=await window.Clerk?.session?.getToken(),d=await fetch(`${h}/tenant/settings/export?type=${n}`,{headers:{Authorization:`Bearer ${c}`,"X-Tenant-Slug":o.slug}});if(!d.ok)throw new Error("Export failed");const m=await d.blob(),p=window.URL.createObjectURL(m),t=document.createElement("a");t.href=p,t.download=`export_${n}_${o.slug}.csv`,document.body.appendChild(t),t.click(),t.remove()}catch{l({isOpen:!0,message:"Export failed. Please try again."})}finally{i(null)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(g,{isOpen:s.isOpen,onClose:()=>l({...s,isOpen:!1}),message:s.message}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[e.jsx(f,{size:20,className:"text-blue-500"}),"Export Data"]}),e.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1",children:"Download your studio data in CSV format for analysis or backup."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>a("subscribers"),disabled:!!r,className:"group flex flex-col items-center justify-center p-6 border border-zinc-200 dark:border-zinc-700 rounded-xl hover:bg-zinc-50 dark:hover:bg-zinc-800/50 hover:border-blue-200 dark:hover:border-blue-800 transition-all text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:e.jsx(z,{size:24})}),e.jsx("span",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:"Subscribers"}),e.jsx("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-2",children:r==="subscribers"?"Generating CSV...":"Active members & history"})]}),e.jsxs("button",{onClick:()=>a("financials"),disabled:!!r,className:"group flex flex-col items-center justify-center p-6 border border-zinc-200 dark:border-zinc-700 rounded-xl hover:bg-zinc-50 dark:hover:bg-zinc-800/50 hover:border-emerald-200 dark:hover:border-emerald-800 transition-all text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:e.jsx(k,{size:24})}),e.jsx("span",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:"Financials"}),e.jsx("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-2",children:r==="financials"?"Generating CSV...":"Invoices & Transactions"})]}),e.jsxs("button",{onClick:()=>a("products"),disabled:!!r,className:"group flex flex-col items-center justify-center p-6 border border-zinc-200 dark:border-zinc-700 rounded-xl hover:bg-zinc-50 dark:hover:bg-zinc-800/50 hover:border-purple-200 dark:hover:border-purple-800 transition-all text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:e.jsx(j,{size:24})}),e.jsx("span",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:"Products"}),e.jsx("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-2",children:r==="products"?"Generating CSV...":"Memberships & Items"})]})]})]}),e.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-lg p-4 text-xs text-zinc-500 dark:text-zinc-400",children:[e.jsx("strong",{children:"Note:"})," Exports include sensitive data. Please handle these files securely."]})]})});export{P as default};
