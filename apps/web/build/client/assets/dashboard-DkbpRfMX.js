import{r as l,N as s,w as b,u as d,O as v}from"./chunk-JMJ3UQ3L-OilvkdUQ.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{T as k}from"./ThemeToggle-dzTOp4Ay.js";import{u as j,a as w}from"./index-WmvJLO_A.js";import"./ThemeProvider-COyyJNli.js";import"./createLucideIcon-Bxh06Jdl.js";import"./index-B3-eZQPY.js";function z({children:c,tenantName:o="Studio Platform",role:r,navItems:a,title:h="Overview"}){const{user:t,isLoaded:g}=j(),{signOut:p}=w(),[x,i]=l.useState(!1),[m,n]=l.useState(null);l.useEffect(()=>{n(localStorage.getItem("impersonation_token"))},[]);const u=()=>{typeof window<"u"&&(localStorage.removeItem("impersonation_token"),n(null)),p({redirectUrl:"/"})};return e.jsxs("div",{className:"flex h-screen bg-zinc-50 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100 font-sans transition-colors duration-300",children:[e.jsxs("aside",{className:"w-64 bg-white dark:bg-zinc-900 border-r border-zinc-200 dark:border-zinc-800 flex flex-col transition-colors duration-300",children:[e.jsxs("div",{className:"p-6 flex items-center gap-4 border-b border-zinc-200 dark:border-zinc-800",children:[e.jsx("div",{className:"text-3xl",children:"üßò‚Äç‚ôÄÔ∏è"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400 leading-tight",children:o})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-2",children:a||e.jsx(e.Fragment,{children:e.jsx(s,{to:"/dashboard",className:({isActive:f})=>`block px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 ${f?"bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-800/50 hover:text-zinc-900 dark:hover:text-zinc-200"}`,children:"Overview"})})})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[m&&e.jsxs("div",{className:"bg-red-500 text-white px-4 py-2 flex items-center justify-center gap-3 text-sm font-medium",children:[e.jsxs("span",{children:["‚ö†Ô∏è Impersonating ",typeof window<"u"?localStorage.getItem("impersonation_target_email"):"User"]}),e.jsx("button",{onClick:()=>{localStorage.removeItem("impersonation_token"),localStorage.removeItem("impersonation_target_email"),n(null),window.location.href="/"},className:"bg-white text-red-500 px-2 py-0.5 rounded text-xs font-bold hover:bg-red-50",children:"Exit"})]}),e.jsxs("header",{className:"h-[70px] bg-white dark:bg-zinc-900 border-b border-zinc-200 dark:border-zinc-800 flex items-center justify-between px-8 transition-colors duration-300",children:[e.jsx("div",{className:"text-lg font-medium text-zinc-900 dark:text-zinc-100",children:h}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx(k,{}),g&&t&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{className:"flex items-center gap-3 p-1 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",onClick:()=>i(!x),children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-indigo-600 flex items-center justify-center text-white font-bold text-lg",children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.fullName||"User",className:"w-full h-full object-cover"}):e.jsx("span",{children:t.firstName?t.firstName[0]:"U"})}),e.jsxs("div",{className:"text-left hidden md:block",children:[e.jsx("div",{className:"font-semibold text-sm text-zinc-900 dark:text-zinc-100",children:t.fullName}),e.jsx("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 capitalize",children:r||"admin"})]}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-zinc-400",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-56 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl shadow-lg p-2 z-50 animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs(s,{to:"/dashboard/profile",onClick:()=>i(!1),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-zinc-700 dark:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"My Profile"]}),m&&e.jsxs("button",{onClick:()=>{i(!1),localStorage.removeItem("impersonation_token"),localStorage.removeItem("impersonation_target_email"),n(null),window.location.href="/admin"},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 2a10 10 0 0 0-10 10v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6a10 10 0 0 0-10-10Z"}),e.jsx("path",{d:"M12 12v6"}),e.jsx("circle",{cx:"12",cy:"7",r:"1"})]}),"Return to Admin"]}),e.jsx("div",{className:"h-px bg-zinc-100 dark:bg-zinc-800 my-1"}),e.jsxs("button",{onClick:()=>{i(!1),u()},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Sign Out"]})]})]})]})]})]}),e.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-zinc-50 dark:bg-zinc-950 transition-colors duration-300",children:c})]})]})}const O=b(function(){const{isSystemAdmin:o}=d();let r=[e.jsx(s,{to:"/dashboard",end:!0,className:({isActive:a})=>`block px-3 py-2 rounded-md text-sm font-medium transition-colors ${a?"bg-zinc-800 text-white":"text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800 dark:hover:text-white"}`,children:"Overview"},"overview")];return o&&(r.push(e.jsx("div",{className:"my-2 border-t border-zinc-200 dark:border-zinc-800"},"separator")),r.push(e.jsx(s,{to:"/admin",className:"block px-3 py-2 rounded-md text-sm font-medium text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors",children:"üõ°Ô∏è System Admin"},"admin"))),e.jsxs(z,{navItems:r,children:[o===!1&&d().error&&e.jsxs("div",{className:"bg-red-50 text-red-700 p-4 border-b border-red-200 text-sm text-center",children:["Warning: Profile load failed. Admin features may be hidden. ",e.jsx("br",{}),e.jsx("span",{className:"font-mono text-xs opacity-75",children:d().error})]}),e.jsx(v,{})]})});export{O as default};
